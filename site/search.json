{"config":{"separator":"[\\s\\-_,:!=\\[\\]()\\\\\"`/]+|\\.(?!\\d)"},"items":[{"location":"","level":1,"title":"ç®€ä»‹","text":"<p><code>plotfig</code> æ˜¯ä¸€ä¸ªä¸“ä¸ºç§‘å­¦æ•°æ®å¯è§†åŒ–è®¾è®¡çš„ Python åº“ï¼Œè‡´åŠ›äºä¸ºè®¤çŸ¥ç¥ç»ç§‘ç ”å·¥ä½œäººå‘˜æä¾›é«˜æ•ˆã€æ˜“ç”¨ä¸”ç¾è§‚çš„å›¾å½¢ç»˜åˆ¶å·¥å…·ã€‚ è¯¥é¡¹ç›®åŸºäºä¸šç•Œä¸»æµçš„å¯è§†åŒ–åº“â€”â€” <code>matplotlib</code>ã€<code>surfplot</code> å’Œ <code>plotly</code>ç­‰åº“å¼€å‘ï¼Œèåˆäº†ä¸‰è€…çš„å¼ºå¤§åŠŸèƒ½ï¼Œèƒ½å¤Ÿæ»¡è¶³ç¥ç»ç§‘å­¦ä»¥åŠè„‘è¿æ¥ç»„å­¦ä¸­å¤šç§åœºæ™¯ä¸‹çš„å¤æ‚ç»˜å›¾éœ€æ±‚ã€‚</p> <p></p>","path":["ç®€ä»‹"],"tags":[]},{"location":"#_2","level":2,"title":"é¡¹ç›®ç»“æ„","text":"<p>é¡¹ç›®é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼ŒåŒ…å«å¦‚ä¸‹ä¸»è¦åŠŸèƒ½æ¨¡å—ï¼š</p> <ul> <li><code>bar.py</code>ï¼šæ¡å½¢å›¾ç»˜åˆ¶ï¼Œé€‚ç”¨äºåˆ†ç»„æ•°æ®çš„å¯¹æ¯”å±•ç¤ºã€‚</li> <li><code>matrix.py</code>ï¼šé€šç”¨çŸ©é˜µå¯è§†åŒ–ï¼Œæ”¯æŒå¤šç§é…è‰²å’Œæ³¨é‡Šæ–¹å¼ã€‚</li> <li><code>correlation.py</code>ï¼šç›¸å…³æ€§çŸ©é˜µå¯è§†åŒ–ï¼Œä¾¿äºåˆ†æå˜é‡é—´çš„ç›¸å…³æ€§åˆ†å¸ƒã€‚</li> <li><code>circos.py</code>ï¼šå¼¦å›¾å¯è§†åŒ–ï¼Œé€‚åˆå¹³é¢å±•ç¤ºè„‘åŒºä¹‹é—´çš„è¿æ¥å…³ç³»ã€‚</li> <li><code>brain_surface.py</code>ï¼šè„‘è¡¨é¢å¯è§†åŒ–ï¼Œå®ç°ä¸‰ç»´è„‘è¡¨é¢å›¾é›†ç»“æ„çš„ç»˜åˆ¶ã€‚</li> <li><code>brain_connection.py</code>ï¼šç»ç’ƒè„‘è¿æ¥å¯è§†åŒ–ï¼Œæ”¯æŒå¤æ‚çš„è„‘ç½‘ç»œç»“æ„å±•ç¤ºã€‚</li> </ul>","path":["ç®€ä»‹"],"tags":[]},{"location":"#_3","level":2,"title":"ç‰¹æ€§","text":"<ul> <li><code>plotfig</code> API è®¾è®¡ç®€æ´ï¼Œå‚æ•°çµæ´»ï¼Œé€‚åˆç§‘ç ”äººå‘˜å’Œæ•°æ®åˆ†æå¸ˆå¿«é€Ÿé›†æˆåˆ°è‡ªå·±çš„æ•°æ®åˆ†ææµç¨‹ä¸­ã€‚</li> <li>å…¶æ¨¡å—åŒ–æ¶æ„ä¾¿äºåç»­åŠŸèƒ½æ‰©å±•å’Œè‡ªå®šä¹‰å¼€å‘ã€‚</li> <li>ç»“åˆ <code>matplotlib</code> æ”¯æŒçŸ¢é‡å›¾æˆ–é«˜åˆ†è¾¨ç‡ä½å›¾å’Œäº¤äº’å¼ HTML è¾“å‡ºï¼Œé€‚åˆè®ºæ–‡å‘è¡¨å’Œå­¦æœ¯å±•ç¤ºã€‚</li> </ul> <p>çƒ«çŸ¥è¯†ï¼šä¸€å¼ å›¾ä¸Šçš„æ‰€æœ‰å…ƒç´ <sup>1</sup>ã€‚ </p> <ol> <li> <p>Quick start guide of matplotlib. â†©</p> </li> </ol>","path":["ç®€ä»‹"],"tags":[]},{"location":"changelog/","level":1,"title":"Changelog","text":"<p>è‡ªåŠ¨æ›´æ–°! Automatically update!</p>","path":["Changelog"],"tags":[]},{"location":"installation/","level":1,"title":"å®‰è£…","text":"<p><code>plotfig</code> æ”¯æŒé€šè¿‡ <code>pip</code> æˆ–æºç å®‰è£…ï¼Œè¦æ±‚ Python 3.11 åŠä»¥ä¸Šç‰ˆæœ¬ã€‚</p>","path":["å®‰è£…"],"tags":[]},{"location":"installation/#pip","level":2,"title":"ä½¿ç”¨ pip å®‰è£… (æ¨è)","text":"<pre><code>pip install plotfig\n</code></pre>","path":["å®‰è£…"],"tags":[]},{"location":"installation/#github","level":2,"title":"ä½¿ç”¨ GitHub æºç å®‰è£…","text":"<pre><code>git clone --depth 1 https://github.com/RicardoRyn/plotfig.git\ncd plotfig\npip install .\n</code></pre>","path":["å®‰è£…"],"tags":[]},{"location":"installation/#_2","level":2,"title":"ä¾èµ–è¦æ±‚","text":"<p><code>plotfig</code> ä¾èµ–è‹¥å¹²æ ¸å¿ƒåº“ï¼Œè¿™äº›ä¾èµ–å°†åœ¨å®‰è£…è¿‡ç¨‹ä¸­è‡ªåŠ¨å¤„ç†ï¼Œä½†éœ€è¦æ³¨æ„ï¼š</p> <ul> <li>surfplot éœ€ä½¿ç”¨å…¶ GitHub ä»“åº“ä¸­çš„æœ€æ–°ç‰ˆï¼Œè€Œé PyPI ä¸Šçš„ç‰ˆæœ¬ï¼Œå› åè€…å°šæœªåŒ…å«æ‰€éœ€åŠŸèƒ½ã€‚</li> </ul> <p>æŒ‡å®š <code>surfplot</code> ç‰ˆæœ¬</p> <p>ç”±äº PyPI ä¸Šçš„ <code>surfplot</code> ç‰ˆæœ¬è¾ƒæ—§ï¼Œç¼ºå°‘ <code>plotfig</code> æ‰€éœ€åŠŸèƒ½ï¼Œå»ºè®®é€šè¿‡ä»¥ä¸‹æ­¥éª¤å®‰è£…å…¶ GitHub ä»“åº“çš„æœ€æ–°ç‰ˆã€‚</p> <p>å¦‚æœæ‚¨æ— é¡»ç»˜åˆ¶ <code>brain surface</code> å›¾ï¼Œå¯ä»¥å¿½ç•¥æ­¤æ­¥éª¤ã€‚</p> <pre><code># å¸è½½æ—§ç‰ˆæœ¬\npip uninstall surfplot\n\n# å…‹éš†æºç å¹¶å®‰è£…\ngit clone --depth 1 https://github.com/danjgale/surfplot.git\ncd surfplot\npip install .\n\n# å®‰è£…å®Œæˆåï¼Œè¿”å›ä¸Šçº§ç›®å½•å¹¶åˆ é™¤æºç æ–‡ä»¶å¤¹\ncd ..\nrm -rf surfplot\n</code></pre>","path":["å®‰è£…"],"tags":[]},{"location":"installation/#_3","level":2,"title":"è´¡çŒ®æŒ‡å—","text":"<p>å¦‚æœæ‚¨å¸Œæœ›ä½“éªŒè¿™äº›åŠŸèƒ½æˆ–å‚ä¸ <code>plotfig</code> çš„å¼€å‘ï¼Œå¯ä»¥é€‰æ‹©ä»¥ å¼€å‘æ¨¡å¼ï¼ˆeditable modeï¼‰ å®‰è£…é¡¹ç›®ã€‚</p> <p>è¿™ç§å®‰è£…æ–¹å¼å…è®¸æ‚¨å¯¹æœ¬åœ°æºç çš„ä¿®æ”¹ç«‹å³ç”Ÿæ•ˆï¼Œéå¸¸é€‚åˆè°ƒè¯•ã€å¼€å‘å’Œè´¡çŒ®ä»£ç ã€‚</p> <p>æ¨èå…ˆ Fork ä»“åº“ï¼Œç„¶åå…‹éš†æ‚¨è‡ªå·±çš„ Fork å¹¶å®‰è£… <code>main</code> åˆ†æ”¯ï¼š</p> <pre><code>git clone https://github.com/USERNAME/plotfig.git\ncd plotfig\npip install -e .\n</code></pre> <p>æ¬¢è¿æäº¤ Issue æˆ– PRï¼</p> <p>æ— è®ºæ˜¯ Bug æŠ¥å‘Šã€åŠŸèƒ½å»ºè®®ã€è¿˜æ˜¯æ–‡æ¡£æ”¹è¿›ã€‚</p> <p>éƒ½éå¸¸æ¬¢è¿åœ¨ Issue ä¸­æå‡ºã€‚</p> <p>ä¹Ÿå¯ä»¥ç›´æ¥æäº¤ PRï¼Œä¸€èµ·å˜å¾—æ›´å¼º ğŸ’ªï¼</p>","path":["å®‰è£…"],"tags":[]},{"location":"api/","level":1,"title":"API","text":"","path":["API"],"tags":[]},{"location":"api/#plotfig.bar","level":2,"title":"bar","text":"<p>Functions:</p> Name Description <code>plot_multi_group_bar_figure</code> <p>ç»˜åˆ¶å¤šç»„æŸ±çŠ¶å›¾ï¼ŒåŒ…å«æ•£ç‚¹ã€è¯¯å·®æ¡ã€æ˜¾è‘—æ€§æ ‡æ³¨å’Œå›¾ä¾‹ç­‰ã€‚</p> <code>plot_one_group_bar_figure</code> <p>ç»˜åˆ¶å•ç»„æŸ±çŠ¶å›¾ï¼ŒåŒ…å«æ•£ç‚¹ã€è¯¯å·®æ¡å’Œç»Ÿè®¡æ˜¾è‘—æ€§æ ‡è®°ã€‚</p> <code>plot_one_group_violin_figure</code> <p>ç»˜åˆ¶å•ç»„å°æç´å›¾ï¼Œå¯é€‰æ•£ç‚¹å åŠ ã€æ¸å˜å¡«è‰²å’Œç»Ÿè®¡æ˜¾è‘—æ€§æ ‡æ³¨ã€‚</p>","path":["API"],"tags":[]},{"location":"api/#plotfig.bar.plot_multi_group_bar_figure","level":3,"title":"plot_multi_group_bar_figure","text":"<pre><code>plot_multi_group_bar_figure(data: DataType, ax: Axes | None = None, group_labels: list[str] | None = None, bar_labels: list[str] | None = None, bar_width: Num = 0.2, bar_gap: Num = 0.1, bar_color: list[str] | None = None, errorbar_type: str = 'sd', dots_color: str = 'gray', dots_size: int = 35, legend: bool = True, legend_position: tuple[Num, Num] = (1.2, 1), title_name: str = '', title_fontsize=12, title_pad=10, x_label_name: str = '', x_label_ha='center', x_label_fontsize=10, x_tick_fontsize=8, x_tick_rotation=0, y_label_name: str = '', y_label_fontsize=10, y_tick_fontsize=8, y_tick_rotation=0, statistic: bool = False, test_method: str = 'external', p_list: list[list[Num]] | None = None, line_color='0.5', asterisk_fontsize=10, asterisk_color='k', y_lim: list[Num] | tuple[Num, Num] | None = None, ax_bottom_is_0: bool = False, y_max_tick_is_1: bool = False, math_text: bool = True, one_decimal_place: bool = False, percentage: bool = False) -&gt; Axes\n</code></pre> <p>ç»˜åˆ¶å¤šç»„æŸ±çŠ¶å›¾ï¼ŒåŒ…å«æ•£ç‚¹ã€è¯¯å·®æ¡ã€æ˜¾è‘—æ€§æ ‡æ³¨å’Œå›¾ä¾‹ç­‰ã€‚</p> <p>Parameters:</p> Name Type Description Default <code>data</code> <code>DataType</code> <p>è¾“å…¥æ•°æ®ï¼Œå¯ä»¥æ˜¯ä¸‰ç»´numpyæ•°ç»„ã€äºŒç»´numpyæ•°ç»„åˆ—è¡¨æˆ–åµŒå¥—åºåˆ—</p> required <code>ax</code> <code>Axes | None</code> <p>matplotlibçš„åæ ‡è½´å¯¹è±¡ï¼Œå¦‚æœä¸ºNoneåˆ™ä½¿ç”¨å½“å‰åæ ‡è½´. Defaults to None.</p> <code>None</code> <code>group_labels</code> <code>list[str] | None</code> <p>ç»„æ ‡ç­¾åç§°åˆ—è¡¨. Defaults to None.</p> <code>None</code> <code>bar_labels</code> <code>list[str] | None</code> <p>æŸ±çŠ¶å›¾æ ‡ç­¾åç§°åˆ—è¡¨. Defaults to None.</p> <code>None</code> <code>bar_width</code> <code>Num</code> <p>æŸ±çŠ¶å›¾çš„å®½åº¦. Defaults to 0.2.</p> <code>0.2</code> <code>bar_gap</code> <code>Num</code> <p>æŸ±çŠ¶å›¾ä¹‹é—´çš„é—´éš”. Defaults to 0.1.</p> <code>0.1</code> <code>bar_color</code> <code>list[str] | None</code> <p>æŸ±çŠ¶å›¾çš„é¢œè‰²åˆ—è¡¨. Defaults to None.</p> <code>None</code> <code>errorbar_type</code> <code>str</code> <p>è¯¯å·®æ¡ç±»å‹ï¼Œå¯é€‰ \"sd\"(æ ‡å‡†å·®) æˆ– \"se\"(æ ‡å‡†è¯¯). Defaults to \"sd\".</p> <code>'sd'</code> <code>dots_color</code> <code>str</code> <p>æ•£ç‚¹çš„é¢œè‰². Defaults to \"gray\".</p> <code>'gray'</code> <code>dots_size</code> <code>int</code> <p>æ•£ç‚¹çš„å¤§å°. Defaults to 35.</p> <code>35</code> <code>legend</code> <code>bool</code> <p>æ˜¯å¦æ˜¾ç¤ºå›¾ä¾‹. Defaults to True.</p> <code>True</code> <code>legend_position</code> <code>tuple[Num, Num]</code> <p>å›¾ä¾‹ä½ç½®åæ ‡. Defaults to (1.2, 1).</p> <code>(1.2, 1)</code> <code>title_name</code> <code>str</code> <p>å›¾è¡¨æ ‡é¢˜. Defaults to \"\".</p> <code>''</code> <code>title_fontsize</code> <code>int</code> <p>æ ‡é¢˜å­—ä½“å¤§å°. Defaults to 12.</p> <code>12</code> <code>title_pad</code> <code>int</code> <p>æ ‡é¢˜ä¸å›¾è¡¨çš„é—´è·. Defaults to 10.</p> <code>10</code> <code>x_label_name</code> <code>str</code> <p>Xè½´æ ‡ç­¾åç§°. Defaults to \"\".</p> <code>''</code> <code>x_label_ha</code> <code>str</code> <p>Xè½´æ ‡ç­¾çš„æ°´å¹³å¯¹é½æ–¹å¼. Defaults to \"center\".</p> <code>'center'</code> <code>x_label_fontsize</code> <code>int</code> <p>Xè½´æ ‡ç­¾å­—ä½“å¤§å°. Defaults to 10.</p> <code>10</code> <code>x_tick_fontsize</code> <code>int</code> <p>Xè½´åˆ»åº¦å­—ä½“å¤§å°. Defaults to 8.</p> <code>8</code> <code>x_tick_rotation</code> <code>int</code> <p>Xè½´åˆ»åº¦æ—‹è½¬è§’åº¦. Defaults to 0.</p> <code>0</code> <code>y_label_name</code> <code>str</code> <p>Yè½´æ ‡ç­¾åç§°. Defaults to \"\".</p> <code>''</code> <code>y_label_fontsize</code> <code>int</code> <p>Yè½´æ ‡ç­¾å­—ä½“å¤§å°. Defaults to 10.</p> <code>10</code> <code>y_tick_fontsize</code> <code>int</code> <p>Yè½´åˆ»åº¦å­—ä½“å¤§å°. Defaults to 8.</p> <code>8</code> <code>y_tick_rotation</code> <code>int</code> <p>Yè½´åˆ»åº¦æ—‹è½¬è§’åº¦. Defaults to 0.</p> <code>0</code> <code>statistic</code> <code>bool</code> <p>æ˜¯å¦è¿›è¡Œç»Ÿè®¡æ˜¾è‘—æ€§åˆ†æ. Defaults to False.</p> <code>False</code> <code>test_method</code> <code>str</code> <p>ç»Ÿè®¡æ£€éªŒæ–¹æ³•ï¼Œç›®å‰ä»…æ”¯æŒ\"external\". Defaults to \"external\".</p> <code>'external'</code> <code>p_list</code> <code>list[list[Num]] | None</code> <p>é¢„è®¡ç®—çš„på€¼åˆ—è¡¨ï¼Œç”¨äºæ˜¾è‘—æ€§æ ‡è®°. Defaults to None.</p> <code>None</code> <code>line_color</code> <code>str</code> <p>æ˜¾è‘—æ€§æ ‡è®°çº¿çš„é¢œè‰². Defaults to \"0.5\".</p> <code>'0.5'</code> <code>asterisk_fontsize</code> <code>int</code> <p>æ˜¾è‘—æ€§æ˜Ÿå·çš„å­—ä½“å¤§å°. Defaults to 10.</p> <code>10</code> <code>asterisk_color</code> <code>str</code> <p>æ˜¾è‘—æ€§æ˜Ÿå·çš„é¢œè‰². Defaults to \"k\".</p> <code>'k'</code> <code>y_lim</code> <code>list[Num] | tuple[Num, Num] | None</code> <p>Yè½´çš„èŒƒå›´é™åˆ¶. Defaults to None.</p> <code>None</code> <code>ax_bottom_is_0</code> <code>bool</code> <p>Yè½´æ˜¯å¦ä»0å¼€å§‹. Defaults to False.</p> <code>False</code> <code>y_max_tick_is_1</code> <code>bool</code> <p>Yè½´æœ€å¤§åˆ»åº¦æ˜¯å¦é™åˆ¶ä¸º1. Defaults to False.</p> <code>False</code> <code>math_text</code> <code>bool</code> <p>æ˜¯å¦å°†Yè½´æ˜¾ç¤ºä¸ºç§‘å­¦è®¡æ•°æ³•æ ¼å¼. Defaults to True.</p> <code>True</code> <code>one_decimal_place</code> <code>bool</code> <p>Yè½´åˆ»åº¦æ˜¯å¦åªä¿ç•™ä¸€ä½å°æ•°. Defaults to False.</p> <code>False</code> <code>percentage</code> <code>bool</code> <p>æ˜¯å¦å°†Yè½´æ˜¾ç¤ºä¸ºç™¾åˆ†æ¯”æ ¼å¼. Defaults to False.</p> <code>False</code> <p>Raises:</p> Type Description <code>ValueError</code> <p>å½“dataæ•°æ®æ ¼å¼æ— æ•ˆæ—¶æŠ›å‡º</p> <code>ValueError</code> <p>å½“test_methodä¸æ˜¯\"external\"æ—¶æŠ›å‡ºï¼ˆå¤šç»„æ•°æ®ç»Ÿè®¡æµ‹è¯•æ–¹æ³•æš‚æ—¶ä»…æ”¯æŒexternalæ–¹æ³•ï¼‰</p> <p>Returns:</p> Name Type Description <code>Axes</code> <code>Axes</code> <p>è¿”å›matplotlibçš„åæ ‡è½´å¯¹è±¡</p> Source code in <code>src/plotfig/bar.py</code> <pre><code>def plot_multi_group_bar_figure(\n    data: DataType,\n    ax: Axes | None = None,\n    group_labels: list[str] | None = None,\n    bar_labels: list[str] | None = None,\n    bar_width: Num = 0.2,\n    bar_gap: Num = 0.1,\n    bar_color: list[str] | None = None,\n    errorbar_type: str = \"sd\",\n    dots_color: str = \"gray\",\n    dots_size: int = 35,\n    legend: bool = True,\n    legend_position: tuple[Num, Num] = (1.2, 1),\n    title_name: str = \"\",\n    title_fontsize=12,\n    title_pad=10,\n    x_label_name: str = \"\",\n    x_label_ha=\"center\",\n    x_label_fontsize=10,\n    x_tick_fontsize=8,\n    x_tick_rotation=0,\n    y_label_name: str = \"\",\n    y_label_fontsize=10,\n    y_tick_fontsize=8,\n    y_tick_rotation=0,\n    statistic: bool = False,\n    test_method: str = \"external\",\n    p_list: list[list[Num]] | None = None,\n    line_color=\"0.5\",\n    asterisk_fontsize=10,\n    asterisk_color=\"k\",\n    y_lim: list[Num] | tuple[Num, Num] | None = None,\n    ax_bottom_is_0: bool = False,\n    y_max_tick_is_1: bool = False,\n    math_text: bool = True,\n    one_decimal_place: bool = False,\n    percentage: bool = False,\n) -&gt; Axes:\n    \"\"\"ç»˜åˆ¶å¤šç»„æŸ±çŠ¶å›¾ï¼ŒåŒ…å«æ•£ç‚¹ã€è¯¯å·®æ¡ã€æ˜¾è‘—æ€§æ ‡æ³¨å’Œå›¾ä¾‹ç­‰ã€‚\n\n    Args:\n        data (DataType):\n            è¾“å…¥æ•°æ®ï¼Œå¯ä»¥æ˜¯ä¸‰ç»´numpyæ•°ç»„ã€äºŒç»´numpyæ•°ç»„åˆ—è¡¨æˆ–åµŒå¥—åºåˆ—\n        ax (Axes | None, optional):\n            matplotlibçš„åæ ‡è½´å¯¹è±¡ï¼Œå¦‚æœä¸ºNoneåˆ™ä½¿ç”¨å½“å‰åæ ‡è½´. Defaults to None.\n        group_labels (list[str] | None, optional):\n            ç»„æ ‡ç­¾åç§°åˆ—è¡¨. Defaults to None.\n        bar_labels (list[str] | None, optional):\n            æŸ±çŠ¶å›¾æ ‡ç­¾åç§°åˆ—è¡¨. Defaults to None.\n        bar_width (Num, optional):\n            æŸ±çŠ¶å›¾çš„å®½åº¦. Defaults to 0.2.\n        bar_gap (Num, optional):\n            æŸ±çŠ¶å›¾ä¹‹é—´çš„é—´éš”. Defaults to 0.1.\n        bar_color (list[str] | None, optional):\n            æŸ±çŠ¶å›¾çš„é¢œè‰²åˆ—è¡¨. Defaults to None.\n        errorbar_type (str, optional):\n            è¯¯å·®æ¡ç±»å‹ï¼Œå¯é€‰ \"sd\"(æ ‡å‡†å·®) æˆ– \"se\"(æ ‡å‡†è¯¯). Defaults to \"sd\".\n        dots_color (str, optional):\n            æ•£ç‚¹çš„é¢œè‰². Defaults to \"gray\".\n        dots_size (int, optional):\n            æ•£ç‚¹çš„å¤§å°. Defaults to 35.\n        legend (bool, optional):\n            æ˜¯å¦æ˜¾ç¤ºå›¾ä¾‹. Defaults to True.\n        legend_position (tuple[Num, Num], optional):\n            å›¾ä¾‹ä½ç½®åæ ‡. Defaults to (1.2, 1).\n        title_name (str, optional):\n            å›¾è¡¨æ ‡é¢˜. Defaults to \"\".\n        title_fontsize (int, optional):\n            æ ‡é¢˜å­—ä½“å¤§å°. Defaults to 12.\n        title_pad (int, optional):\n            æ ‡é¢˜ä¸å›¾è¡¨çš„é—´è·. Defaults to 10.\n        x_label_name (str, optional):\n            Xè½´æ ‡ç­¾åç§°. Defaults to \"\".\n        x_label_ha (str, optional):\n            Xè½´æ ‡ç­¾çš„æ°´å¹³å¯¹é½æ–¹å¼. Defaults to \"center\".\n        x_label_fontsize (int, optional):\n            Xè½´æ ‡ç­¾å­—ä½“å¤§å°. Defaults to 10.\n        x_tick_fontsize (int, optional):\n            Xè½´åˆ»åº¦å­—ä½“å¤§å°. Defaults to 8.\n        x_tick_rotation (int, optional):\n            Xè½´åˆ»åº¦æ—‹è½¬è§’åº¦. Defaults to 0.\n        y_label_name (str, optional):\n            Yè½´æ ‡ç­¾åç§°. Defaults to \"\".\n        y_label_fontsize (int, optional):\n            Yè½´æ ‡ç­¾å­—ä½“å¤§å°. Defaults to 10.\n        y_tick_fontsize (int, optional):\n            Yè½´åˆ»åº¦å­—ä½“å¤§å°. Defaults to 8.\n        y_tick_rotation (int, optional):\n            Yè½´åˆ»åº¦æ—‹è½¬è§’åº¦. Defaults to 0.\n        statistic (bool, optional):\n            æ˜¯å¦è¿›è¡Œç»Ÿè®¡æ˜¾è‘—æ€§åˆ†æ. Defaults to False.\n        test_method (str, optional):\n            ç»Ÿè®¡æ£€éªŒæ–¹æ³•ï¼Œç›®å‰ä»…æ”¯æŒ\"external\". Defaults to \"external\".\n        p_list (list[list[Num]] | None, optional):\n            é¢„è®¡ç®—çš„på€¼åˆ—è¡¨ï¼Œç”¨äºæ˜¾è‘—æ€§æ ‡è®°. Defaults to None.\n        line_color (str, optional):\n            æ˜¾è‘—æ€§æ ‡è®°çº¿çš„é¢œè‰². Defaults to \"0.5\".\n        asterisk_fontsize (int, optional):\n            æ˜¾è‘—æ€§æ˜Ÿå·çš„å­—ä½“å¤§å°. Defaults to 10.\n        asterisk_color (str, optional):\n            æ˜¾è‘—æ€§æ˜Ÿå·çš„é¢œè‰². Defaults to \"k\".\n        y_lim (list[Num] | tuple[Num, Num] | None, optional):\n            Yè½´çš„èŒƒå›´é™åˆ¶. Defaults to None.\n        ax_bottom_is_0 (bool, optional):\n            Yè½´æ˜¯å¦ä»0å¼€å§‹. Defaults to False.\n        y_max_tick_is_1 (bool, optional):\n            Yè½´æœ€å¤§åˆ»åº¦æ˜¯å¦é™åˆ¶ä¸º1. Defaults to False.\n        math_text (bool, optional):\n            æ˜¯å¦å°†Yè½´æ˜¾ç¤ºä¸ºç§‘å­¦è®¡æ•°æ³•æ ¼å¼. Defaults to True.\n        one_decimal_place (bool, optional):\n            Yè½´åˆ»åº¦æ˜¯å¦åªä¿ç•™ä¸€ä½å°æ•°. Defaults to False.\n        percentage (bool, optional):\n            æ˜¯å¦å°†Yè½´æ˜¾ç¤ºä¸ºç™¾åˆ†æ¯”æ ¼å¼. Defaults to False.\n\n    Raises:\n        ValueError: å½“dataæ•°æ®æ ¼å¼æ— æ•ˆæ—¶æŠ›å‡º\n        ValueError: å½“test_methodä¸æ˜¯\"external\"æ—¶æŠ›å‡ºï¼ˆå¤šç»„æ•°æ®ç»Ÿè®¡æµ‹è¯•æ–¹æ³•æš‚æ—¶ä»…æ”¯æŒexternalæ–¹æ³•ï¼‰\n\n    Returns:\n        Axes: è¿”å›matplotlibçš„åæ ‡è½´å¯¹è±¡\n    \"\"\"\n\n    ax = ax or plt.gca()\n    group_labels = group_labels or [f\"Group {i + 1}\" for i in range(len(data))]\n    n_groups = len(data)\n\n    # æŠŠæ‰€æœ‰å­åˆ—è¡¨å±•å¼€æˆä¸€ä¸ªå¤§åˆ—è¡¨\n    all_values = [x for sublist1 in data for sublist2 in sublist1 for x in sublist2]\n\n    x_positions_all = []\n    for index_group, group_data in enumerate(data):\n        n_bars = len(group_data)\n        if bar_labels is None:\n            bar_labels = [f\"Bar {i + 1}\" for i in range(n_bars)]\n        if bar_color is None:\n            bar_color = [\"gray\"] * n_bars\n\n        x_positions = (\n            np.arange(n_bars) * (bar_width + bar_gap)\n            + bar_width / 2\n            + index_group\n            - (n_bars * bar_width + (n_bars - 1) * bar_gap) / 2\n        )\n        x_positions_all.append(x_positions)\n\n        # è®¡ç®—å‡å€¼ã€æ ‡å‡†å·®ã€æ ‡å‡†è¯¯\n        means = [_compute_summary(group_data[i])[0] for i in range(n_bars)]\n        sds = [_compute_summary(group_data[i])[1] for i in range(n_bars)]\n        ses = [_compute_summary(group_data[i])[2] for i in range(n_bars)]\n        if errorbar_type == \"sd\":\n            error_values = sds\n        elif errorbar_type == \"se\":\n            error_values = ses\n        else:\n            raise ValueError(\"errorbar_type åªèƒ½æ˜¯ 'sd' æˆ–è€… 'se'\")\n        # ç»˜åˆ¶æŸ±å­\n        bars = ax.bar(\n            x_positions, means, width=bar_width, color=bar_color, alpha=1, edgecolor=\"k\"\n        )\n        ax.errorbar(\n            x_positions,\n            means,\n            error_values,\n            fmt=\"none\",\n            linewidth=1,\n            capsize=3,\n            color=\"black\",\n        )\n        # ç»˜åˆ¶æ•£ç‚¹\n        for index_bar, dot in enumerate(group_data):\n            # åˆ›å»ºéšæœºæ•°ç”Ÿæˆå™¨\n            rng = np.random.default_rng(seed=42)\n            dot_x_pos = rng.normal(\n                x_positions[index_bar], scale=bar_width / 7, size=len(dot)\n            )\n            _add_scatter(ax, dot_x_pos, dot, dots_color, dots_size=dots_size)\n    if legend:\n        ax.legend(bars, bar_labels, bbox_to_anchor=legend_position)\n\n    # ç¾åŒ–\n    ax.spines[[\"top\", \"right\"]].set_visible(False)\n    ax.set_title(\n        title_name,\n        fontsize=title_fontsize,\n        pad=title_pad,\n    )\n    # xè½´\n    ax.set_xlabel(x_label_name, fontsize=x_label_fontsize)\n    ax.set_xticks(np.arange(n_groups))\n    ax.set_xticklabels(\n        group_labels,\n        ha=x_label_ha,\n        rotation_mode=\"anchor\",\n        fontsize=x_tick_fontsize,\n        rotation=x_tick_rotation,\n    )\n    # yè½´\n    ax.tick_params(\n        axis=\"y\",\n        labelsize=y_tick_fontsize,\n        rotation=y_tick_rotation,\n    )\n    ax.set_ylabel(y_label_name, fontsize=y_label_fontsize)\n    _set_yaxis(\n        ax,\n        all_values,\n        y_lim,\n        ax_bottom_is_0,\n        y_max_tick_is_1,\n        math_text,\n        one_decimal_place,\n        percentage,\n    )\n\n    # æ·»åŠ ç»Ÿè®¡æ˜¾è‘—æ€§æ ‡è®°\n    if statistic:\n        for index_group, group_data in enumerate(data):\n            x_positions = x_positions_all[index_group]\n            comparisons = []\n            idx = 0\n            for i in range(len(group_data)):\n                for j in range(i + 1, len(group_data)):\n                    if test_method == \"external\":\n                        if p_list is None:\n                            raise ValueError(\"p_listä¸èƒ½ä¸ºç©º\")\n                        p = p_list[index_group][idx]\n                        idx += 1\n                    else:\n                        raise ValueError(\"å¤šç»„æ•°æ®ç»Ÿè®¡æµ‹è¯•æ–¹æ³•æš‚æ—¶ä»…æ”¯æŒ externalæ–¹æ³•\")\n                    if p &lt;= 0.05:\n                        comparisons.append((x_positions[i], x_positions[j], p))\n            y_max = ax.get_ylim()[1]\n            interval = (y_max - np.max(all_values)) / (len(comparisons) + 1)\n            _annotate_significance(\n                ax,\n                comparisons,\n                np.max(all_values),\n                interval,\n                line_color=line_color,\n                star_offset=interval / 5,\n                fontsize=asterisk_fontsize,\n                color=asterisk_color,\n            )\n\n    return ax\n</code></pre>","path":["API"],"tags":[]},{"location":"api/#plotfig.bar.plot_one_group_bar_figure","level":3,"title":"plot_one_group_bar_figure","text":"<pre><code>plot_one_group_bar_figure(data: ndarray | Sequence[Sequence[Num] | ndarray], ax: Axes | None = None, labels_name: list[str] | None = None, colors: list[str] | None = None, edgecolor: str | None = None, gradient_color: bool = False, colors_start: list[str] | None = None, colors_end: list[str] | None = None, show_dots: bool = True, dots_color: list[list[str]] | None = None, y_lim: list[Num] | tuple[Num, Num] | None = None, width: Num = 0.5, color_alpha: Num = 1, dots_size: Num = 35, errorbar_type: str = 'sd', title_name: str = '', title_fontsize: Num = 12, title_pad: Num = 10, x_label_name: str = '', x_label_ha: str = 'center', x_label_fontsize: Num = 10, x_tick_fontsize: Num = 8, x_tick_rotation: Num = 0, y_label_name: str = '', y_label_fontsize: Num = 10, y_tick_fontsize: Num = 8, y_tick_rotation: Num = 0, statistic: bool = False, test_method: list[str] = ['ttest_ind'], p_list: list[float] | None = None, popmean: Num = 0, statistical_line_color: str = '0.5', asterisk_fontsize: Num = 10, asterisk_color: str = 'k', ax_bottom_is_0: bool = False, y_max_tick_is_1: bool = False, math_text: bool = True, one_decimal_place: bool = False, percentage: bool = False) -&gt; Axes | None\n</code></pre> <p>ç»˜åˆ¶å•ç»„æŸ±çŠ¶å›¾ï¼ŒåŒ…å«æ•£ç‚¹ã€è¯¯å·®æ¡å’Œç»Ÿè®¡æ˜¾è‘—æ€§æ ‡è®°ã€‚</p> <p>Parameters:</p> Name Type Description Default <code>data</code> <code>ndarray | Sequence[Sequence[Num] | ndarray]</code> <p>è¾“å…¥æ•°æ®ï¼Œå¯ä»¥æ˜¯äºŒç»´numpyæ•°ç»„æˆ–åµŒå¥—åºåˆ—ï¼Œæ¯ä¸ªå­åºåˆ—ä»£è¡¨ä¸€ä¸ªæŸ±çŠ¶å›¾çš„æ•°æ®ç‚¹</p> required <code>ax</code> <code>Axes | None</code> <p>matplotlibçš„åæ ‡è½´å¯¹è±¡ï¼Œå¦‚æœä¸ºNoneåˆ™ä½¿ç”¨å½“å‰åæ ‡è½´. Defaults to None.</p> <code>None</code> <code>labels_name</code> <code>list[str] | None</code> <p>æŸ±çŠ¶å›¾çš„æ ‡ç­¾åç§°åˆ—è¡¨. Defaults to None.</p> <code>None</code> <code>colors</code> <code>list[str] | None</code> <p>æŸ±çŠ¶å›¾çš„é¢œè‰²åˆ—è¡¨. Defaults to None.</p> <code>None</code> <code>edgecolor</code> <code>str | None</code> <p>æŸ±çŠ¶å›¾è¾¹ç¼˜é¢œè‰². Defaults to None.</p> <code>None</code> <code>gradient_color</code> <code>bool</code> <p>æ˜¯å¦ä½¿ç”¨æ¸å˜é¢œè‰²å¡«å……æŸ±çŠ¶å›¾. Defaults to False.</p> <code>False</code> <code>colors_start</code> <code>list[str] | None</code> <p>æ¸å˜è‰²çš„èµ·å§‹é¢œè‰²åˆ—è¡¨. Defaults to None.</p> <code>None</code> <code>colors_end</code> <code>list[str] | None</code> <p>æ¸å˜è‰²çš„ç»“æŸé¢œè‰²åˆ—è¡¨. Defaults to None.</p> <code>None</code> <code>show_dots</code> <code>bool</code> <p>æ˜¯å¦æ˜¾ç¤ºæ•£ç‚¹. Defaults to True.</p> <code>True</code> <code>dots_color</code> <code>list[list[str]] | None</code> <p>æ•£ç‚¹çš„é¢œè‰²åˆ—è¡¨. Defaults to None.</p> <code>None</code> <code>y_lim</code> <code>list[Num] | tuple[Num, Num] | None</code> <p>Yè½´çš„èŒƒå›´é™åˆ¶. Defaults to None.</p> <code>None</code> <code>width</code> <code>Num</code> <p>æŸ±çŠ¶å›¾çš„å®½åº¦. Defaults to 0.5.</p> <code>0.5</code> <code>color_alpha</code> <code>Num</code> <p>æŸ±çŠ¶å›¾é¢œè‰²çš„é€æ˜åº¦. Defaults to 1.</p> <code>1</code> <code>dots_size</code> <code>Num</code> <p>æ•£ç‚¹çš„å¤§å°. Defaults to 35.</p> <code>35</code> <code>errorbar_type</code> <code>str</code> <p>è¯¯å·®æ¡ç±»å‹ï¼Œå¯é€‰ \"sd\"(æ ‡å‡†å·®) æˆ– \"se\"(æ ‡å‡†è¯¯). Defaults to \"sd\".</p> <code>'sd'</code> <code>title_name</code> <code>str</code> <p>å›¾è¡¨æ ‡é¢˜. Defaults to \"\".</p> <code>''</code> <code>title_fontsize</code> <code>Num</code> <p>æ ‡é¢˜å­—ä½“å¤§å°. Defaults to 12.</p> <code>12</code> <code>title_pad</code> <code>Num</code> <p>æ ‡é¢˜ä¸å›¾è¡¨çš„é—´è·. Defaults to 10.</p> <code>10</code> <code>x_label_name</code> <code>str</code> <p>Xè½´æ ‡ç­¾åç§°. Defaults to \"\".</p> <code>''</code> <code>x_label_ha</code> <code>str</code> <p>Xè½´æ ‡ç­¾çš„æ°´å¹³å¯¹é½æ–¹å¼. Defaults to \"center\".</p> <code>'center'</code> <code>x_label_fontsize</code> <code>Num</code> <p>Xè½´æ ‡ç­¾å­—ä½“å¤§å°. Defaults to 10.</p> <code>10</code> <code>x_tick_fontsize</code> <code>Num</code> <p>Xè½´åˆ»åº¦å­—ä½“å¤§å°. Defaults to 8.</p> <code>8</code> <code>x_tick_rotation</code> <code>Num</code> <p>Xè½´åˆ»åº¦æ—‹è½¬è§’åº¦. Defaults to 0.</p> <code>0</code> <code>y_label_name</code> <code>str</code> <p>Yè½´æ ‡ç­¾åç§°. Defaults to \"\".</p> <code>''</code> <code>y_label_fontsize</code> <code>Num</code> <p>Yè½´æ ‡ç­¾å­—ä½“å¤§å°. Defaults to 10.</p> <code>10</code> <code>y_tick_fontsize</code> <code>Num</code> <p>Yè½´åˆ»åº¦å­—ä½“å¤§å°. Defaults to 8.</p> <code>8</code> <code>y_tick_rotation</code> <code>Num</code> <p>Yè½´åˆ»åº¦æ—‹è½¬è§’åº¦. Defaults to 0.</p> <code>0</code> <code>statistic</code> <code>bool</code> <p>æ˜¯å¦è¿›è¡Œç»Ÿè®¡æ˜¾è‘—æ€§åˆ†æ. Defaults to False.</p> <code>False</code> <code>test_method</code> <code>list[str]</code> <p>ç»Ÿè®¡æ£€éªŒæ–¹æ³•åˆ—è¡¨ï¼ŒåŒ…æ‹¬ 1. <code>ttest_ind</code>, 2. <code>ttest_rel</code>, 3. <code>ttest_1samp</code>, 4. <code>mannwhitneyu</code>, 5. <code>external</code>. Defaults to [\"ttest_ind\"].</p> <code>['ttest_ind']</code> <code>p_list</code> <code>list[float] | None</code> <p>é¢„è®¡ç®—çš„på€¼åˆ—è¡¨ï¼Œç”¨äºæ˜¾è‘—æ€§æ ‡è®°. Defaults to None.</p> <code>None</code> <code>popmean</code> <code>Num</code> <p>å•æ ·æœ¬tæ£€éªŒçš„å‡è®¾å‡å€¼. Defaults to 0.</p> <code>0</code> <code>statistical_line_color</code> <code>str</code> <p>æ˜¾è‘—æ€§æ ‡è®°çº¿çš„é¢œè‰². Defaults to \"0.5\".</p> <code>'0.5'</code> <code>asterisk_fontsize</code> <code>Num</code> <p>æ˜¾è‘—æ€§æ˜Ÿå·çš„å­—ä½“å¤§å°. Defaults to 10.</p> <code>10</code> <code>asterisk_color</code> <code>str</code> <p>æ˜¾è‘—æ€§æ˜Ÿå·çš„é¢œè‰². Defaults to \"k\".</p> <code>'k'</code> <code>ax_bottom_is_0</code> <code>bool</code> <p>Yè½´æ˜¯å¦ä»0å¼€å§‹. Defaults to False.</p> <code>False</code> <code>y_max_tick_is_1</code> <code>bool</code> <p>Yè½´æœ€å¤§åˆ»åº¦æ˜¯å¦é™åˆ¶ä¸º1. Defaults to False.</p> <code>False</code> <code>math_text</code> <code>bool</code> <p>æ˜¯å¦å°†Yè½´æ˜¾ç¤ºä¸ºç§‘å­¦è®¡æ•°æ³•æ ¼å¼. Defaults to True.</p> <code>True</code> <code>one_decimal_place</code> <code>bool</code> <p>Yè½´åˆ»åº¦æ˜¯å¦åªä¿ç•™ä¸€ä½å°æ•°. Defaults to False.</p> <code>False</code> <code>percentage</code> <code>bool</code> <p>æ˜¯å¦å°†Yè½´æ˜¾ç¤ºä¸ºç™¾åˆ†æ¯”æ ¼å¼. Defaults to False.</p> <code>False</code> <p>Raises:</p> Type Description <code>ValueError</code> <p>å½“dataæ•°æ®æ ¼å¼æ— æ•ˆæ—¶æŠ›å‡º</p> <code>ValueError</code> <p>å½“errorbar_typeä¸æ˜¯\"sd\"æˆ–\"se\"æ—¶æŠ›å‡º</p> <p>Returns:</p> Type Description <code>Axes | None</code> <p>Axes | None: è¿”å›matplotlibçš„åæ ‡è½´å¯¹è±¡æˆ–None</p> Source code in <code>src/plotfig/bar.py</code> <pre><code>def plot_one_group_bar_figure(\n    data: np.ndarray | Sequence[Sequence[Num] | np.ndarray],\n    ax: Axes | None = None,\n    labels_name: list[str] | None = None,\n    colors: list[str] | None = None,\n    edgecolor: str | None = None,\n    gradient_color: bool = False,\n    colors_start: list[str] | None = None,\n    colors_end: list[str] | None = None,\n    show_dots: bool = True,\n    dots_color: list[list[str]] | None = None,\n    y_lim: list[Num] | tuple[Num, Num] | None = None,\n    width: Num = 0.5,\n    color_alpha: Num = 1,\n    dots_size: Num = 35,\n    errorbar_type: str = \"sd\",\n    title_name: str = \"\",\n    title_fontsize: Num = 12,\n    title_pad: Num = 10,\n    x_label_name: str = \"\",\n    x_label_ha: str = \"center\",\n    x_label_fontsize: Num = 10,\n    x_tick_fontsize: Num = 8,\n    x_tick_rotation: Num = 0,\n    y_label_name: str = \"\",\n    y_label_fontsize: Num = 10,\n    y_tick_fontsize: Num = 8,\n    y_tick_rotation: Num = 0,\n    statistic: bool = False,\n    test_method: list[str] = [\"ttest_ind\"],\n    p_list: list[float] | None = None,\n    popmean: Num = 0,\n    statistical_line_color: str = \"0.5\",\n    asterisk_fontsize: Num = 10,\n    asterisk_color: str = \"k\",\n    ax_bottom_is_0: bool = False,\n    y_max_tick_is_1: bool = False,\n    math_text: bool = True,\n    one_decimal_place: bool = False,\n    percentage: bool = False,\n) -&gt; Axes | None:\n    \"\"\"ç»˜åˆ¶å•ç»„æŸ±çŠ¶å›¾ï¼ŒåŒ…å«æ•£ç‚¹ã€è¯¯å·®æ¡å’Œç»Ÿè®¡æ˜¾è‘—æ€§æ ‡è®°ã€‚\n\n    Args:\n        data (np.ndarray | Sequence[Sequence[Num] | np.ndarray]):\n            è¾“å…¥æ•°æ®ï¼Œå¯ä»¥æ˜¯äºŒç»´numpyæ•°ç»„æˆ–åµŒå¥—åºåˆ—ï¼Œæ¯ä¸ªå­åºåˆ—ä»£è¡¨ä¸€ä¸ªæŸ±çŠ¶å›¾çš„æ•°æ®ç‚¹\n        ax (Axes | None, optional):\n            matplotlibçš„åæ ‡è½´å¯¹è±¡ï¼Œå¦‚æœä¸ºNoneåˆ™ä½¿ç”¨å½“å‰åæ ‡è½´. Defaults to None.\n        labels_name (list[str] | None, optional):\n            æŸ±çŠ¶å›¾çš„æ ‡ç­¾åç§°åˆ—è¡¨. Defaults to None.\n        colors (list[str] | None, optional):\n            æŸ±çŠ¶å›¾çš„é¢œè‰²åˆ—è¡¨. Defaults to None.\n        edgecolor (str | None, optional):\n            æŸ±çŠ¶å›¾è¾¹ç¼˜é¢œè‰². Defaults to None.\n        gradient_color (bool, optional):\n            æ˜¯å¦ä½¿ç”¨æ¸å˜é¢œè‰²å¡«å……æŸ±çŠ¶å›¾. Defaults to False.\n        colors_start (list[str] | None, optional):\n            æ¸å˜è‰²çš„èµ·å§‹é¢œè‰²åˆ—è¡¨. Defaults to None.\n        colors_end (list[str] | None, optional):\n            æ¸å˜è‰²çš„ç»“æŸé¢œè‰²åˆ—è¡¨. Defaults to None.\n        show_dots (bool, optional):\n            æ˜¯å¦æ˜¾ç¤ºæ•£ç‚¹. Defaults to True.\n        dots_color (list[list[str]] | None, optional):\n            æ•£ç‚¹çš„é¢œè‰²åˆ—è¡¨. Defaults to None.\n        y_lim (list[Num] | tuple[Num, Num] | None, optional):\n            Yè½´çš„èŒƒå›´é™åˆ¶. Defaults to None.\n        width (Num, optional):\n            æŸ±çŠ¶å›¾çš„å®½åº¦. Defaults to 0.5.\n        color_alpha (Num, optional):\n            æŸ±çŠ¶å›¾é¢œè‰²çš„é€æ˜åº¦. Defaults to 1.\n        dots_size (Num, optional):\n            æ•£ç‚¹çš„å¤§å°. Defaults to 35.\n        errorbar_type (str, optional):\n            è¯¯å·®æ¡ç±»å‹ï¼Œå¯é€‰ \"sd\"(æ ‡å‡†å·®) æˆ– \"se\"(æ ‡å‡†è¯¯). Defaults to \"sd\".\n        title_name (str, optional):\n            å›¾è¡¨æ ‡é¢˜. Defaults to \"\".\n        title_fontsize (Num, optional):\n            æ ‡é¢˜å­—ä½“å¤§å°. Defaults to 12.\n        title_pad (Num, optional):\n            æ ‡é¢˜ä¸å›¾è¡¨çš„é—´è·. Defaults to 10.\n        x_label_name (str, optional):\n            Xè½´æ ‡ç­¾åç§°. Defaults to \"\".\n        x_label_ha (str, optional):\n            Xè½´æ ‡ç­¾çš„æ°´å¹³å¯¹é½æ–¹å¼. Defaults to \"center\".\n        x_label_fontsize (Num, optional):\n            Xè½´æ ‡ç­¾å­—ä½“å¤§å°. Defaults to 10.\n        x_tick_fontsize (Num, optional):\n            Xè½´åˆ»åº¦å­—ä½“å¤§å°. Defaults to 8.\n        x_tick_rotation (Num, optional):\n            Xè½´åˆ»åº¦æ—‹è½¬è§’åº¦. Defaults to 0.\n        y_label_name (str, optional):\n            Yè½´æ ‡ç­¾åç§°. Defaults to \"\".\n        y_label_fontsize (Num, optional):\n            Yè½´æ ‡ç­¾å­—ä½“å¤§å°. Defaults to 10.\n        y_tick_fontsize (Num, optional):\n            Yè½´åˆ»åº¦å­—ä½“å¤§å°. Defaults to 8.\n        y_tick_rotation (Num, optional):\n            Yè½´åˆ»åº¦æ—‹è½¬è§’åº¦. Defaults to 0.\n        statistic (bool, optional):\n            æ˜¯å¦è¿›è¡Œç»Ÿè®¡æ˜¾è‘—æ€§åˆ†æ. Defaults to False.\n        test_method (list[str], optional):\n            ç»Ÿè®¡æ£€éªŒæ–¹æ³•åˆ—è¡¨ï¼ŒåŒ…æ‹¬\n            1. `ttest_ind`,\n            2. `ttest_rel`,\n            3. `ttest_1samp`,\n            4. `mannwhitneyu`,\n            5. `external`.\n            Defaults to [\"ttest_ind\"].\n        p_list (list[float] | None, optional):\n            é¢„è®¡ç®—çš„på€¼åˆ—è¡¨ï¼Œç”¨äºæ˜¾è‘—æ€§æ ‡è®°. Defaults to None.\n        popmean (Num, optional):\n            å•æ ·æœ¬tæ£€éªŒçš„å‡è®¾å‡å€¼. Defaults to 0.\n        statistical_line_color (str, optional):\n            æ˜¾è‘—æ€§æ ‡è®°çº¿çš„é¢œè‰². Defaults to \"0.5\".\n        asterisk_fontsize (Num, optional):\n            æ˜¾è‘—æ€§æ˜Ÿå·çš„å­—ä½“å¤§å°. Defaults to 10.\n        asterisk_color (str, optional):\n            æ˜¾è‘—æ€§æ˜Ÿå·çš„é¢œè‰². Defaults to \"k\".\n        ax_bottom_is_0 (bool, optional):\n            Yè½´æ˜¯å¦ä»0å¼€å§‹. Defaults to False.\n        y_max_tick_is_1 (bool, optional):\n            Yè½´æœ€å¤§åˆ»åº¦æ˜¯å¦é™åˆ¶ä¸º1. Defaults to False.\n        math_text (bool, optional):\n            æ˜¯å¦å°†Yè½´æ˜¾ç¤ºä¸ºç§‘å­¦è®¡æ•°æ³•æ ¼å¼. Defaults to True.\n        one_decimal_place (bool, optional):\n            Yè½´åˆ»åº¦æ˜¯å¦åªä¿ç•™ä¸€ä½å°æ•°. Defaults to False.\n        percentage (bool, optional):\n            æ˜¯å¦å°†Yè½´æ˜¾ç¤ºä¸ºç™¾åˆ†æ¯”æ ¼å¼. Defaults to False.\n\n    Raises:\n        ValueError: å½“dataæ•°æ®æ ¼å¼æ— æ•ˆæ—¶æŠ›å‡º\n        ValueError: å½“errorbar_typeä¸æ˜¯\"sd\"æˆ–\"se\"æ—¶æŠ›å‡º\n\n    Returns:\n        Axes | None: è¿”å›matplotlibçš„åæ ‡è½´å¯¹è±¡æˆ–None\n    \"\"\"\n    # å¤„ç†Noneå€¼\n    if not _is_valid_data(data):\n        raise ValueError(\"æ— æ•ˆçš„ data\")\n    ax = ax or plt.gca()\n    labels_name = labels_name or [str(i) for i in range(len(data))]\n    colors = colors or [\"gray\"] * len(data)\n    # ç»Ÿä¸€å‚æ•°å‹\n    width = float(width)\n    color_alpha = float(color_alpha)\n    dots_size = float(dots_size)\n    title_fontsize = float(title_fontsize)\n    title_pad = float(title_pad)\n    x_label_fontsize = float(x_label_fontsize)\n    x_tick_fontsize = float(x_tick_fontsize)\n    x_tick_rotation = float(x_tick_rotation)\n    y_label_fontsize = float(y_label_fontsize)\n    y_tick_fontsize = float(y_tick_fontsize)\n    y_tick_rotation = float(y_tick_rotation)\n    popmean = float(popmean)\n    asterisk_fontsize = float(asterisk_fontsize)\n\n    x_positions = np.arange(len(labels_name))\n    means, sds, ses = [], [], []\n    scatter_positions = []\n    for i, d in enumerate(data):\n        mean, sd, se = _compute_summary(d)\n        means.append(mean)\n        sds.append(sd)\n        ses.append(se)\n        # åˆ›å»ºéšæœºæ•°ç”Ÿæˆå™¨\n        rng = np.random.default_rng(seed=42)\n        scatter_x = rng.normal(i, 0.1, len(d))\n        scatter_positions.append(scatter_x)\n    if errorbar_type == \"sd\":\n        error_values = sds\n    elif errorbar_type == \"se\":\n        error_values = ses\n    else:\n        raise ValueError(\"errorbar_type åªèƒ½æ˜¯ 'sd' æˆ–è€… 'se'\")\n\n    # ç»˜åˆ¶æŸ±å­\n    if gradient_color:\n        if colors_start is None:  # é»˜è®¤é¢œè‰²\n            colors_start = [\"#e38a48\"] * len(x_positions)  # å·¦è¾¹é¢œè‰²\n        if colors_end is None:  # é»˜è®¤é¢œè‰²\n            colors_end = [\"#4573a5\"] * len(x_positions)  # å³è¾¹é¢œè‰²\n        for x, h, c1, c2 in zip(x_positions, means, colors_start, colors_end):\n            # ç”Ÿæˆçº¿æ€§æ¸å˜ colormap\n            cmap = LinearSegmentedColormap.from_list(\"grad_cmap\", [c1, \"white\", c2])\n            gradient = np.linspace(0, 1, 100).reshape(1, -1)  # æ¨ªå‘æ¸å˜\n            # è®¡ç®—æ¸å˜çŸ©å½¢ä½ç½®ï¼šè·Ÿbarå®Œå…¨å¯¹é½\n            extent = (float(x - width / 2), float(x + width / 2), 0, h)\n            # å åŠ æ¸å˜çŸ©å½¢ï¼ˆimshowï¼‰\n            ax.imshow(gradient, aspect=\"auto\", cmap=cmap, extent=extent, zorder=0)\n    else:\n        ax.bar(\n            x_positions,\n            means,\n            width=width,\n            color=colors,\n            alpha=color_alpha,\n            edgecolor=edgecolor,\n        )\n\n    ax.errorbar(\n        x_positions,\n        means,\n        error_values,\n        fmt=\"none\",\n        linewidth=1,\n        capsize=3,\n        color=\"black\",\n    )\n\n    # ç»˜åˆ¶æ•£ç‚¹\n    if show_dots:\n        for i, d in enumerate(data):\n            if dots_color is None:\n                _add_scatter(ax, scatter_positions[i], d, [\"gray\"] * len(d), dots_size)\n            else:\n                _add_scatter(ax, scatter_positions[i], d, dots_color[i], dots_size)\n\n    # ç¾åŒ–\n    ax.spines[[\"top\", \"right\"]].set_visible(False)\n    ax.set_title(\n        title_name,\n        fontsize=title_fontsize,\n        pad=float(title_pad),\n    )\n    # xè½´\n    ax.set_xlim(np.min(x_positions) - 0.5, np.max(x_positions) + 0.5)\n    ax.set_xlabel(x_label_name, fontsize=x_label_fontsize)\n    ax.set_xticks(x_positions)\n    ax.set_xticklabels(\n        labels_name,\n        fontsize=x_tick_fontsize,\n        rotation=x_tick_rotation,\n        ha=x_label_ha,\n        rotation_mode=\"anchor\",\n    )\n    # yè½´\n    ax.tick_params(\n        axis=\"y\",\n        labelsize=y_tick_fontsize,\n        rotation=y_tick_rotation,\n    )\n    ax.set_ylabel(y_label_name, fontsize=y_label_fontsize)\n    all_values = np.concatenate([np.asarray(x) for x in data]).ravel()\n    _set_yaxis(\n        ax,\n        all_values,\n        y_lim=y_lim,\n        ax_bottom_is_0=ax_bottom_is_0,\n        y_max_tick_is_1=y_max_tick_is_1,\n        math_text=math_text,\n        one_decimal_place=one_decimal_place,\n        percentage=percentage,\n    )\n\n    # æ·»åŠ ç»Ÿè®¡æ˜¾è‘—æ€§æ ‡è®°\n    if statistic:\n        _statistics(\n            data,\n            test_method,\n            p_list,\n            popmean,\n            ax,\n            all_values,\n            statistical_line_color,\n            asterisk_fontsize,\n            asterisk_color,\n        )\n    return ax\n</code></pre>","path":["API"],"tags":[]},{"location":"api/#plotfig.bar.plot_one_group_violin_figure","level":3,"title":"plot_one_group_violin_figure","text":"<pre><code>plot_one_group_violin_figure(data: Sequence[list[float] | NDArray[float64]], ax: Axes | None = None, labels_name: list[str] | None = None, width: Num = 0.8, colors: list[str] | None = None, color_alpha: Num = 1, gradient_color: bool = False, colors_start: list[str] | None = None, colors_end: list[str] | None = None, show_dots: bool = False, dots_size: Num = 35, title_name: str = '', title_fontsize: Num = 12, title_pad: Num = 10, x_label_name: str = '', x_label_ha: str = 'center', x_label_fontsize: Num = 10, x_tick_fontsize: Num = 8, x_tick_rotation: Num = 0, y_label_name: str = '', y_label_fontsize: Num = 10, y_tick_fontsize: Num = 8, y_tick_rotation: Num = 0, statistic: bool = False, test_method: list[str] = ['ttest_ind'], popmean: Num = 0, p_list: list[float] | None = None, statistical_line_color: str = '0.5', asterisk_fontsize: Num = 10, asterisk_color: str = 'k', y_lim: list[Num] | tuple[Num, Num] | None = None, ax_bottom_is_0: bool = False, y_max_tick_is_1: bool = False, math_text: bool = True, one_decimal_place: bool = False, percentage: bool = False) -&gt; Axes | None\n</code></pre> <p>ç»˜åˆ¶å•ç»„å°æç´å›¾ï¼Œå¯é€‰æ•£ç‚¹å åŠ ã€æ¸å˜å¡«è‰²å’Œç»Ÿè®¡æ˜¾è‘—æ€§æ ‡æ³¨ã€‚</p> <p>Parameters:</p> Name Type Description Default <code>data</code> <code>Sequence[list[float] | NDArray[float64]]</code> <p>è¾“å…¥æ•°æ®ï¼Œå¯ä»¥æ˜¯äºŒç»´numpyæ•°ç»„æˆ–åµŒå¥—åºåˆ—ï¼Œæ¯ä¸ªå­åºåˆ—ä»£è¡¨ä¸€ä¸ªå°æç´çš„æ•°æ®ç‚¹</p> required <code>ax</code> <code>Axes | None</code> <p>matplotlibçš„åæ ‡è½´å¯¹è±¡ï¼Œå¦‚æœä¸ºNoneåˆ™ä½¿ç”¨å½“å‰åæ ‡è½´. Defaults to None.</p> <code>None</code> <code>labels_name</code> <code>list[str] | None</code> <p>å°æç´å›¾çš„æ ‡ç­¾åç§°åˆ—è¡¨. Defaults to None.</p> <code>None</code> <code>width</code> <code>Num</code> <p>å°æç´å›¾çš„å®½åº¦. Defaults to 0.8.</p> <code>0.8</code> <code>colors</code> <code>list[str] | None</code> <p>å°æç´å›¾çš„é¢œè‰²åˆ—è¡¨. Defaults to None.</p> <code>None</code> <code>color_alpha</code> <code>Num</code> <p>å°æç´å›¾é¢œè‰²çš„é€æ˜åº¦. Defaults to 1.</p> <code>1</code> <code>gradient_color</code> <code>bool</code> <p>æ˜¯å¦ä½¿ç”¨æ¸å˜é¢œè‰²å¡«å……å°æç´å›¾. Defaults to False.</p> <code>False</code> <code>colors_start</code> <code>list[str] | None</code> <p>æ¸å˜è‰²çš„èµ·å§‹é¢œè‰²åˆ—è¡¨. Defaults to None.</p> <code>None</code> <code>colors_end</code> <code>list[str] | None</code> <p>æ¸å˜è‰²çš„ç»“æŸé¢œè‰²åˆ—è¡¨. Defaults to None.</p> <code>None</code> <code>show_dots</code> <code>bool</code> <p>æ˜¯å¦æ˜¾ç¤ºæ•£ç‚¹. Defaults to False.</p> <code>False</code> <code>dots_size</code> <code>Num</code> <p>æ•£ç‚¹çš„å¤§å°. Defaults to 35.</p> <code>35</code> <code>title_name</code> <code>str</code> <p>å›¾è¡¨æ ‡é¢˜. Defaults to \"\".</p> <code>''</code> <code>title_fontsize</code> <code>Num</code> <p>æ ‡é¢˜å­—ä½“å¤§å°. Defaults to 12.</p> <code>12</code> <code>title_pad</code> <code>Num</code> <p>æ ‡é¢˜ä¸å›¾è¡¨çš„é—´è·. Defaults to 10.</p> <code>10</code> <code>x_label_name</code> <code>str</code> <p>Xè½´æ ‡ç­¾åç§°. Defaults to \"\".</p> <code>''</code> <code>x_label_ha</code> <code>str</code> <p>Xè½´æ ‡ç­¾çš„æ°´å¹³å¯¹é½æ–¹å¼. Defaults to \"center\".</p> <code>'center'</code> <code>x_label_fontsize</code> <code>Num</code> <p>Xè½´æ ‡ç­¾å­—ä½“å¤§å°. Defaults to 10.</p> <code>10</code> <code>x_tick_fontsize</code> <code>Num</code> <p>Xè½´åˆ»åº¦å­—ä½“å¤§å°. Defaults to 8.</p> <code>8</code> <code>x_tick_rotation</code> <code>Num</code> <p>Xè½´åˆ»åº¦æ—‹è½¬è§’åº¦. Defaults to 0.</p> <code>0</code> <code>y_label_name</code> <code>str</code> <p>Yè½´æ ‡ç­¾åç§°. Defaults to \"\".</p> <code>''</code> <code>y_label_fontsize</code> <code>Num</code> <p>Yè½´æ ‡ç­¾å­—ä½“å¤§å°. Defaults to 10.</p> <code>10</code> <code>y_tick_fontsize</code> <code>Num</code> <p>Yè½´åˆ»åº¦å­—ä½“å¤§å°. Defaults to 8.</p> <code>8</code> <code>y_tick_rotation</code> <code>Num</code> <p>Yè½´åˆ»åº¦æ—‹è½¬è§’åº¦. Defaults to 0.</p> <code>0</code> <code>statistic</code> <code>bool</code> <p>æ˜¯å¦è¿›è¡Œç»Ÿè®¡æ˜¾è‘—æ€§åˆ†æ. Defaults to False.</p> <code>False</code> <code>test_method</code> <code>list[str]</code> <p>ç»Ÿè®¡æ£€éªŒæ–¹æ³•åˆ—è¡¨. Defaults to [\"ttest_ind\"].</p> <code>['ttest_ind']</code> <code>popmean</code> <code>Num</code> <p>å•æ ·æœ¬tæ£€éªŒçš„å‡è®¾å‡å€¼. Defaults to 0.</p> <code>0</code> <code>p_list</code> <code>list[float] | None</code> <p>é¢„è®¡ç®—çš„på€¼åˆ—è¡¨ï¼Œç”¨äºæ˜¾è‘—æ€§æ ‡è®°. Defaults to None.</p> <code>None</code> <code>statistical_line_color</code> <code>str</code> <p>æ˜¾è‘—æ€§æ ‡è®°çº¿çš„é¢œè‰². Defaults to \"0.5\".</p> <code>'0.5'</code> <code>asterisk_fontsize</code> <code>Num</code> <p>æ˜¾è‘—æ€§æ˜Ÿå·çš„å­—ä½“å¤§å°. Defaults to 10.</p> <code>10</code> <code>asterisk_color</code> <code>str</code> <p>æ˜¾è‘—æ€§æ˜Ÿå·çš„é¢œè‰². Defaults to \"k\".</p> <code>'k'</code> <code>y_lim</code> <code>list[Num] | tuple[Num, Num] | None</code> <p>Yè½´çš„èŒƒå›´é™åˆ¶. Defaults to None.</p> <code>None</code> <code>ax_bottom_is_0</code> <code>bool</code> <p>Yè½´æ˜¯å¦ä»0å¼€å§‹. Defaults to False.</p> <code>False</code> <code>y_max_tick_is_1</code> <code>bool</code> <p>Yè½´æœ€å¤§åˆ»åº¦æ˜¯å¦é™åˆ¶ä¸º1. Defaults to False.</p> <code>False</code> <code>math_text</code> <code>bool</code> <p>æ˜¯å¦å°†Yè½´æ˜¾ç¤ºä¸ºç§‘å­¦è®¡æ•°æ³•æ ¼å¼. Defaults to True.</p> <code>True</code> <code>one_decimal_place</code> <code>bool</code> <p>Yè½´åˆ»åº¦æ˜¯å¦åªä¿ç•™ä¸€ä½å°æ•°. Defaults to False.</p> <code>False</code> <code>percentage</code> <code>bool</code> <p>æ˜¯å¦å°†Yè½´æ˜¾ç¤ºä¸ºç™¾åˆ†æ¯”æ ¼å¼. Defaults to False.</p> <code>False</code> <p>Raises:</p> Type Description <code>ValueError</code> <p>å½“dataæ•°æ®æ ¼å¼æ— æ•ˆæ—¶æŠ›å‡º</p> <p>Returns:</p> Type Description <code>Axes | None</code> <p>Axes | None: è¿”å›matplotlibçš„åæ ‡è½´å¯¹è±¡æˆ–None</p> Source code in <code>src/plotfig/bar.py</code> <pre><code>def plot_one_group_violin_figure(\n    data: Sequence[list[float] | NDArray[np.float64]],\n    ax: Axes | None = None,\n    labels_name: list[str] | None = None,\n    width: Num = 0.8,\n    colors: list[str] | None = None,\n    color_alpha: Num = 1,\n    gradient_color: bool = False,\n    colors_start: list[str] | None = None,\n    colors_end: list[str] | None = None,\n    show_dots: bool = False,\n    dots_size: Num = 35,\n    title_name: str = \"\",\n    title_fontsize: Num = 12,\n    title_pad: Num = 10,\n    x_label_name: str = \"\",\n    x_label_ha: str = \"center\",\n    x_label_fontsize: Num = 10,\n    x_tick_fontsize: Num = 8,\n    x_tick_rotation: Num = 0,\n    y_label_name: str = \"\",\n    y_label_fontsize: Num = 10,\n    y_tick_fontsize: Num = 8,\n    y_tick_rotation: Num = 0,\n    statistic: bool = False,\n    test_method: list[str] = [\"ttest_ind\"],\n    popmean: Num = 0,\n    p_list: list[float] | None = None,\n    statistical_line_color: str = \"0.5\",\n    asterisk_fontsize: Num = 10,\n    asterisk_color: str = \"k\",\n    y_lim: list[Num] | tuple[Num, Num] | None = None,\n    ax_bottom_is_0: bool = False,\n    y_max_tick_is_1: bool = False,\n    math_text: bool = True,\n    one_decimal_place: bool = False,\n    percentage: bool = False,\n) -&gt; Axes | None:\n    \"\"\"ç»˜åˆ¶å•ç»„å°æç´å›¾ï¼Œå¯é€‰æ•£ç‚¹å åŠ ã€æ¸å˜å¡«è‰²å’Œç»Ÿè®¡æ˜¾è‘—æ€§æ ‡æ³¨ã€‚\n\n    Args:\n        data (Sequence[list[float] | NDArray[np.float64]]):\n            è¾“å…¥æ•°æ®ï¼Œå¯ä»¥æ˜¯äºŒç»´numpyæ•°ç»„æˆ–åµŒå¥—åºåˆ—ï¼Œæ¯ä¸ªå­åºåˆ—ä»£è¡¨ä¸€ä¸ªå°æç´çš„æ•°æ®ç‚¹\n        ax (Axes | None, optional):\n            matplotlibçš„åæ ‡è½´å¯¹è±¡ï¼Œå¦‚æœä¸ºNoneåˆ™ä½¿ç”¨å½“å‰åæ ‡è½´. Defaults to None.\n        labels_name (list[str] | None, optional):\n            å°æç´å›¾çš„æ ‡ç­¾åç§°åˆ—è¡¨. Defaults to None.\n        width (Num, optional):\n            å°æç´å›¾çš„å®½åº¦. Defaults to 0.8.\n        colors (list[str] | None, optional):\n            å°æç´å›¾çš„é¢œè‰²åˆ—è¡¨. Defaults to None.\n        color_alpha (Num, optional):\n            å°æç´å›¾é¢œè‰²çš„é€æ˜åº¦. Defaults to 1.\n        gradient_color (bool, optional):\n            æ˜¯å¦ä½¿ç”¨æ¸å˜é¢œè‰²å¡«å……å°æç´å›¾. Defaults to False.\n        colors_start (list[str] | None, optional):\n            æ¸å˜è‰²çš„èµ·å§‹é¢œè‰²åˆ—è¡¨. Defaults to None.\n        colors_end (list[str] | None, optional):\n            æ¸å˜è‰²çš„ç»“æŸé¢œè‰²åˆ—è¡¨. Defaults to None.\n        show_dots (bool, optional):\n            æ˜¯å¦æ˜¾ç¤ºæ•£ç‚¹. Defaults to False.\n        dots_size (Num, optional):\n            æ•£ç‚¹çš„å¤§å°. Defaults to 35.\n        title_name (str, optional):\n            å›¾è¡¨æ ‡é¢˜. Defaults to \"\".\n        title_fontsize (Num, optional):\n            æ ‡é¢˜å­—ä½“å¤§å°. Defaults to 12.\n        title_pad (Num, optional):\n            æ ‡é¢˜ä¸å›¾è¡¨çš„é—´è·. Defaults to 10.\n        x_label_name (str, optional):\n            Xè½´æ ‡ç­¾åç§°. Defaults to \"\".\n        x_label_ha (str, optional):\n            Xè½´æ ‡ç­¾çš„æ°´å¹³å¯¹é½æ–¹å¼. Defaults to \"center\".\n        x_label_fontsize (Num, optional):\n            Xè½´æ ‡ç­¾å­—ä½“å¤§å°. Defaults to 10.\n        x_tick_fontsize (Num, optional):\n            Xè½´åˆ»åº¦å­—ä½“å¤§å°. Defaults to 8.\n        x_tick_rotation (Num, optional):\n            Xè½´åˆ»åº¦æ—‹è½¬è§’åº¦. Defaults to 0.\n        y_label_name (str, optional):\n            Yè½´æ ‡ç­¾åç§°. Defaults to \"\".\n        y_label_fontsize (Num, optional):\n            Yè½´æ ‡ç­¾å­—ä½“å¤§å°. Defaults to 10.\n        y_tick_fontsize (Num, optional):\n            Yè½´åˆ»åº¦å­—ä½“å¤§å°. Defaults to 8.\n        y_tick_rotation (Num, optional):\n            Yè½´åˆ»åº¦æ—‹è½¬è§’åº¦. Defaults to 0.\n        statistic (bool, optional):\n            æ˜¯å¦è¿›è¡Œç»Ÿè®¡æ˜¾è‘—æ€§åˆ†æ. Defaults to False.\n        test_method (list[str], optional):\n            ç»Ÿè®¡æ£€éªŒæ–¹æ³•åˆ—è¡¨. Defaults to [\"ttest_ind\"].\n        popmean (Num, optional):\n            å•æ ·æœ¬tæ£€éªŒçš„å‡è®¾å‡å€¼. Defaults to 0.\n        p_list (list[float] | None, optional):\n            é¢„è®¡ç®—çš„på€¼åˆ—è¡¨ï¼Œç”¨äºæ˜¾è‘—æ€§æ ‡è®°. Defaults to None.\n        statistical_line_color (str, optional):\n            æ˜¾è‘—æ€§æ ‡è®°çº¿çš„é¢œè‰². Defaults to \"0.5\".\n        asterisk_fontsize (Num, optional):\n            æ˜¾è‘—æ€§æ˜Ÿå·çš„å­—ä½“å¤§å°. Defaults to 10.\n        asterisk_color (str, optional):\n            æ˜¾è‘—æ€§æ˜Ÿå·çš„é¢œè‰². Defaults to \"k\".\n        y_lim (list[Num] | tuple[Num, Num] | None, optional):\n            Yè½´çš„èŒƒå›´é™åˆ¶. Defaults to None.\n        ax_bottom_is_0 (bool, optional):\n            Yè½´æ˜¯å¦ä»0å¼€å§‹. Defaults to False.\n        y_max_tick_is_1 (bool, optional):\n            Yè½´æœ€å¤§åˆ»åº¦æ˜¯å¦é™åˆ¶ä¸º1. Defaults to False.\n        math_text (bool, optional):\n            æ˜¯å¦å°†Yè½´æ˜¾ç¤ºä¸ºç§‘å­¦è®¡æ•°æ³•æ ¼å¼. Defaults to True.\n        one_decimal_place (bool, optional):\n            Yè½´åˆ»åº¦æ˜¯å¦åªä¿ç•™ä¸€ä½å°æ•°. Defaults to False.\n        percentage (bool, optional):\n            æ˜¯å¦å°†Yè½´æ˜¾ç¤ºä¸ºç™¾åˆ†æ¯”æ ¼å¼. Defaults to False.\n\n    Raises:\n        ValueError: å½“dataæ•°æ®æ ¼å¼æ— æ•ˆæ—¶æŠ›å‡º\n\n    Returns:\n        Axes | None: è¿”å›matplotlibçš„åæ ‡è½´å¯¹è±¡æˆ–None\n    \"\"\"\n    # å¤„ç†Noneå€¼\n    if not _is_valid_data(data):\n        raise ValueError(\"æ— æ•ˆçš„ data\")\n    ax = ax or plt.gca()\n    labels_name = labels_name or [str(i) for i in range(len(data))]\n    colors = colors or [\"gray\"] * len(data)\n    # ç»Ÿä¸€å‚æ•°å‹\n    width = float(width)\n    color_alpha = float(color_alpha)\n    dots_size = float(dots_size)\n    title_fontsize = float(title_fontsize)\n    title_pad = float(title_pad)\n    x_label_fontsize = float(x_label_fontsize)\n    x_tick_fontsize = float(x_tick_fontsize)\n    x_tick_rotation = float(x_tick_rotation)\n    y_label_fontsize = float(y_label_fontsize)\n    y_tick_fontsize = float(y_tick_fontsize)\n    y_tick_rotation = float(y_tick_rotation)\n    popmean = float(popmean)\n    asterisk_fontsize = float(asterisk_fontsize)\n\n    def _draw_gradient_violin(ax, data, pos, width, c1, c2, color_alpha):\n        # KDEä¼°è®¡\n        kde = stats.gaussian_kde(data)\n        buffer = (max(data) - min(data)) / 5\n        y = np.linspace(min(data) - buffer, max(data) + buffer, 300)\n        ymax = max(data) + buffer\n        ymin = min(data) - buffer\n        density = kde(y)\n        density = density / density.max() * (width / 2)  # æ§åˆ¶violinå®½åº¦\n        # violinå·¦å³è¾¹ç•Œ\n        x_left = pos - density\n        x_right = pos + density\n        # ç»„åˆå°é—­è¾¹ç•Œ\n        verts = np.concatenate(\n            [np.stack([x_left, y], axis=1), np.stack([x_right[::-1], y[::-1]], axis=1)]\n        )\n        # æ„å»ºæ¸å˜å›¾åƒ\n        grad_width = 200\n        grad_height = 300\n        gradient = np.linspace(0, 1, grad_width)\n        if c1 == c2:\n            rgba = to_rgba(c1, alpha=color_alpha)\n            cmap = LinearSegmentedColormap.from_list(\"cmap\", [rgba, rgba])\n            gradient_rgb = plt.get_cmap(cmap)(gradient)\n        else:\n            cmap = LinearSegmentedColormap.from_list(\"cmap\", [c1, \"white\", c2])\n            gradient_rgb = plt.get_cmap(cmap)(gradient)[..., :3]\n        gradient_img = np.tile(gradient_rgb, (grad_height, 1, 1))\n        # æ˜¾ç¤ºå›¾åƒå¹¶è£å‰ªæˆviolinå½¢çŠ¶\n        im = ax.imshow(\n            gradient_img,\n            extent=[pos - width / 2, pos + width / 2, y.min(), y.max()],\n            origin=\"lower\",\n            aspect=\"auto\",\n            zorder=1,\n        )\n        # æ·»åŠ è¾¹ç•Œçº¿å¹¶ä½œä¸ºclip\n        poly = Polygon(\n            verts,\n            closed=True,\n            facecolor=\"none\",\n            edgecolor=\"black\",\n            linewidth=1.2,\n            zorder=2,\n        )\n        ax.add_patch(poly)\n        im.set_clip_path(poly)\n        # æ·»åŠ  box å…ƒç´ \n        q1 = np.percentile(data, 25)\n        q3 = np.percentile(data, 75)\n        median = np.median(data)\n        # æ·»åŠ  IQR boxï¼ˆé»‘è‰²çŸ©å½¢ï¼‰\n        ax.add_patch(\n            Rectangle(\n                (pos - width / 16, q1),  # å·¦ä¸‹è§’åæ ‡\n                float(width / 8),  # å®½åº¦\n                q3 - q1,  # é«˜åº¦\n                facecolor=\"black\",\n                alpha=0.7,\n            )\n        )\n        # æ·»åŠ ç™½è‰²ä¸­ä½æ•°ç‚¹\n        ax.plot(pos, median, \"o\", color=\"white\", markersize=5, zorder=3)\n        return ymax, ymin\n\n    ymax_lst, ymin_lst = [], []\n    for i, d in enumerate(data):\n        if gradient_color:\n            if colors_start is None:\n                colors_start = [\"#e38a48\"] * len(data)\n            if colors_end is None:  # é»˜è®¤é¢œè‰²\n                colors_end = [\"#4573a5\"] * len(data)\n            c1 = colors_start[i]\n            c2 = colors_end[i]\n        else:\n            c1 = c2 = colors[i]\n        ymax, ymin = _draw_gradient_violin(ax, d, i, width, c1, c2, color_alpha)\n\n        ymax_lst.append(ymax)\n        ymin_lst.append(ymin)\n    ymax = max(ymax_lst)\n    ymin = min(ymin_lst)\n\n    # ç»˜åˆ¶æ•£ç‚¹ï¼ˆå¤ç”¨ç°æœ‰å‡½æ•°ï¼‰\n    if show_dots:\n        # åˆ›å»ºéšæœºæ•°ç”Ÿæˆå™¨\n        rng = np.random.default_rng(seed=42)\n        scatter_positions = [rng.normal(i, 0.1, len(d)) for i, d in enumerate(data)]\n        for i, d in enumerate(data):\n            _add_scatter(ax, scatter_positions[i], d, colors[i], dots_size)\n\n    # ç¾åŒ–\n    ax.spines[[\"top\", \"right\"]].set_visible(False)\n    ax.set_title(title_name, fontsize=title_fontsize, pad=title_pad)\n    # xè½´\n    ax.set_xlim(-0.5, len(data) - 0.5)\n    ax.set_xlabel(x_label_name, fontsize=x_label_fontsize)\n    ax.set_xticks(np.arange(len(data)))\n    ax.set_xticklabels(\n        labels_name,\n        fontsize=x_tick_fontsize,\n        rotation=x_tick_rotation,\n        ha=x_label_ha,\n        rotation_mode=\"anchor\",\n    )\n    # yè½´\n    ax.tick_params(\n        axis=\"y\",\n        labelsize=y_tick_fontsize,\n        rotation=y_tick_rotation,\n    )\n    ax.set_ylabel(y_label_name, fontsize=y_label_fontsize)\n    all_values = [ymin, ymax]\n    _set_yaxis(\n        ax,\n        all_values,\n        y_lim=y_lim,\n        ax_bottom_is_0=ax_bottom_is_0,\n        y_max_tick_is_1=y_max_tick_is_1,\n        math_text=math_text,\n        one_decimal_place=one_decimal_place,\n        percentage=percentage,\n    )\n\n    # æ·»åŠ ç»Ÿè®¡æ ‡è®°ï¼ˆå¤ç”¨ç°æœ‰å‡½æ•°ï¼‰\n    if statistic:\n        _statistics(\n            data,\n            test_method,\n            p_list,\n            popmean,\n            ax,\n            all_values,\n            statistical_line_color,\n            asterisk_fontsize,\n            asterisk_color,\n        )\n\n    return ax\n</code></pre>","path":["API"],"tags":[]},{"location":"api/#plotfig.correlation","level":2,"title":"correlation","text":"<p>Functions:</p> Name Description <code>plot_correlation_figure</code> <p>ç»˜åˆ¶ä¸¤ä¸ªæ•°æ®é›†ä¹‹é—´çš„ç›¸å…³æ€§å›¾ï¼Œæ”¯æŒçº¿æ€§å›å½’ã€ç½®ä¿¡åŒºé—´å’Œç»Ÿè®¡æ–¹æ³•ï¼ˆSpearman æˆ– Pearsonï¼‰ã€‚</p>","path":["API"],"tags":[]},{"location":"api/#plotfig.correlation.plot_correlation_figure","level":3,"title":"plot_correlation_figure","text":"<pre><code>plot_correlation_figure(data1: list[Num] | ndarray, data2: list[Num] | ndarray, ax: Axes | None = None, stats_method: str = 'spearman', ci: bool = False, dots_color: str = 'steelblue', dots_size: int | float = 10, line_color: str = 'r', title_name: str = '', title_fontsize: int = 12, title_pad: int = 10, x_label_name: str = '', x_label_fontsize: int = 10, x_tick_fontsize: int = 10, x_tick_rotation: int = 0, x_major_locator: float | None = None, x_max_tick_to_value: float | None = None, x_format: str = 'normal', y_label_name: str = '', y_label_fontsize: int = 10, y_tick_fontsize: int = 10, y_tick_rotation: int = 0, y_major_locator: float | None = None, y_max_tick_to_value: float | None = None, y_format: str = 'normal', asterisk_fontsize: int = 10, show_p_value: bool = False, hexbin: bool = False, hexbin_cmap: LinearSegmentedColormap | None = None, hexbin_gridsize: int = 50, xlim: list[Num] | tuple[Num, Num] | None = None, ylim: list[Num] | tuple[Num, Num] | None = None) -&gt; Axes\n</code></pre> <p>ç»˜åˆ¶ä¸¤ä¸ªæ•°æ®é›†ä¹‹é—´çš„ç›¸å…³æ€§å›¾ï¼Œæ”¯æŒçº¿æ€§å›å½’ã€ç½®ä¿¡åŒºé—´å’Œç»Ÿè®¡æ–¹æ³•ï¼ˆSpearman æˆ– Pearsonï¼‰ã€‚</p> <p>Parameters:</p> Name Type Description Default <code>data1</code> <code>list[Num] | ndarray</code> <p>ç¬¬ä¸€ä¸ªæ•°æ®é›†ï¼Œå¯ä»¥æ˜¯æ•´æ•°æˆ–æµ®ç‚¹æ•°åˆ—è¡¨æˆ–æ•°ç»„ã€‚</p> required <code>data2</code> <code>list[Num] | ndarray</code> <p>ç¬¬äºŒä¸ªæ•°æ®é›†ï¼Œå¯ä»¥æ˜¯æ•´æ•°æˆ–æµ®ç‚¹æ•°åˆ—è¡¨æˆ–æ•°ç»„ã€‚</p> required <code>ax</code> <code>Axes | None</code> <p>matplotlib çš„ Axes å¯¹è±¡ï¼Œç”¨äºç»˜å›¾ã€‚é»˜è®¤ä¸º Noneï¼Œä½¿ç”¨å½“å‰ Axesã€‚</p> <code>None</code> <code>stats_method</code> <code>str</code> <p>ç›¸å…³æ€§ç»Ÿè®¡æ–¹æ³•ï¼Œæ”¯æŒ \"spearman\" å’Œ \"pearson\"ã€‚é»˜è®¤ä¸º \"spearman\"ã€‚</p> <code>'spearman'</code> <code>ci</code> <code>bool</code> <p>æ˜¯å¦ç»˜åˆ¶ç½®ä¿¡åŒºé—´å¸¦ã€‚é»˜è®¤ä¸º Falseã€‚</p> <code>False</code> <code>dots_color</code> <code>str</code> <p>æ•£ç‚¹çš„é¢œè‰²ã€‚é»˜è®¤ä¸º \"steelblue\"ã€‚</p> <code>'steelblue'</code> <code>dots_size</code> <code>int | float</code> <p>æ•£ç‚¹çš„å¤§å°ã€‚é»˜è®¤ä¸º 1ã€‚</p> <code>10</code> <code>line_color</code> <code>str</code> <p>å›å½’çº¿çš„é¢œè‰²ã€‚é»˜è®¤ä¸º \"r\"ï¼ˆçº¢è‰²ï¼‰ã€‚</p> <code>'r'</code> <code>title_name</code> <code>str</code> <p>å›¾å½¢æ ‡é¢˜ã€‚é»˜è®¤ä¸ºç©ºå­—ç¬¦ä¸²ã€‚</p> <code>''</code> <code>title_fontsize</code> <code>int</code> <p>æ ‡é¢˜å­—ä½“å¤§å°ã€‚é»˜è®¤ä¸º 10ã€‚</p> <code>12</code> <code>title_pad</code> <code>int</code> <p>æ ‡é¢˜ä¸å›¾å½¢ä¹‹é—´çš„é—´è·ã€‚é»˜è®¤ä¸º 10ã€‚</p> <code>10</code> <code>x_label_name</code> <code>str</code> <p>X è½´æ ‡ç­¾åç§°ã€‚é»˜è®¤ä¸ºç©ºå­—ç¬¦ä¸²ã€‚</p> <code>''</code> <code>x_label_fontsize</code> <code>int</code> <p>X è½´æ ‡ç­¾å­—ä½“å¤§å°ã€‚é»˜è®¤ä¸º 10ã€‚</p> <code>10</code> <code>x_tick_fontsize</code> <code>int</code> <p>X è½´åˆ»åº¦æ ‡ç­¾å­—ä½“å¤§å°ã€‚é»˜è®¤ä¸º 10ã€‚</p> <code>10</code> <code>x_tick_rotation</code> <code>int</code> <p>X è½´åˆ»åº¦æ ‡ç­¾æ—‹è½¬è§’åº¦ã€‚é»˜è®¤ä¸º 0ã€‚</p> <code>0</code> <code>x_major_locator</code> <code>float | None</code> <p>è®¾ç½® X è½´ä¸»åˆ»åº¦é—´éš”ã€‚é»˜è®¤ä¸º Noneã€‚</p> <code>None</code> <code>x_max_tick_to_value</code> <code>float | None</code> <p>è®¾ç½® X è½´æœ€å¤§æ˜¾ç¤ºåˆ»åº¦å€¼ã€‚é»˜è®¤ä¸º Noneã€‚</p> <code>None</code> <code>x_format</code> <code>str</code> <p>X è½´æ ¼å¼åŒ–æ–¹å¼ï¼Œæ”¯æŒ \"normal\", \"sci\", \"1f\", \"percent\"ã€‚é»˜è®¤ä¸º \"normal\"ã€‚</p> <code>'normal'</code> <code>y_label_name</code> <code>str</code> <p>Y è½´æ ‡ç­¾åç§°ã€‚é»˜è®¤ä¸ºç©ºå­—ç¬¦ä¸²ã€‚</p> <code>''</code> <code>y_label_fontsize</code> <code>int</code> <p>Y è½´æ ‡ç­¾å­—ä½“å¤§å°ã€‚é»˜è®¤ä¸º 10ã€‚</p> <code>10</code> <code>y_tick_fontsize</code> <code>int</code> <p>Y è½´åˆ»åº¦æ ‡ç­¾å­—ä½“å¤§å°ã€‚é»˜è®¤ä¸º 10ã€‚</p> <code>10</code> <code>y_tick_rotation</code> <code>int</code> <p>Y è½´åˆ»åº¦æ ‡ç­¾æ—‹è½¬è§’åº¦ã€‚é»˜è®¤ä¸º 0ã€‚</p> <code>0</code> <code>y_major_locator</code> <code>float | None</code> <p>è®¾ç½® Y è½´ä¸»åˆ»åº¦é—´éš”ã€‚é»˜è®¤ä¸º Noneã€‚</p> <code>None</code> <code>y_max_tick_to_value</code> <code>float | None</code> <p>è®¾ç½® Y è½´æœ€å¤§æ˜¾ç¤ºåˆ»åº¦å€¼ã€‚é»˜è®¤ä¸º Noneã€‚</p> <code>None</code> <code>y_format</code> <code>str</code> <p>Y è½´æ ¼å¼åŒ–æ–¹å¼ï¼Œæ”¯æŒ \"normal\", \"sci\", \"1f\", \"percent\"ã€‚é»˜è®¤ä¸º \"normal\"ã€‚</p> <code>'normal'</code> <code>asterisk_fontsize</code> <code>int</code> <p>æ˜¾è‘—æ€§æ˜Ÿå·å­—ä½“å¤§å°ã€‚é»˜è®¤ä¸º 10ã€‚</p> <code>10</code> <code>show_p_value</code> <code>bool</code> <p>æ˜¯å¦æ˜¾ç¤º p å€¼ã€‚é»˜è®¤ä¸º Trueã€‚</p> <code>False</code> <code>hexbin</code> <code>bool</code> <p>æ˜¯å¦ä½¿ç”¨å…­è¾¹å½¢ç®±å›¾ã€‚é»˜è®¤ä¸º Falseã€‚</p> <code>False</code> <code>hexbin_cmap</code> <code>LinearSegmentedColormap | None</code> <p>å…­è¾¹å½¢ç®±å›¾çš„é¢œè‰²æ˜ å°„ã€‚é»˜è®¤ä¸º Noneã€‚</p> <code>None</code> <code>hexbin_gridsize</code> <code>int</code> <p>å…­è¾¹å½¢ç®±å›¾çš„ç½‘æ ¼å¤§å°ã€‚é»˜è®¤ä¸º 50ã€‚</p> <code>50</code> <code>xlim</code> <code>list[Num] | tuple[Num, Num] | None</code> <p>X è½´èŒƒå›´é™åˆ¶ã€‚é»˜è®¤ä¸º Noneã€‚</p> <code>None</code> <code>ylim</code> <code>list[Num] | tuple[Num, Num] | None</code> <p>Y è½´èŒƒå›´é™åˆ¶ã€‚é»˜è®¤ä¸º Noneã€‚</p> <code>None</code> <p>Returns:</p> Type Description <code>Axes</code> <p>None</p> Source code in <code>src/plotfig/correlation.py</code> <pre><code>def plot_correlation_figure(\n    data1: list[Num] | np.ndarray,\n    data2: list[Num] | np.ndarray,\n    ax: Axes | None = None,\n    stats_method: str = \"spearman\",\n    ci: bool = False,\n    dots_color: str = \"steelblue\",\n    dots_size: int | float = 10,\n    line_color: str = \"r\",\n    title_name: str = \"\",\n    title_fontsize: int = 12,\n    title_pad: int = 10,\n    x_label_name: str = \"\",\n    x_label_fontsize: int = 10,\n    x_tick_fontsize: int = 10,\n    x_tick_rotation: int = 0,\n    x_major_locator: float | None = None,\n    x_max_tick_to_value: float | None = None,\n    x_format: str = \"normal\",  # æ”¯æŒ \"normal\", \"sci\", \"1f\", \"percent\"\n    y_label_name: str = \"\",\n    y_label_fontsize: int = 10,\n    y_tick_fontsize: int = 10,\n    y_tick_rotation: int = 0,\n    y_major_locator: float | None = None,\n    y_max_tick_to_value: float | None = None,\n    y_format: str = \"normal\",  # æ”¯æŒ \"normal\", \"sci\", \"1f\", \"percent\"\n    asterisk_fontsize: int = 10,\n    show_p_value: bool = False,\n    hexbin: bool = False,\n    hexbin_cmap: LinearSegmentedColormap | None = None,\n    hexbin_gridsize: int = 50,\n    xlim: list[Num] | tuple[Num, Num] | None = None,\n    ylim: list[Num] | tuple[Num, Num] | None = None,\n) -&gt; Axes:\n    \"\"\"\n    ç»˜åˆ¶ä¸¤ä¸ªæ•°æ®é›†ä¹‹é—´çš„ç›¸å…³æ€§å›¾ï¼Œæ”¯æŒçº¿æ€§å›å½’ã€ç½®ä¿¡åŒºé—´å’Œç»Ÿè®¡æ–¹æ³•ï¼ˆSpearman æˆ– Pearsonï¼‰ã€‚\n\n    Args:\n        data1 (list[Num] | np.ndarray): ç¬¬ä¸€ä¸ªæ•°æ®é›†ï¼Œå¯ä»¥æ˜¯æ•´æ•°æˆ–æµ®ç‚¹æ•°åˆ—è¡¨æˆ–æ•°ç»„ã€‚\n        data2 (list[Num] | np.ndarray): ç¬¬äºŒä¸ªæ•°æ®é›†ï¼Œå¯ä»¥æ˜¯æ•´æ•°æˆ–æµ®ç‚¹æ•°åˆ—è¡¨æˆ–æ•°ç»„ã€‚\n        ax (plt.Axes | None, optional): matplotlib çš„ Axes å¯¹è±¡ï¼Œç”¨äºç»˜å›¾ã€‚é»˜è®¤ä¸º Noneï¼Œä½¿ç”¨å½“å‰ Axesã€‚\n        stats_method (str, optional): ç›¸å…³æ€§ç»Ÿè®¡æ–¹æ³•ï¼Œæ”¯æŒ \"spearman\" å’Œ \"pearson\"ã€‚é»˜è®¤ä¸º \"spearman\"ã€‚\n        ci (bool, optional): æ˜¯å¦ç»˜åˆ¶ç½®ä¿¡åŒºé—´å¸¦ã€‚é»˜è®¤ä¸º Falseã€‚\n        dots_color (str, optional): æ•£ç‚¹çš„é¢œè‰²ã€‚é»˜è®¤ä¸º \"steelblue\"ã€‚\n        dots_size (int | float, optional): æ•£ç‚¹çš„å¤§å°ã€‚é»˜è®¤ä¸º 1ã€‚\n        line_color (str, optional): å›å½’çº¿çš„é¢œè‰²ã€‚é»˜è®¤ä¸º \"r\"ï¼ˆçº¢è‰²ï¼‰ã€‚\n        title_name (str, optional): å›¾å½¢æ ‡é¢˜ã€‚é»˜è®¤ä¸ºç©ºå­—ç¬¦ä¸²ã€‚\n        title_fontsize (int, optional): æ ‡é¢˜å­—ä½“å¤§å°ã€‚é»˜è®¤ä¸º 10ã€‚\n        title_pad (int, optional): æ ‡é¢˜ä¸å›¾å½¢ä¹‹é—´çš„é—´è·ã€‚é»˜è®¤ä¸º 10ã€‚\n        x_label_name (str, optional): X è½´æ ‡ç­¾åç§°ã€‚é»˜è®¤ä¸ºç©ºå­—ç¬¦ä¸²ã€‚\n        x_label_fontsize (int, optional): X è½´æ ‡ç­¾å­—ä½“å¤§å°ã€‚é»˜è®¤ä¸º 10ã€‚\n        x_tick_fontsize (int, optional): X è½´åˆ»åº¦æ ‡ç­¾å­—ä½“å¤§å°ã€‚é»˜è®¤ä¸º 10ã€‚\n        x_tick_rotation (int, optional): X è½´åˆ»åº¦æ ‡ç­¾æ—‹è½¬è§’åº¦ã€‚é»˜è®¤ä¸º 0ã€‚\n        x_major_locator (float | None, optional): è®¾ç½® X è½´ä¸»åˆ»åº¦é—´éš”ã€‚é»˜è®¤ä¸º Noneã€‚\n        x_max_tick_to_value (float | None, optional): è®¾ç½® X è½´æœ€å¤§æ˜¾ç¤ºåˆ»åº¦å€¼ã€‚é»˜è®¤ä¸º Noneã€‚\n        x_format (str, optional): X è½´æ ¼å¼åŒ–æ–¹å¼ï¼Œæ”¯æŒ \"normal\", \"sci\", \"1f\", \"percent\"ã€‚é»˜è®¤ä¸º \"normal\"ã€‚\n        y_label_name (str, optional): Y è½´æ ‡ç­¾åç§°ã€‚é»˜è®¤ä¸ºç©ºå­—ç¬¦ä¸²ã€‚\n        y_label_fontsize (int, optional): Y è½´æ ‡ç­¾å­—ä½“å¤§å°ã€‚é»˜è®¤ä¸º 10ã€‚\n        y_tick_fontsize (int, optional): Y è½´åˆ»åº¦æ ‡ç­¾å­—ä½“å¤§å°ã€‚é»˜è®¤ä¸º 10ã€‚\n        y_tick_rotation (int, optional): Y è½´åˆ»åº¦æ ‡ç­¾æ—‹è½¬è§’åº¦ã€‚é»˜è®¤ä¸º 0ã€‚\n        y_major_locator (float | None, optional): è®¾ç½® Y è½´ä¸»åˆ»åº¦é—´éš”ã€‚é»˜è®¤ä¸º Noneã€‚\n        y_max_tick_to_value (float | None, optional): è®¾ç½® Y è½´æœ€å¤§æ˜¾ç¤ºåˆ»åº¦å€¼ã€‚é»˜è®¤ä¸º Noneã€‚\n        y_format (str, optional): Y è½´æ ¼å¼åŒ–æ–¹å¼ï¼Œæ”¯æŒ \"normal\", \"sci\", \"1f\", \"percent\"ã€‚é»˜è®¤ä¸º \"normal\"ã€‚\n        asterisk_fontsize (int, optional): æ˜¾è‘—æ€§æ˜Ÿå·å­—ä½“å¤§å°ã€‚é»˜è®¤ä¸º 10ã€‚\n        show_p_value (bool, optional): æ˜¯å¦æ˜¾ç¤º p å€¼ã€‚é»˜è®¤ä¸º Trueã€‚\n        hexbin (bool, optional): æ˜¯å¦ä½¿ç”¨å…­è¾¹å½¢ç®±å›¾ã€‚é»˜è®¤ä¸º Falseã€‚\n        hexbin_cmap (LinearSegmentedColormap | None, optional): å…­è¾¹å½¢ç®±å›¾çš„é¢œè‰²æ˜ å°„ã€‚é»˜è®¤ä¸º Noneã€‚\n        hexbin_gridsize (int, optional): å…­è¾¹å½¢ç®±å›¾çš„ç½‘æ ¼å¤§å°ã€‚é»˜è®¤ä¸º 50ã€‚\n        xlim (list[Num] | tuple[Num, Num] | None, optional): X è½´èŒƒå›´é™åˆ¶ã€‚é»˜è®¤ä¸º Noneã€‚\n        ylim (list[Num] | tuple[Num, Num] | None, optional): Y è½´èŒƒå›´é™åˆ¶ã€‚é»˜è®¤ä¸º Noneã€‚\n\n    Returns:\n        None\n    \"\"\"\n\n    def set_axis(\n        ax, axis, label, labelsize, ticksize, rotation, locator, max_tick_value, fmt, lim\n    ):\n        if axis == \"x\":\n            set_label = ax.set_xlabel\n            get_ticks = ax.get_xticks\n            set_ticks = ax.set_xticks\n            axis_formatter = ax.xaxis.set_major_formatter\n            axis_major_locator = ax.xaxis.set_major_locator\n        else:\n            set_label = ax.set_ylabel\n            get_ticks = ax.get_yticks\n            set_ticks = ax.set_yticks\n            axis_formatter = ax.yaxis.set_major_formatter\n            axis_major_locator = ax.yaxis.set_major_locator\n\n        # è®¾ç½®è½´èŒƒå›´\n        if lim is not None:\n            if axis == \"x\":\n                ax.set_xlim(lim)\n            else:\n                ax.set_ylim(lim)\n\n        set_label(label, fontsize=labelsize)\n        ax.tick_params(axis=axis, which=\"major\", labelsize=ticksize, rotation=rotation)\n        if locator is not None:\n            axis_major_locator(MultipleLocator(locator))\n        if max_tick_value is not None:\n            set_ticks([i for i in get_ticks() if i &lt;= max_tick_value])\n\n        if fmt == \"sci\":\n            formatter = ScalarFormatter(useMathText=True)\n            formatter.set_powerlimits((-2, 2))\n            axis_formatter(formatter)\n        elif fmt == \"1f\":\n            axis_formatter(FormatStrFormatter(\"%.1f\"))\n        elif fmt == \"percent\":\n            axis_formatter(FuncFormatter(lambda x, pos: f\"{x:.0%}\"))\n\n    if ax is None:\n        ax = plt.gca()\n\n    A = np.asarray(data1)\n    B = np.asarray(data2)\n\n    slope, intercept, r_value, p_value, _ = stats.linregress(A, B)\n    x_seq = np.linspace(A.min(), A.max(), 100)\n    y_pred = slope * x_seq + intercept\n\n    if hexbin:\n        if hexbin_cmap is None:\n            hexbin_cmap = LinearSegmentedColormap.from_list(\n                \"custom\", [\"#ffffff\", \"#4573a5\"]\n            )\n        hb = ax.hexbin(A, B, gridsize=hexbin_gridsize, cmap=hexbin_cmap)\n    else:\n        ax.scatter(A, B, c=dots_color, s=dots_size, alpha=0.8)\n    ax.plot(x_seq, y_pred, line_color, lw=1)\n\n    if ci:\n        n = len(A)\n        dof = n - 2\n        t_val = stats.t.ppf(0.975, dof)\n        x_mean = A.mean()\n        residuals = B - (slope * A + intercept)\n        s_err = np.sqrt(np.sum(residuals**2) / dof)\n        SSxx = np.sum((A - x_mean) ** 2)\n        conf_interval = t_val * s_err * np.sqrt(1 / n + (x_seq - x_mean) ** 2 / SSxx)\n        ax.fill_between(\n            x_seq,\n            y_pred - conf_interval,\n            y_pred + conf_interval,\n            color=\"salmon\",\n            alpha=0.3,\n        )\n\n    ax.spines[[\"top\", \"right\"]].set_visible(False)\n    ax.set_title(title_name, fontsize=title_fontsize, pad=title_pad)\n\n    set_axis(\n        ax,\n        \"x\",\n        x_label_name,\n        x_label_fontsize,\n        x_tick_fontsize,\n        x_tick_rotation,\n        x_major_locator,\n        x_max_tick_to_value,\n        x_format,\n        xlim,\n    )\n    set_axis(\n        ax,\n        \"y\",\n        y_label_name,\n        y_label_fontsize,\n        y_tick_fontsize,\n        y_tick_rotation,\n        y_major_locator,\n        y_max_tick_to_value,\n        y_format,\n        ylim,\n    )\n\n    # æ ‡æ³¨rå€¼æˆ–rhoå€¼\n    if stats_method == \"spearman\":\n        s, p = stats.spearmanr(A, B)\n        label = r\"$\\rho$\"\n    elif stats_method == \"pearson\":\n        s, p = stats.pearsonr(A, B)\n        label = \"r\"\n    else:\n        print(f\"æ²¡æœ‰ç»Ÿè®¡æ–¹æ³• {stats_method}ï¼Œè¯·æ£€æŸ¥æ‹¼å†™ã€‚æ›´æ¢ä¸ºé»˜è®¤çš„ spearman æ–¹æ³•ã€‚\")\n        s, p = stats.spearmanr(A, B)\n        label = r\"$\\rho$\"\n\n    if show_p_value:\n        asterisk = f\" p={p:.4f}\"\n    else:\n        asterisk = \" ***\" if p &lt; 0.001 else \" **\" if p &lt; 0.01 else \" *\" if p &lt; 0.05 else \"\"\n    x_start, x_end = ax.get_xlim()\n    y_start, y_end = ax.get_ylim()\n    ax.text(\n        x_start + (x_end - x_start) * 0.1,\n        y_start + (y_end - y_start) * 0.9,\n        f\"{label}={s:.3f}{asterisk}\",\n        va=\"center\",\n        fontsize=asterisk_fontsize,\n    )\n    if hexbin:\n        return hb\n    return ax\n</code></pre>","path":["API"],"tags":[]},{"location":"api/#plotfig.matrix","level":2,"title":"matrix","text":"<p>Functions:</p> Name Description <code>plot_matrix_figure</code> <p>å°†çŸ©é˜µç»˜åˆ¶ä¸ºçƒ­å›¾ï¼Œå¯é€‰æ˜¾ç¤ºæ ‡ç­¾ã€é¢œè‰²æ¡å’Œæ ‡é¢˜ã€‚</p>","path":["API"],"tags":[]},{"location":"api/#plotfig.matrix.plot_matrix_figure","level":3,"title":"plot_matrix_figure","text":"<pre><code>plot_matrix_figure(data: ndarray, ax: Axes | None = None, row_labels_name: Sequence[str] | None = None, col_labels_name: Sequence[str] | None = None, cmap: str = 'bwr', vmin: Num | None = None, vmax: Num | None = None, aspect: str = 'equal', colorbar: bool = True, colorbar_label_name: str = '', colorbar_pad: Num = 0.1, colorbar_label_fontsize: Num = 10, colorbar_tick_fontsize: Num = 10, colorbar_tick_rotation: Num = 0, row_labels_fontsize: Num = 10, col_labels_fontsize: Num = 10, x_rotation: Num = 60, title_name: str = '', title_fontsize: Num = 15, title_pad: Num = 20, diag_border: bool = False, xlabel: str | None = None, ylabel: str | None = None, **imshow_kwargs: Any) -&gt; Axes\n</code></pre> <p>å°†çŸ©é˜µç»˜åˆ¶ä¸ºçƒ­å›¾ï¼Œå¯é€‰æ˜¾ç¤ºæ ‡ç­¾ã€é¢œè‰²æ¡å’Œæ ‡é¢˜ã€‚</p> <p>Parameters:</p> Name Type Description Default <code>data</code> <code>ndarray</code> <p>å½¢çŠ¶ä¸º (N, M) çš„äºŒç»´æ•°ç»„ï¼Œç”¨äºæ˜¾ç¤ºçŸ©é˜µã€‚</p> required <code>ax</code> <code>Axes | None</code> <p>è¦ç»˜å›¾çš„ Matplotlib åæ ‡è½´ã€‚å¦‚æœä¸º Noneï¼Œåˆ™ä½¿ç”¨å½“å‰åæ ‡è½´ã€‚</p> <code>None</code> <code>row_labels_name</code> <code>Sequence[str] | None</code> <p>è¡Œæ ‡ç­¾åˆ—è¡¨ã€‚</p> <code>None</code> <code>col_labels_name</code> <code>Sequence[str] | None</code> <p>åˆ—æ ‡ç­¾åˆ—è¡¨ã€‚</p> <code>None</code> <code>cmap</code> <code>str</code> <p>çŸ©é˜µä½¿ç”¨çš„é¢œè‰²æ˜ å°„ã€‚</p> <code>'bwr'</code> <code>vmin</code> <code>Num | None</code> <p>é¢œè‰²ç¼©æ”¾çš„æœ€å°å€¼ï¼Œé»˜è®¤ä½¿ç”¨ data.min()ã€‚</p> <code>None</code> <code>vmax</code> <code>Num | None</code> <p>é¢œè‰²ç¼©æ”¾çš„æœ€å¤§å€¼ï¼Œé»˜è®¤ä½¿ç”¨ data.max()ã€‚</p> <code>None</code> <code>aspect</code> <code>str</code> <p>å›¾åƒçš„çºµæ¨ªæ¯”ï¼Œé€šå¸¸ä¸º \"equal\" æˆ– \"auto\"ã€‚</p> <code>'equal'</code> <code>colorbar</code> <code>bool</code> <p>æ˜¯å¦æ˜¾ç¤ºé¢œè‰²æ¡ã€‚</p> <code>True</code> <code>colorbar_label_name</code> <code>str</code> <p>é¢œè‰²æ¡çš„æ ‡ç­¾ã€‚</p> <code>''</code> <code>colorbar_pad</code> <code>Num</code> <p>é¢œè‰²æ¡ä¸çŸ©é˜µä¹‹é—´çš„é—´è·ã€‚</p> <code>0.1</code> <code>colorbar_label_fontsize</code> <code>Num</code> <p>é¢œè‰²æ¡æ ‡ç­¾çš„å­—ä½“å¤§å°ã€‚</p> <code>10</code> <code>colorbar_tick_fontsize</code> <code>Num</code> <p>é¢œè‰²æ¡åˆ»åº¦çš„å­—ä½“å¤§å°ã€‚</p> <code>10</code> <code>colorbar_tick_rotation</code> <code>Num</code> <p>é¢œè‰²æ¡åˆ»åº¦æ ‡ç­¾çš„æ—‹è½¬è§’åº¦ã€‚</p> <code>0</code> <code>row_labels_fontsize</code> <code>Num</code> <p>è¡Œæ ‡ç­¾çš„å­—ä½“å¤§å°ã€‚</p> <code>10</code> <code>col_labels_fontsize</code> <code>Num</code> <p>åˆ—æ ‡ç­¾çš„å­—ä½“å¤§å°ã€‚</p> <code>10</code> <code>x_rotation</code> <code>Num</code> <p>x è½´ï¼ˆåˆ—ï¼‰æ ‡ç­¾çš„æ—‹è½¬è§’åº¦ã€‚</p> <code>60</code> <code>title_name</code> <code>Num</code> <p>å›¾è¡¨æ ‡é¢˜ã€‚</p> <code>''</code> <code>title_fontsize</code> <code>Num</code> <p>æ ‡é¢˜çš„å­—ä½“å¤§å°ã€‚</p> <code>15</code> <code>title_pad</code> <code>Num</code> <p>æ ‡é¢˜ä¸Šæ–¹çš„é—´è·ã€‚</p> <code>20</code> <code>diag_border</code> <code>bool</code> <p>æ˜¯å¦ç»˜åˆ¶å¯¹è§’çº¿å•å…ƒæ ¼è¾¹æ¡†ã€‚</p> <code>False</code> <code>xlabel</code> <code>str | None</code> <p>Xè½´çš„æ•´ä½“æ ‡ç­¾åç§°ã€‚</p> <code>None</code> <code>ylabel</code> <code>str | None</code> <p>Yè½´çš„æ•´ä½“æ ‡ç­¾åç§°ã€‚</p> <code>None</code> <code>**imshow_kwargs</code> <code>Any</code> <p>ä¼ é€’ç»™ <code>imshow()</code> çš„å…¶ä»–å…³é”®å­—å‚æ•°ã€‚</p> <code>{}</code> <p>Returns:</p> Name Type Description <code>Axes</code> <code>Axes</code> <p>ç»˜å›¾çš„åæ ‡è½´å¯¹è±¡ã€‚</p> Source code in <code>src/plotfig/matrix.py</code> <pre><code>def plot_matrix_figure(\n    data: np.ndarray,\n    ax: Axes | None = None,\n    row_labels_name: Sequence[str] | None = None,\n    col_labels_name: Sequence[str] | None = None,\n    cmap: str = \"bwr\",\n    vmin: Num | None = None,\n    vmax: Num | None = None,\n    aspect: str = \"equal\",\n    colorbar: bool = True,\n    colorbar_label_name: str = \"\",\n    colorbar_pad: Num = 0.1,\n    colorbar_label_fontsize: Num = 10,\n    colorbar_tick_fontsize: Num = 10,\n    colorbar_tick_rotation: Num = 0,\n    row_labels_fontsize: Num = 10,\n    col_labels_fontsize: Num = 10,\n    x_rotation: Num = 60,\n    title_name: str = \"\",\n    title_fontsize: Num = 15,\n    title_pad: Num = 20,\n    diag_border: bool = False,\n    xlabel: str | None = None,\n    ylabel: str | None = None,\n    **imshow_kwargs: Any,\n) -&gt; Axes:\n    \"\"\"\n    å°†çŸ©é˜µç»˜åˆ¶ä¸ºçƒ­å›¾ï¼Œå¯é€‰æ˜¾ç¤ºæ ‡ç­¾ã€é¢œè‰²æ¡å’Œæ ‡é¢˜ã€‚\n\n    Args:\n        data (np.ndarray): å½¢çŠ¶ä¸º (N, M) çš„äºŒç»´æ•°ç»„ï¼Œç”¨äºæ˜¾ç¤ºçŸ©é˜µã€‚\n        ax (Axes | None): è¦ç»˜å›¾çš„ Matplotlib åæ ‡è½´ã€‚å¦‚æœä¸º Noneï¼Œåˆ™ä½¿ç”¨å½“å‰åæ ‡è½´ã€‚\n        row_labels_name (Sequence[str] | None): è¡Œæ ‡ç­¾åˆ—è¡¨ã€‚\n        col_labels_name (Sequence[str] | None): åˆ—æ ‡ç­¾åˆ—è¡¨ã€‚\n        cmap (str): çŸ©é˜µä½¿ç”¨çš„é¢œè‰²æ˜ å°„ã€‚\n        vmin (Num | None): é¢œè‰²ç¼©æ”¾çš„æœ€å°å€¼ï¼Œé»˜è®¤ä½¿ç”¨ data.min()ã€‚\n        vmax (Num | None): é¢œè‰²ç¼©æ”¾çš„æœ€å¤§å€¼ï¼Œé»˜è®¤ä½¿ç”¨ data.max()ã€‚\n        aspect (str): å›¾åƒçš„çºµæ¨ªæ¯”ï¼Œé€šå¸¸ä¸º \"equal\" æˆ– \"auto\"ã€‚\n        colorbar (bool): æ˜¯å¦æ˜¾ç¤ºé¢œè‰²æ¡ã€‚\n        colorbar_label_name (str): é¢œè‰²æ¡çš„æ ‡ç­¾ã€‚\n        colorbar_pad (Num): é¢œè‰²æ¡ä¸çŸ©é˜µä¹‹é—´çš„é—´è·ã€‚\n        colorbar_label_fontsize (Num): é¢œè‰²æ¡æ ‡ç­¾çš„å­—ä½“å¤§å°ã€‚\n        colorbar_tick_fontsize (Num): é¢œè‰²æ¡åˆ»åº¦çš„å­—ä½“å¤§å°ã€‚\n        colorbar_tick_rotation (Num): é¢œè‰²æ¡åˆ»åº¦æ ‡ç­¾çš„æ—‹è½¬è§’åº¦ã€‚\n        row_labels_fontsize (Num): è¡Œæ ‡ç­¾çš„å­—ä½“å¤§å°ã€‚\n        col_labels_fontsize (Num): åˆ—æ ‡ç­¾çš„å­—ä½“å¤§å°ã€‚\n        x_rotation (Num): x è½´ï¼ˆåˆ—ï¼‰æ ‡ç­¾çš„æ—‹è½¬è§’åº¦ã€‚\n        title_name (Num): å›¾è¡¨æ ‡é¢˜ã€‚\n        title_fontsize (Num): æ ‡é¢˜çš„å­—ä½“å¤§å°ã€‚\n        title_pad (Num): æ ‡é¢˜ä¸Šæ–¹çš„é—´è·ã€‚\n        diag_border (bool): æ˜¯å¦ç»˜åˆ¶å¯¹è§’çº¿å•å…ƒæ ¼è¾¹æ¡†ã€‚\n        xlabel (str | None): Xè½´çš„æ•´ä½“æ ‡ç­¾åç§°ã€‚\n        ylabel (str | None): Yè½´çš„æ•´ä½“æ ‡ç­¾åç§°ã€‚\n        **imshow_kwargs (Any): ä¼ é€’ç»™ `imshow()` çš„å…¶ä»–å…³é”®å­—å‚æ•°ã€‚\n\n    Returns:\n        Axes: ç»˜å›¾çš„åæ ‡è½´å¯¹è±¡ã€‚\n    \"\"\"\n\n    ax = ax or plt.gca()\n    vmin = vmin if vmin is not None else np.min(data)\n    vmax = vmax if vmax is not None else np.max(data)\n\n    im = ax.imshow(\n        data, cmap=cmap, vmin=vmin, vmax=vmax, aspect=aspect, **imshow_kwargs\n    )\n    ax.set_title(title_name, fontsize=title_fontsize, pad=title_pad)\n\n    # è®¾ç½®Xè½´å’ŒYè½´æ ‡ç­¾\n    if xlabel is not None:\n        ax.set_xlabel(xlabel)\n    if ylabel is not None:\n        ax.set_ylabel(ylabel)\n\n    if diag_border:\n        for i in range(data.shape[0]):\n            ax.add_patch(\n                plt.Rectangle(\n                    (i - 0.5, i - 0.5), 1, 1, fill=False, edgecolor=\"black\", lw=0.5\n                )\n            )\n\n    if col_labels_name is not None:\n        ax.set_xticks(np.arange(data.shape[1]))\n        ax.set_xticklabels(\n            col_labels_name,\n            fontsize=col_labels_fontsize,\n            rotation=x_rotation,\n            ha=\"right\",\n            rotation_mode=\"anchor\",\n        )\n\n    if row_labels_name is not None:\n        ax.set_yticks(np.arange(data.shape[0]))\n        ax.set_yticklabels(row_labels_name, fontsize=row_labels_fontsize)\n\n    if colorbar:\n        divider = make_axes_locatable(ax)\n        cax = divider.append_axes(\"right\", size=\"5%\", pad=colorbar_pad)\n        cbar = ax.figure.colorbar(im, cax=cax)\n        cbar.ax.set_ylabel(\n            colorbar_label_name,\n            rotation=-90,\n            va=\"bottom\",\n            fontsize=colorbar_label_fontsize,\n        )\n        cbar.ax.tick_params(\n            labelsize=colorbar_tick_fontsize, rotation=colorbar_tick_rotation\n        )\n        # Match colorbar height to the main plot\n        ax_pos = ax.get_position()\n        cax.set_position(\n            [cax.get_position().x0, ax_pos.y0, cax.get_position().width, ax_pos.height]\n        )\n\n    return ax\n</code></pre>","path":["API"],"tags":[]},{"location":"api/#plotfig.brain_surface","level":2,"title":"brain_surface","text":"<p>Functions:</p> Name Description <code>plot_brain_surface_figure</code> <p>åœ¨å¤§è„‘çš®å±‚è¡¨é¢ç»˜åˆ¶æ•°å€¼æ•°æ®çš„å‡½æ•°ã€‚</p>","path":["API"],"tags":[]},{"location":"api/#plotfig.brain_surface.plot_brain_surface_figure","level":3,"title":"plot_brain_surface_figure","text":"<pre><code>plot_brain_surface_figure(data: Mapping[str, Num], species: str = 'human', atlas: str = 'glasser', surf: str = 'veryinflated', ax: Axes | None = None, vmin: Num | None = None, vmax: Num | None = None, cmap: str = 'viridis', colorbar: bool = True, colorbar_location: str = 'right', colorbar_label_name: str = '', colorbar_label_rotation: int = 0, colorbar_decimals: int = 1, colorbar_fontsize: int = 8, colorbar_nticks: int = 2, colorbar_shrink: float = 0.15, colorbar_aspect: int = 8, colorbar_draw_border: bool = False, title_name: str = '', title_fontsize: int = 12, as_outline: bool = False) -&gt; Axes\n</code></pre> <p>åœ¨å¤§è„‘çš®å±‚è¡¨é¢ç»˜åˆ¶æ•°å€¼æ•°æ®çš„å‡½æ•°ã€‚</p> <p>Parameters:</p> Name Type Description Default <code>data</code> <code>dict[str, float]</code> <p>åŒ…å«è„‘åŒºåç§°å’Œå¯¹åº”æ•°å€¼çš„å­—å…¸ï¼Œé”®ä¸ºè„‘åŒºåç§°ï¼ˆå¦‚\"lh_bankssts\"ï¼‰ï¼Œå€¼ä¸ºæ•°å€¼</p> required <code>species</code> <code>str</code> <p>ç‰©ç§åç§°ï¼Œæ”¯æŒ\"human\"ã€\"chimpanzee\"ã€\"macaque\". Defaults to \"human\".</p> <code>'human'</code> <code>atlas</code> <code>str</code> <p>è„‘å›¾é›†åç§°ï¼Œæ ¹æ®ç‰©ç§ä¸åŒå¯é€‰ä¸åŒå›¾é›†ã€‚äººä¸ŠåŒ…æ‹¬\"glasser\"ã€\"bna\"ï¼Œé»‘çŒ©çŒ©ä¸ŠåŒ…æ‹¬\"bna\"ï¼ŒçŒ•çŒ´ä¸ŠåŒ…æ‹¬\"charm5\"ã€\"charm6\"ã€\"bna\"ä»¥åŠ\"d99\". Defaults to \"glasser\".</p> <code>'glasser'</code> <code>surf</code> <code>str</code> <p>å¤§è„‘çš®å±‚è¡¨é¢ç±»å‹ï¼Œå¦‚\"inflated\"ã€\"veryinflated\"ã€\"midthickness\"ç­‰. Defaults to \"veryinflated\".</p> <code>'veryinflated'</code> <code>ax</code> <code>Axes | None</code> <p>matplotlibçš„åæ ‡è½´å¯¹è±¡ï¼Œå¦‚æœä¸ºNoneåˆ™ä½¿ç”¨å½“å‰åæ ‡è½´. Defaults to None.</p> <code>None</code> <code>vmin</code> <code>Num | None</code> <p>é¢œè‰²æ˜ å°„çš„æœ€å°å€¼ï¼ŒNoneè¡¨ç¤ºä½¿ç”¨æ•°æ®ä¸­çš„æœ€å°å€¼. Defaults to None.</p> <code>None</code> <code>vmax</code> <code>Num | None</code> <p>é¢œè‰²æ˜ å°„çš„æœ€å¤§å€¼ï¼ŒNoneè¡¨ç¤ºä½¿ç”¨æ•°æ®ä¸­çš„æœ€å¤§å€¼. Defaults to None.</p> <code>None</code> <code>cmap</code> <code>str</code> <p>é¢œè‰²æ˜ å°„æ–¹æ¡ˆï¼Œå¦‚\"viridis\"ã€\"Blues\"ã€\"Reds\"ç­‰. Defaults to \"viridis\".</p> <code>'viridis'</code> <code>colorbar</code> <code>bool</code> <p>æ˜¯å¦æ˜¾ç¤ºé¢œè‰²æ¡. Defaults to True.</p> <code>True</code> <code>colorbar_location</code> <code>str</code> <p>é¢œè‰²æ¡ä½ç½®ï¼Œå¯é€‰\"left\"ã€\"right\"ã€\"top\"ã€\"bottom\". Defaults to \"right\".</p> <code>'right'</code> <code>colorbar_label_name</code> <code>str</code> <p>é¢œè‰²æ¡æ ‡ç­¾åç§°. Defaults to \"\".</p> <code>''</code> <code>colorbar_label_rotation</code> <code>int</code> <p>é¢œè‰²æ¡æ ‡ç­¾æ—‹è½¬è§’åº¦. Defaults to 0.</p> <code>0</code> <code>colorbar_decimals</code> <code>int</code> <p>é¢œè‰²æ¡åˆ»åº¦æ ‡ç­¾çš„å°æ•°ä½æ•°. Defaults to 1.</p> <code>1</code> <code>colorbar_fontsize</code> <code>int</code> <p>é¢œè‰²æ¡å­—ä½“å¤§å°. Defaults to 8.</p> <code>8</code> <code>colorbar_nticks</code> <code>int</code> <p>é¢œè‰²æ¡åˆ»åº¦æ•°é‡. Defaults to 2.</p> <code>2</code> <code>colorbar_shrink</code> <code>float</code> <p>é¢œè‰²æ¡æ”¶ç¼©æ¯”ä¾‹. Defaults to 0.15.</p> <code>0.15</code> <code>colorbar_aspect</code> <code>int</code> <p>é¢œè‰²æ¡å®½é«˜æ¯”. Defaults to 8.</p> <code>8</code> <code>colorbar_draw_border</code> <code>bool</code> <p>æ˜¯å¦ç»˜åˆ¶é¢œè‰²æ¡è¾¹æ¡†. Defaults to False.</p> <code>False</code> <code>title_name</code> <code>str</code> <p>å›¾å½¢æ ‡é¢˜. Defaults to \"\".</p> <code>''</code> <code>title_fontsize</code> <code>int</code> <p>æ ‡é¢˜å­—ä½“å¤§å°. Defaults to 12.</p> <code>12</code> <code>as_outline</code> <code>bool</code> <p>æ˜¯å¦ä»¥è½®å»“çº¿å½¢å¼æ˜¾ç¤º. Defaults to False.</p> <code>False</code> <p>Raises:</p> Type Description <code>ValueError</code> <p>å½“æŒ‡å®šçš„ç‰©ç§ä¸æ”¯æŒæ—¶æŠ›å‡º</p> <code>ValueError</code> <p>å½“æŒ‡å®šçš„å›¾é›†ä¸æ”¯æŒæ—¶æŠ›å‡º</p> <code>ValueError</code> <p>å½“æ•°æ®ä¸ºç©ºæ—¶æŠ›å‡º</p> <code>ValueError</code> <p>å½“vminå¤§äºvmaxæ—¶æŠ›å‡º</p> <p>Returns:</p> Name Type Description <code>Axes</code> <code>Axes</code> <p>åŒ…å«ç»˜åˆ¶å›¾åƒçš„matplotlibåæ ‡è½´å¯¹è±¡</p> Source code in <code>src/plotfig/brain_surface.py</code> <pre><code>def plot_brain_surface_figure(\n    data: Mapping[str, Num],\n    species: str = \"human\",\n    atlas: str = \"glasser\",\n    surf: str = \"veryinflated\",\n    ax: Axes | None = None,\n    vmin: Num | None = None,\n    vmax: Num | None = None,\n    cmap: str = \"viridis\",\n    colorbar: bool = True,\n    colorbar_location: str = \"right\",\n    colorbar_label_name: str = \"\",\n    colorbar_label_rotation: int = 0,\n    colorbar_decimals: int = 1,\n    colorbar_fontsize: int = 8,\n    colorbar_nticks: int = 2,\n    colorbar_shrink: float = 0.15,\n    colorbar_aspect: int = 8,\n    colorbar_draw_border: bool = False,\n    title_name: str = \"\",\n    title_fontsize: int = 12,\n    as_outline: bool = False,\n) -&gt; Axes: \n    \"\"\"åœ¨å¤§è„‘çš®å±‚è¡¨é¢ç»˜åˆ¶æ•°å€¼æ•°æ®çš„å‡½æ•°ã€‚\n\n    Args:\n        data (dict[str, float]): åŒ…å«è„‘åŒºåç§°å’Œå¯¹åº”æ•°å€¼çš„å­—å…¸ï¼Œé”®ä¸ºè„‘åŒºåç§°ï¼ˆå¦‚\"lh_bankssts\"ï¼‰ï¼Œå€¼ä¸ºæ•°å€¼\n        species (str, optional): ç‰©ç§åç§°ï¼Œæ”¯æŒ\"human\"ã€\"chimpanzee\"ã€\"macaque\". Defaults to \"human\".\n        atlas (str, optional): è„‘å›¾é›†åç§°ï¼Œæ ¹æ®ç‰©ç§ä¸åŒå¯é€‰ä¸åŒå›¾é›†ã€‚äººä¸ŠåŒ…æ‹¬\"glasser\"ã€\"bna\"ï¼Œé»‘çŒ©çŒ©ä¸ŠåŒ…æ‹¬\"bna\"ï¼ŒçŒ•çŒ´ä¸ŠåŒ…æ‹¬\"charm5\"ã€\"charm6\"ã€\"bna\"ä»¥åŠ\"d99\". Defaults to \"glasser\".\n        surf (str, optional): å¤§è„‘çš®å±‚è¡¨é¢ç±»å‹ï¼Œå¦‚\"inflated\"ã€\"veryinflated\"ã€\"midthickness\"ç­‰. Defaults to \"veryinflated\".\n        ax (Axes | None, optional): matplotlibçš„åæ ‡è½´å¯¹è±¡ï¼Œå¦‚æœä¸ºNoneåˆ™ä½¿ç”¨å½“å‰åæ ‡è½´. Defaults to None.\n        vmin (Num | None, optional): é¢œè‰²æ˜ å°„çš„æœ€å°å€¼ï¼ŒNoneè¡¨ç¤ºä½¿ç”¨æ•°æ®ä¸­çš„æœ€å°å€¼. Defaults to None.\n        vmax (Num | None, optional): é¢œè‰²æ˜ å°„çš„æœ€å¤§å€¼ï¼ŒNoneè¡¨ç¤ºä½¿ç”¨æ•°æ®ä¸­çš„æœ€å¤§å€¼. Defaults to None.\n        cmap (str, optional): é¢œè‰²æ˜ å°„æ–¹æ¡ˆï¼Œå¦‚\"viridis\"ã€\"Blues\"ã€\"Reds\"ç­‰. Defaults to \"viridis\".\n        colorbar (bool, optional): æ˜¯å¦æ˜¾ç¤ºé¢œè‰²æ¡. Defaults to True.\n        colorbar_location (str, optional): é¢œè‰²æ¡ä½ç½®ï¼Œå¯é€‰\"left\"ã€\"right\"ã€\"top\"ã€\"bottom\". Defaults to \"right\".\n        colorbar_label_name (str, optional): é¢œè‰²æ¡æ ‡ç­¾åç§°. Defaults to \"\".\n        colorbar_label_rotation (int, optional): é¢œè‰²æ¡æ ‡ç­¾æ—‹è½¬è§’åº¦. Defaults to 0.\n        colorbar_decimals (int, optional): é¢œè‰²æ¡åˆ»åº¦æ ‡ç­¾çš„å°æ•°ä½æ•°. Defaults to 1.\n        colorbar_fontsize (int, optional): é¢œè‰²æ¡å­—ä½“å¤§å°. Defaults to 8.\n        colorbar_nticks (int, optional): é¢œè‰²æ¡åˆ»åº¦æ•°é‡. Defaults to 2.\n        colorbar_shrink (float, optional): é¢œè‰²æ¡æ”¶ç¼©æ¯”ä¾‹. Defaults to 0.15.\n        colorbar_aspect (int, optional): é¢œè‰²æ¡å®½é«˜æ¯”. Defaults to 8.\n        colorbar_draw_border (bool, optional): æ˜¯å¦ç»˜åˆ¶é¢œè‰²æ¡è¾¹æ¡†. Defaults to False.\n        title_name (str, optional): å›¾å½¢æ ‡é¢˜. Defaults to \"\".\n        title_fontsize (int, optional): æ ‡é¢˜å­—ä½“å¤§å°. Defaults to 12.\n        as_outline (bool, optional): æ˜¯å¦ä»¥è½®å»“çº¿å½¢å¼æ˜¾ç¤º. Defaults to False.\n\n    Raises:\n        ValueError: å½“æŒ‡å®šçš„ç‰©ç§ä¸æ”¯æŒæ—¶æŠ›å‡º\n        ValueError: å½“æŒ‡å®šçš„å›¾é›†ä¸æ”¯æŒæ—¶æŠ›å‡º\n        ValueError: å½“æ•°æ®ä¸ºç©ºæ—¶æŠ›å‡º\n        ValueError: å½“vminå¤§äºvmaxæ—¶æŠ›å‡º\n\n    Returns:\n        Axes: åŒ…å«ç»˜åˆ¶å›¾åƒçš„matplotlibåæ ‡è½´å¯¹è±¡\n    \"\"\"\n    # è·å–æˆ–åˆ›å»ºåæ ‡è½´å¯¹è±¡\n    ax = ax or plt.gca()\n\n    # æå–æ‰€æœ‰æ•°å€¼ç”¨äºç¡®å®švminå’Œvmax\n    values = list(data.values())\n    if not values:\n        raise ValueError(\"data ä¸èƒ½ä¸ºç©º\")\n    vmin = min(values) if vmin is None else vmin\n    vmax = max(values) if vmax is None else vmax\n    if vmin == vmax:\n        vmin, vmax = min(0, vmin), max(0, vmax)\n    if vmin &gt; vmax:\n        raise ValueError(\"vminå¿…é¡»å°äºç­‰äºvmax\")\n\n    # è®¾ç½®æ•°æ®æ–‡ä»¶è·¯å¾„\n    # å®šä¹‰ä¸åŒç‰©ç§ã€è¡¨é¢ç±»å‹å’Œå›¾é›†çš„æ–‡ä»¶è·¯å¾„ä¿¡æ¯\n    atlas_info = {\n        \"human\": {\n            \"surf\": {\n                \"lh\": f\"surfaces/human_fsLR/tpl-fsLR_den-32k_hemi-L_{surf}.surf.gii\",\n                \"rh\": f\"surfaces/human_fsLR/tpl-fsLR_den-32k_hemi-R_{surf}.surf.gii\",\n            },\n            \"atlas\": {\n                \"glasser\": {\n                    \"lh\": \"atlases/human_Glasser/fsaverage.L.Glasser.32k_fs_LR.label.gii\",\n                    \"rh\": \"atlases/human_Glasser/fsaverage.R.Glasser.32k_fs_LR.label.gii\",\n                },\n                \"bna\": {\n                    \"lh\": \"atlases/human_BNA/fsaverage.L.BNA.32k_fs_LR.label.gii\",\n                    \"rh\": \"atlases/human_BNA/fsaverage.R.BNA.32k_fs_LR.label.gii\",\n                },\n            },\n            \"sulc\": {\n                \"lh\": \"surfaces/human_fsLR/100206.L.sulc.32k_fs_LR.shape.gii\",\n                \"rh\": \"surfaces/human_fsLR/100206.R.sulc.32k_fs_LR.shape.gii\",\n            }\n        },\n        \"chimpanzee\": {\n            \"surf\": {\n                \"lh\": f\"surfaces/chimpanzee_BNA/ChimpYerkes29_v1.2.L.{surf}.32k_fs_LR.surf.gii\",\n                \"rh\": f\"surfaces/chimpanzee_BNA/ChimpYerkes29_v1.2.R.{surf}.32k_fs_LR.surf.gii\",\n            },\n            \"atlas\": {\n                \"bna\": {\n                    \"lh\": \"atlases/chimpanzee_BNA/ChimpBNA.L.32k_fs_LR.label.gii\",\n                    \"rh\": \"atlases/chimpanzee_BNA/ChimpBNA.R.32k_fs_LR.label.gii\",\n                },\n            }\n        },\n        \"macaque\": {\n            \"surf\": {\n                \"lh\": f\"surfaces/macaque_BNA/civm.L.{surf}.32k_fs_LR.surf.gii\",\n                \"rh\": f\"surfaces/macaque_BNA/civm.R.{surf}.32k_fs_LR.surf.gii\",\n            },\n            \"atlas\": {\n                \"charm5\": {\n                    \"lh\": \"atlases/macaque_CHARM5/L.charm5.label.gii\",\n                    \"rh\": \"atlases/macaque_CHARM5/R.charm5.label.gii\",\n                },\n                \"charm6\": {\n                    \"lh\": \"atlases/macaque_CHARM6/L.charm6.label.gii\",\n                    \"rh\": \"atlases/macaque_CHARM6/R.charm6.label.gii\",\n                },\n                \"bna\": {\n                    \"lh\": \"atlases/macaque_BNA/MBNA_124_32k_L.label.gii\",\n                    \"rh\": \"atlases/macaque_BNA/MBNA_124_32k_R.label.gii\",\n                },\n                \"d99\": {\n                    \"lh\": \"atlases/macaque_D99/L.d99.label.gii\",\n                    \"rh\": \"atlases/macaque_D99/R.d99.label.gii\",\n                },\n            },\n            \"sulc\": {\n                \"lh\": \"surfaces/macaque_BNA/SC_06018.L.sulc.32k_fs_LR.shape.gii\",\n                \"rh\": \"surfaces/macaque_BNA/SC_06018.R.sulc.32k_fs_LR.shape.gii\",\n            }\n\n        }\n    }\n\n    # æ£€æŸ¥ç‰©ç§æ˜¯å¦æ”¯æŒ\n    if species not in atlas_info:\n        raise ValueError(f\"Unsupported species: {species}. Supported species are: {list(atlas_info.keys())}\")\n    else:\n        # æ£€æŸ¥æŒ‡å®šç‰©ç§çš„å›¾é›†æ˜¯å¦æ”¯æŒ\n        if atlas not in atlas_info[species][\"atlas\"]:\n            raise ValueError(f\"Unsupported {atlas} atlas for {species}\")\n\n    # åˆ›å»ºPlotå¯¹è±¡ï¼Œç”¨äºç»˜åˆ¶å¤§è„‘çš®å±‚\n    if surf != \"flat\":\n        p = Plot(\n            NEURODATA / atlas_info[species][\"surf\"][\"lh\"],\n            NEURODATA / atlas_info[species][\"surf\"][\"rh\"],\n        )\n    else:\n        # NOTE: ç›®å‰åªæœ‰äººå’ŒçŒ•çŒ´å…·æœ‰flat surfaceï¼Œæš‚æ—¶ä¸æ”¯æŒé»‘çŒ©çŒ©\n        p = Plot(\n            NEURODATA / atlas_info[species][\"surf\"][\"lh\"],\n            NEURODATA / atlas_info[species][\"surf\"][\"rh\"],\n            views=\"dorsal\",\n            zoom = 1.2,\n        )\n        lh_sulc_file = NEURODATA / atlas_info[species][\"sulc\"][\"lh\"]\n        rh_sulc_file = NEURODATA / atlas_info[species][\"sulc\"][\"rh\"]\n        p.add_layer(\n            {\n                \"left\": nib.load(lh_sulc_file).darrays[0].data,\n                \"right\": nib.load(rh_sulc_file).darrays[0].data,\n            },\n            cmap=\"Grays_r\",\n            cbar=False\n        )\n\n    # åˆ†ç¦»å·¦åŠçƒå’Œå³åŠçƒçš„æ•°æ®\n    hemisphere_data = {}\n    for hemi in [\"lh\", \"rh\"]:\n        hemi_data = {k: v for k, v in data.items() if k.startswith(f\"{hemi}_\")}\n        hemi_parc = _map_labels_to_values(\n            hemi_data, NEURODATA / atlas_info[species][\"atlas\"][atlas][hemi]\n        )\n        hemisphere_data[hemi] = hemi_parc\n\n    # ç”»å›¾\n    # colorbarå‚æ•°è®¾ç½®ï¼ˆç”¨åˆ—è¡¨ç»Ÿä¸€ç®¡ç†ï¼Œä¾¿äºç»´æŠ¤ï¼‰\n    colorbar_params = [\n        (\"location\", colorbar_location),\n        (\"label_direction\", colorbar_label_rotation),\n        (\"decimals\", colorbar_decimals),\n        (\"fontsize\", colorbar_fontsize),\n        (\"n_ticks\", colorbar_nticks),\n        (\"shrink\", colorbar_shrink),\n        (\"aspect\", colorbar_aspect),\n        (\"draw_border\", colorbar_draw_border),\n    ]\n    colorbar_kws = {k: v for k, v in colorbar_params}\n    # æ·»åŠ å›¾å±‚åˆ°ç»˜å›¾å¯¹è±¡\n    p.add_layer(\n        {\"left\": hemisphere_data[\"lh\"], \"right\": hemisphere_data[\"rh\"]},\n        cbar=colorbar,\n        cmap=cmap,\n        color_range=(vmin, vmax),\n        cbar_label=colorbar_label_name,\n        zero_transparent=False,\n        as_outline=as_outline,\n    )\n    # æ„å»ºåæ ‡è½´å¹¶åº”ç”¨é¢œè‰²æ¡è®¾ç½®\n    ax = p.build_axis(ax=ax, cbar_kws=colorbar_kws)\n    # è®¾ç½®å›¾å½¢æ ‡é¢˜\n    ax.set_title(title_name, fontsize=title_fontsize)\n\n    return ax\n</code></pre>","path":["API"],"tags":[]},{"location":"api/#plotfig.circos","level":2,"title":"circos","text":"<p>Functions:</p> Name Description <code>plot_circos_figure</code> <p>ç»˜åˆ¶è„‘è¿æ¥ç»„çš„ç¯å½¢å›¾ï¼ˆCircos plotï¼‰ã€‚</p>","path":["API"],"tags":[]},{"location":"api/#plotfig.circos.plot_circos_figure","level":3,"title":"plot_circos_figure","text":"<pre><code>plot_circos_figure(connectome: NDArray, ax: Axes | None = None, symmetric: bool = True, node_names: list[str] | None = None, node_colors: list[str] | None = None, node_space: float = 0.0, node_label_fontsize: int = 10, node_label_orientation: Literal['vertical', 'horizontal'] = 'horizontal', vmin: float | None = None, vmax: float | None = None, cmap: str | None = None, edge_color: str = 'red', edge_alpha: float = 1.0, colorbar: bool = True, colorbar_orientation: Literal['vertical', 'horizontal'] = 'vertical', colorbar_label: str = '') -&gt; Figure | PolarAxes\n</code></pre> <p>ç»˜åˆ¶è„‘è¿æ¥ç»„çš„ç¯å½¢å›¾ï¼ˆCircos plotï¼‰ã€‚</p> <p>Parameters:</p> Name Type Description Default <code>connectome</code> <code>NDArray</code> <p>è„‘è¿æ¥çŸ©é˜µï¼Œå¿…é¡»ä¸ºå¯¹ç§°æ–¹é˜µã€‚å½¢çŠ¶ä¸º(n, n)ï¼Œå…¶ä¸­nä¸ºè„‘åŒºæ•°é‡</p> required <code>ax</code> <code>Axes | None</code> <p>matplotlibçš„æåæ ‡è½´å¯¹è±¡ï¼Œå¦‚æœæä¾›åˆ™åœ¨æ­¤è½´ä¸Šç»˜å›¾ã€‚é»˜è®¤ä¸ºNone</p> <code>None</code> <code>symmetric</code> <code>bool</code> <p>æ˜¯å¦ä¸ºå¯¹ç§°å¸ƒå±€ï¼ˆç”¨äºå·¦å³è„‘åŠçƒæ•°æ®ï¼‰ã€‚é»˜è®¤ä¸ºTrue</p> <code>True</code> <code>node_names</code> <code>list[str] | None</code> <p>è„‘åŒºåç§°åˆ—è¡¨ï¼Œé•¿åº¦åº”ä¸connectomeçš„ç»´åº¦ä¸€è‡´ã€‚é»˜è®¤ä¸ºNoneæ—¶è‡ªåŠ¨ç”Ÿæˆ\"Node_1\", \"Node_2\"...æ ¼å¼çš„åç§°</p> <code>None</code> <code>node_colors</code> <code>list[str] | None</code> <p>è„‘åŒºé¢œè‰²åˆ—è¡¨ï¼Œé•¿åº¦åº”ä¸è„‘åŒºæ•°é‡ä¸€è‡´ã€‚é»˜è®¤ä¸ºNoneæ—¶è‡ªåŠ¨ç”Ÿæˆé¢œè‰²</p> <code>None</code> <code>node_space</code> <code>float</code> <p>è„‘åŒºé—´é—´éš”è§’åº¦ï¼ˆåº¦ï¼‰ã€‚é»˜è®¤ä¸º0.0</p> <code>0.0</code> <code>node_label_fontsize</code> <code>int</code> <p>è„‘åŒºæ ‡ç­¾å­—ä½“å¤§å°ã€‚é»˜è®¤ä¸º10</p> <code>10</code> <code>node_label_orientation</code> <code>Literal['vertical', 'horizontal']</code> <p>è„‘åŒºæ ‡ç­¾æ–¹å‘ã€‚é»˜è®¤ä¸º\"horizontal\"</p> <code>'horizontal'</code> <code>vmin</code> <code>float | None</code> <p>è¿æ¥å¼ºåº¦é¢œè‰²æ˜ å°„çš„æœ€å°å€¼ã€‚é»˜è®¤ä¸ºNoneæ—¶æ ¹æ®æ•°æ®è‡ªåŠ¨ç¡®å®š</p> <code>None</code> <code>vmax</code> <code>float | None</code> <p>è¿æ¥å¼ºåº¦é¢œè‰²æ˜ å°„çš„æœ€å¤§å€¼ã€‚é»˜è®¤ä¸ºNoneæ—¶æ ¹æ®æ•°æ®è‡ªåŠ¨ç¡®å®š</p> <code>None</code> <code>cmap</code> <code>str | None</code> <p>é¢œè‰²æ˜ å°„è¡¨åç§°ã€‚é»˜è®¤ä¸ºNoneæ—¶æ ¹æ®edge_colorç”Ÿæˆ</p> <code>None</code> <code>edge_color</code> <code>str</code> <p>è¿çº¿é¢œè‰²ï¼Œå½“cmapä¸ºNoneæ—¶ä½¿ç”¨æ­¤é¢œè‰²ç”Ÿæˆé¢œè‰²æ˜ å°„ã€‚é»˜è®¤ä¸º\"red\"</p> <code>'red'</code> <code>edge_alpha</code> <code>float</code> <p>è¿çº¿é€æ˜åº¦ï¼ŒèŒƒå›´0-1ã€‚é»˜è®¤ä¸º1.0ï¼ˆä¸é€æ˜ï¼‰</p> <code>1.0</code> <code>colorbar</code> <code>bool</code> <p>æ˜¯å¦æ˜¾ç¤ºé¢œè‰²æ¡ã€‚é»˜è®¤ä¸ºTrue</p> <code>True</code> <code>colorbar_orientation</code> <code>Literal['vertical', 'horizontal']</code> <p>é¢œè‰²æ¡æ–¹å‘ã€‚é»˜è®¤ä¸º\"vertical\"</p> <code>'vertical'</code> <code>colorbar_label</code> <code>str</code> <p>é¢œè‰²æ¡æ ‡ç­¾æ–‡æœ¬ã€‚é»˜è®¤ä¸ºç©ºå­—ç¬¦ä¸²</p> <code>''</code> <p>Raises:</p> Type Description <code>ValueError</code> <p>å½“connectomeä¸æ˜¯å¯¹ç§°çŸ©é˜µæ—¶æŠ›å‡º</p> <code>ValueError</code> <p>å½“vminå¤§äºvmaxæ—¶æŠ›å‡º</p> <code>TypeError</code> <p>å½“æä¾›çš„axä¸æ˜¯PolarAxesç±»å‹æ—¶æŠ›å‡º</p> <p>Returns:</p> Type Description <code>Figure | PolarAxes</code> <p>Figure | Axes: å¦‚æœaxä¸ºNoneåˆ™è¿”å›Figureå¯¹è±¡ï¼Œå¦åˆ™è¿”å›Axeså¯¹è±¡</p> Source code in <code>src/plotfig/circos.py</code> <pre><code>def plot_circos_figure(\n    connectome: NDArray,\n    ax: Axes | None = None,\n    symmetric: bool = True,\n    node_names: list[str] | None = None,\n    node_colors: list[str] | None = None,\n    node_space: float = 0.0,\n    node_label_fontsize: int = 10,\n    node_label_orientation: Literal[\"vertical\", \"horizontal\"] = \"horizontal\",\n    vmin: float | None = None,\n    vmax: float | None = None,\n    cmap: str | None = None,\n    edge_color: str = \"red\",\n    edge_alpha: float = 1.0,\n    colorbar: bool = True,\n    colorbar_orientation: Literal[\"vertical\", \"horizontal\"] = \"vertical\",\n    colorbar_label: str = \"\",\n) -&gt; Figure | PolarAxes:\n    \"\"\"ç»˜åˆ¶è„‘è¿æ¥ç»„çš„ç¯å½¢å›¾ï¼ˆCircos plotï¼‰ã€‚\n\n    Args:\n        connectome (NDArray): è„‘è¿æ¥çŸ©é˜µï¼Œå¿…é¡»ä¸ºå¯¹ç§°æ–¹é˜µã€‚å½¢çŠ¶ä¸º(n, n)ï¼Œå…¶ä¸­nä¸ºè„‘åŒºæ•°é‡\n        ax (Axes | None, optional): matplotlibçš„æåæ ‡è½´å¯¹è±¡ï¼Œå¦‚æœæä¾›åˆ™åœ¨æ­¤è½´ä¸Šç»˜å›¾ã€‚é»˜è®¤ä¸ºNone\n        symmetric (bool, optional): æ˜¯å¦ä¸ºå¯¹ç§°å¸ƒå±€ï¼ˆç”¨äºå·¦å³è„‘åŠçƒæ•°æ®ï¼‰ã€‚é»˜è®¤ä¸ºTrue\n        node_names (list[str] | None, optional): è„‘åŒºåç§°åˆ—è¡¨ï¼Œé•¿åº¦åº”ä¸connectomeçš„ç»´åº¦ä¸€è‡´ã€‚é»˜è®¤ä¸ºNoneæ—¶è‡ªåŠ¨ç”Ÿæˆ\"Node_1\", \"Node_2\"...æ ¼å¼çš„åç§°\n        node_colors (list[str] | None, optional): è„‘åŒºé¢œè‰²åˆ—è¡¨ï¼Œé•¿åº¦åº”ä¸è„‘åŒºæ•°é‡ä¸€è‡´ã€‚é»˜è®¤ä¸ºNoneæ—¶è‡ªåŠ¨ç”Ÿæˆé¢œè‰²\n        node_space (float, optional): è„‘åŒºé—´é—´éš”è§’åº¦ï¼ˆåº¦ï¼‰ã€‚é»˜è®¤ä¸º0.0\n        node_label_fontsize (int, optional): è„‘åŒºæ ‡ç­¾å­—ä½“å¤§å°ã€‚é»˜è®¤ä¸º10\n        node_label_orientation (Literal[\"vertical\", \"horizontal\"], optional): è„‘åŒºæ ‡ç­¾æ–¹å‘ã€‚é»˜è®¤ä¸º\"horizontal\"\n        vmin (float | None, optional): è¿æ¥å¼ºåº¦é¢œè‰²æ˜ å°„çš„æœ€å°å€¼ã€‚é»˜è®¤ä¸ºNoneæ—¶æ ¹æ®æ•°æ®è‡ªåŠ¨ç¡®å®š\n        vmax (float | None, optional): è¿æ¥å¼ºåº¦é¢œè‰²æ˜ å°„çš„æœ€å¤§å€¼ã€‚é»˜è®¤ä¸ºNoneæ—¶æ ¹æ®æ•°æ®è‡ªåŠ¨ç¡®å®š\n        cmap (str | None, optional): é¢œè‰²æ˜ å°„è¡¨åç§°ã€‚é»˜è®¤ä¸ºNoneæ—¶æ ¹æ®edge_colorç”Ÿæˆ\n        edge_color (str, optional): è¿çº¿é¢œè‰²ï¼Œå½“cmapä¸ºNoneæ—¶ä½¿ç”¨æ­¤é¢œè‰²ç”Ÿæˆé¢œè‰²æ˜ å°„ã€‚é»˜è®¤ä¸º\"red\"\n        edge_alpha (float, optional): è¿çº¿é€æ˜åº¦ï¼ŒèŒƒå›´0-1ã€‚é»˜è®¤ä¸º1.0ï¼ˆä¸é€æ˜ï¼‰\n        colorbar (bool, optional): æ˜¯å¦æ˜¾ç¤ºé¢œè‰²æ¡ã€‚é»˜è®¤ä¸ºTrue\n        colorbar_orientation (Literal[\"vertical\", \"horizontal\"], optional): é¢œè‰²æ¡æ–¹å‘ã€‚é»˜è®¤ä¸º\"vertical\"\n        colorbar_label (str, optional): é¢œè‰²æ¡æ ‡ç­¾æ–‡æœ¬ã€‚é»˜è®¤ä¸ºç©ºå­—ç¬¦ä¸²\n\n    Raises:\n        ValueError: å½“connectomeä¸æ˜¯å¯¹ç§°çŸ©é˜µæ—¶æŠ›å‡º\n        ValueError: å½“vminå¤§äºvmaxæ—¶æŠ›å‡º\n        TypeError: å½“æä¾›çš„axä¸æ˜¯PolarAxesç±»å‹æ—¶æŠ›å‡º\n\n    Returns:\n        Figure | Axes: å¦‚æœaxä¸ºNoneåˆ™è¿”å›Figureå¯¹è±¡ï¼Œå¦åˆ™è¿”å›Axeså¯¹è±¡\n    \"\"\"\n\n    # æ£€æŸ¥è¾“å…¥çŸ©é˜µï¼ŒæŒ‡å®šcmap\n    if not is_symmetric_square(connectome):\n        raise ValueError(\"connectome ä¸æ˜¯å¯¹ç§°çŸ©é˜µ\")\n    if np.all(connectome == 0):\n        logger.warning(\"connectome çŸ©é˜µæ‰€æœ‰å…ƒç´ å‡ä¸º0ï¼Œå¯èƒ½æ²¡æœ‰æœ‰æ•ˆè¿æ¥æ•°æ®\")\n        vmax = float(0 if vmax is None else vmax)\n        vmin = float(0 if vmin is None else vmin)\n        colormap = gen_cmap(edge_color) if cmap is None else plt.get_cmap(cmap)\n    elif np.any(connectome &lt; 0):\n        logger.warning(\n            \"ç”±äº connectome å­˜åœ¨è´Ÿå€¼ï¼Œè¿çº¿é¢œè‰²æ— æ³•è‡ªå®šä¹‰ï¼Œåªèƒ½æ­£å€¼æ˜¾ç¤ºçº¢è‰²ï¼Œè´Ÿå€¼æ˜¾ç¤ºè“è‰²\"\n        )\n        max_strength = np.abs(connectome[connectome != 0]).max()\n        vmax = float(max_strength if vmax is None else vmax)\n        vmin = float(-max_strength if vmin is None else vmin)\n        colormap = plt.get_cmap(\"bwr\")\n    else:\n        vmin = float(connectome.min() if vmin is None else vmin)\n        vmax = float(connectome.max() if vmax is None else vmax)\n        colormap = gen_cmap(edge_color) if cmap is None else plt.get_cmap(cmap)\n    if vmin &gt; vmax:\n        raise ValueError(f\"ç›®å‰{vmin=}ï¼Œè€Œ{vmax=}ã€‚ä½†æ˜¯vminä¸å¾—å¤§äºvmaxï¼Œè¯·æ£€æŸ¥æ•°æ®\")\n    norm = mcolors.Normalize(vmin=vmin, vmax=vmax)\n\n    # è·å–æ•°æ®ä¿¡æ¯\n    node_num = connectome.shape[0]\n    node_names = _gen_node_name(connectome) if node_names is None else node_names\n\n    # ç”±äºpycirclizeçš„ç‰¹æ€§ï¼Œsectoré¡ºåºåªèƒ½ä¸ºé¡ºæ—¶é’ˆï¼Œå› æ­¤éœ€è¦å°†æ•°æ®è¿›è¡Œç¿»è½¬\n    connectome = np.flip(connectome)\n    node_names = node_names[::-1]\n    if symmetric:\n        # ç”»å¯¹ç§°å›¾éœ€é¢å¤–åšåŠçƒç¿»è½¬å¤„ç†\n        node_colors = (\n            gen_hex_colors(int(node_num / 2)) * 2\n            if node_colors is None\n            else node_colors[::-1]\n        )\n        connectome, node_names, node_colors = _process_sym(\n            connectome, node_names, node_colors\n        )\n        sectors = _gen_sym_sectors(node_names)\n    else:\n        node_colors = (\n            gen_hex_colors(node_num) if node_colors is None else node_colors[::-1]\n        )\n        sectors = {node_name: 1 for node_name in node_names}\n\n    edges = _gen_edges(connectome)\n    name2color = {\n        node_name: node_color for node_name, node_color in zip(node_names, node_colors)\n    }\n    circos = Circos(sectors, space=node_space)\n\n    # è®¾ç½®æ‰‡åŒº\n    for sector in circos.sectors:\n        if sector.name.startswith(\"_gap\"):\n            continue\n        sector.text(sector.name, size=node_label_fontsize, orientation=node_label_orientation)\n        track = sector.add_track((95, 100))\n        track.axis(fc=name2color[sector.name])\n\n    # è®¾ç½®è¿æ¥\n    for edge in edges:\n        color = value_to_hex(edge[2], colormap, norm)\n        circos.link(\n            (node_names[edge[0]], 0.45, 0.55),\n            (node_names[edge[1]], 0.55, 0.45),\n            color=color,\n            alpha=edge_alpha,\n        )\n\n    # colorbar\n    if colorbar:\n        if colorbar_orientation == \"vertical\":\n            orientation = \"vertical\"\n            bounds = (1.1, 0.29, 0.02, 0.4)\n            label_kws = dict(size=12, rotation=270, labelpad=20)\n        else:\n            orientation = \"horizontal\"\n            bounds = (0.3, -0.1, 0.4, 0.03)\n            label_kws = dict(size=12)\n        circos.colorbar(\n            bounds=bounds,\n            orientation=orientation,\n            vmin=vmin,\n            vmax=vmax,\n            cmap=colormap,\n            label=colorbar_label,\n            label_kws=label_kws,\n            tick_kws=dict(labelsize=12),\n        )\n\n    # ç”»å›¾\n    if ax is None:\n        fig = circos.plotfig()\n        return fig\n    else:\n        if isinstance(ax, PolarAxes):\n            circos.plotfig(ax=ax)\n            return ax\n        else:\n            raise ValueError(\"ax ä¸æ˜¯ PolarAxes ç±»å‹\")\n</code></pre>","path":["API"],"tags":[]},{"location":"api/#plotfig.brain_connection","level":2,"title":"brain_connection","text":"<p>Functions:</p> Name Description <code>batch_crop_images</code> <p>æ‰¹é‡è£å‰ªæŒ‡å®šç›®å½•ä¸‹çš„å›¾åƒæ–‡ä»¶ã€‚</p> <code>create_gif_from_images</code> <p>ä»æŒ‡å®šæ–‡ä»¶å¤¹ä¸­çš„å›¾ç‰‡ç”Ÿæˆ GIF æ–‡ä»¶ã€‚</p> <code>plot_brain_connection_figure</code> <p>ç»˜åˆ¶å¤§è„‘è¿æ¥å›¾ï¼Œä¿å­˜åœ¨æŒ‡å®šçš„htmlæ–‡ä»¶ä¸­ã€‚</p> <code>save_brain_connection_frames</code> <p>ç”Ÿæˆä¸åŒè§’åº¦çš„é™æ€å›¾ç‰‡å¸§ï¼Œå¯ç”¨äºåˆ¶ä½œæ—‹è½¬å¤§è„‘è¿æ¥å›¾çš„ GIFã€‚</p>","path":["API"],"tags":[]},{"location":"api/#plotfig.brain_connection.batch_crop_images","level":3,"title":"batch_crop_images","text":"<pre><code>batch_crop_images(directory_path: Path, suffix: str = '_cropped', left_frac: float = 0.25, top_frac: float = 0.25, right_frac: float = 0.25, bottom_frac: float = 0.25)\n</code></pre> <p>æ‰¹é‡è£å‰ªæŒ‡å®šç›®å½•ä¸‹çš„å›¾åƒæ–‡ä»¶ã€‚</p> <p>Parameters:</p> Name Type Description Default <code>directory_path</code> <code>Path</code> <p>å›¾åƒæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•è·¯å¾„ã€‚</p> required <code>suffix</code> <code>str</code> <p>æ–°æ–‡ä»¶ååç¼€ã€‚é»˜è®¤ä¸º \"_cropped\"ã€‚</p> <code>'_cropped'</code> <code>left_frac</code> <code>float</code> <p>å·¦ä¾§è£å‰ªæ¯”ä¾‹ï¼ˆ0-1ï¼‰ã€‚é»˜è®¤ä¸º 0.2ã€‚</p> <code>0.25</code> <code>top_frac</code> <code>float</code> <p>ä¸Šä¾§è£å‰ªæ¯”ä¾‹ï¼ˆ0-1ï¼‰ã€‚é»˜è®¤ä¸º 0.15ã€‚</p> <code>0.25</code> <code>right_frac</code> <code>float</code> <p>å³ä¾§è£å‰ªæ¯”ä¾‹ï¼ˆ0-1ï¼‰ã€‚é»˜è®¤ä¸º 0.2ã€‚</p> <code>0.25</code> <code>bottom_frac</code> <code>float</code> <p>ä¸‹ä¾§è£å‰ªæ¯”ä¾‹ï¼ˆ0-1ï¼‰ã€‚é»˜è®¤ä¸º 0.15ã€‚</p> <code>0.25</code> Notes <p>æ”¯æŒå¸¸è§å›¾åƒæ ¼å¼ (PNG, JPG, JPEG, BMP, TIFF)ã€‚ è£å‰ªåçš„å›¾åƒå°†ä¿å­˜åœ¨åŸç›®å½•ä¸­ï¼Œå¹¶æ·»åŠ æŒ‡å®šåç¼€ï¼ŒåŸå›¾åƒä¿æŒä¸å˜ã€‚ æ‰€æœ‰è£å‰ªå‡åŸºäºå›¾åƒå°ºå¯¸çš„ç™¾åˆ†æ¯”è®¡ç®—ï¼Œæ— ç»å¯¹åƒç´ å€¼ã€‚</p> Source code in <code>src/plotfig/brain_connection.py</code> <pre><code>def batch_crop_images(\n    directory_path: Path,\n    suffix: str = \"_cropped\",\n    left_frac: float = 0.25,\n    top_frac: float = 0.25,\n    right_frac: float = 0.25,\n    bottom_frac: float = 0.25,\n):\n    \"\"\"\n    æ‰¹é‡è£å‰ªæŒ‡å®šç›®å½•ä¸‹çš„å›¾åƒæ–‡ä»¶ã€‚\n\n    Args:\n        directory_path (Path): å›¾åƒæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•è·¯å¾„ã€‚\n        suffix (str, optional): æ–°æ–‡ä»¶ååç¼€ã€‚é»˜è®¤ä¸º \"_cropped\"ã€‚\n        left_frac (float, optional): å·¦ä¾§è£å‰ªæ¯”ä¾‹ï¼ˆ0-1ï¼‰ã€‚é»˜è®¤ä¸º 0.2ã€‚\n        top_frac (float, optional): ä¸Šä¾§è£å‰ªæ¯”ä¾‹ï¼ˆ0-1ï¼‰ã€‚é»˜è®¤ä¸º 0.15ã€‚\n        right_frac (float, optional): å³ä¾§è£å‰ªæ¯”ä¾‹ï¼ˆ0-1ï¼‰ã€‚é»˜è®¤ä¸º 0.2ã€‚\n        bottom_frac (float, optional): ä¸‹ä¾§è£å‰ªæ¯”ä¾‹ï¼ˆ0-1ï¼‰ã€‚é»˜è®¤ä¸º 0.15ã€‚\n\n    Notes:\n        æ”¯æŒå¸¸è§å›¾åƒæ ¼å¼ (PNG, JPG, JPEG, BMP, TIFF)ã€‚\n        è£å‰ªåçš„å›¾åƒå°†ä¿å­˜åœ¨åŸç›®å½•ä¸­ï¼Œå¹¶æ·»åŠ æŒ‡å®šåç¼€ï¼ŒåŸå›¾åƒä¿æŒä¸å˜ã€‚\n        æ‰€æœ‰è£å‰ªå‡åŸºäºå›¾åƒå°ºå¯¸çš„ç™¾åˆ†æ¯”è®¡ç®—ï¼Œæ— ç»å¯¹åƒç´ å€¼ã€‚\n    \"\"\"\n    supported_extensions = {\".png\", \".jpg\", \".jpeg\", \".bmp\", \".tiff\", \".tif\"}\n\n    for image_path in directory_path.rglob(\"*\"):\n        if (\n            not image_path.is_file()\n            or image_path.suffix.lower() not in supported_extensions\n        ):\n            continue\n\n        new_file_name = image_path.stem + suffix + image_path.suffix\n\n        try:\n            figure = Image.open(image_path)\n            width, height = figure.size\n            print(f\"å›¾åƒå®½åº¦ï¼š{width}ï¼Œé«˜åº¦ï¼š{height}\")\n\n            left = int(width * left_frac)\n            right = int(width * (1 - right_frac))\n            top = int(height * top_frac)\n            bottom = int(height * (1 - bottom_frac))\n\n            # è£åˆ‡å›¾åƒ\n            cropped_fig = figure.crop((left, top, right, bottom))\n            # ä¿å­˜è£åˆ‡åçš„å›¾åƒ\n            cropped_fig.save(image_path.parent / new_file_name)\n\n            figure.close()\n            cropped_fig.close()\n        except Exception as e:\n            print(f\"å¤„ç†æ–‡ä»¶ {image_path.name} æ—¶å‡ºé”™: {e}\")\n</code></pre>","path":["API"],"tags":[]},{"location":"api/#plotfig.brain_connection.create_gif_from_images","level":3,"title":"create_gif_from_images","text":"<pre><code>create_gif_from_images(folder_path: str | Path, output_name: str = 'output.gif', fps: int = 10) -&gt; None\n</code></pre> <p>ä»æŒ‡å®šæ–‡ä»¶å¤¹ä¸­çš„å›¾ç‰‡ç”Ÿæˆ GIF æ–‡ä»¶ã€‚</p> <p>Parameters:</p> Name Type Description Default <code>folder_path</code> <code>str | Path</code> <p>å›¾ç‰‡æ‰€åœ¨æ–‡ä»¶å¤¹è·¯å¾„</p> required <code>output_name</code> <code>str</code> <p>è¾“å‡º GIF æ–‡ä»¶åï¼Œé»˜è®¤ä¸º \"output.gif\"</p> <code>'output.gif'</code> <code>fps</code> <code>int</code> <p>GIF å¸§ç‡ï¼Œé»˜è®¤ä¸º 10</p> <code>10</code> Source code in <code>src/plotfig/brain_connection.py</code> <pre><code>def create_gif_from_images(\n    folder_path: str | Path,\n    output_name: str = \"output.gif\",\n    fps: int = 10,\n) -&gt; None:\n    \"\"\"\n    ä»æŒ‡å®šæ–‡ä»¶å¤¹ä¸­çš„å›¾ç‰‡ç”Ÿæˆ GIF æ–‡ä»¶ã€‚\n\n    Args:\n        folder_path (str | Path): å›¾ç‰‡æ‰€åœ¨æ–‡ä»¶å¤¹è·¯å¾„\n        output_name (str, optional): è¾“å‡º GIF æ–‡ä»¶åï¼Œé»˜è®¤ä¸º \"output.gif\"\n        fps (int, optional): GIF å¸§ç‡ï¼Œé»˜è®¤ä¸º 10\n    \"\"\"\n    folder = Path(folder_path)\n    if not folder.exists() or not folder.is_dir():\n        raise ValueError(f\"{folder} ä¸æ˜¯æœ‰æ•ˆçš„æ–‡ä»¶å¤¹è·¯å¾„ã€‚\")\n\n    # è·å–æ–‡ä»¶å¤¹ä¸‹æŒ‡å®šæ‰©å±•åçš„æ–‡ä»¶ï¼Œå¹¶æ’åº\n    extensions = (\".png\", \".jpg\", \".jpeg\")\n    figures_path = sorted(\n        [f for f in folder.iterdir() if f.suffix.lower() in extensions]\n    )\n\n    if not figures_path:\n        raise ValueError(f\"æ–‡ä»¶å¤¹ {folder} ä¸­æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆ {extensions} çš„å›¾ç‰‡æ–‡ä»¶ã€‚\")\n\n    figures = [Image.open(f) for f in figures_path]\n\n    # è¾“å‡º GIF è·¯å¾„\n    output_path = folder / output_name\n\n    # åˆ›å»º GIF\n    with imageio.get_writer(output_path, mode=\"I\", fps=fps, loop=0) as writer:\n        for figure in figures:\n            writer.append_data(figure.convert(\"RGB\"))\n\n    logger.info(f\"GIF å·²ä¿å­˜åˆ°: {output_path}\")\n</code></pre>","path":["API"],"tags":[]},{"location":"api/#plotfig.brain_connection.plot_brain_connection_figure","level":3,"title":"plot_brain_connection_figure","text":"<pre><code>plot_brain_connection_figure(connectome: NDArray, lh_surfgii_file: str | Path, rh_surfgii_file: str | Path, niigz_file: str | Path, output_file: str | Path | None = None, show_all_nodes: bool = False, nodes_size: Sequence[Num] | NDArray | None = None, nodes_name: list[str] | None = None, nodes_color: list[str] | None = None, scale_method: Literal['', 'width', 'color', 'width_color', 'color_width'] = '', line_width: Num = 10, line_color: str = 'red') -&gt; Figure\n</code></pre> <p>ç»˜åˆ¶å¤§è„‘è¿æ¥å›¾ï¼Œä¿å­˜åœ¨æŒ‡å®šçš„htmlæ–‡ä»¶ä¸­ã€‚</p> <p>Parameters:</p> Name Type Description Default <code>connectome</code> <code>NDArray</code> <p>å¤§è„‘è¿æ¥çŸ©é˜µï¼Œå½¢çŠ¶ä¸º (n, n)ï¼Œå…¶ä¸­ n æ˜¯è„‘åŒºæ•°é‡ã€‚ çŸ©é˜µä¸­çš„å€¼è¡¨ç¤ºè„‘åŒºä¹‹é—´çš„è¿æ¥å¼ºåº¦ï¼Œæ­£å€¼è¡¨ç¤ºæ­£ç›¸å…³è¿æ¥ï¼Œè´Ÿå€¼è¡¨ç¤ºè´Ÿç›¸å…³è¿æ¥ï¼Œ0è¡¨ç¤ºæ— è¿æ¥ã€‚</p> required <code>lh_surfgii_file</code> <code>str | Path</code> <p>å·¦åŠè„‘è¡¨é¢å‡ ä½•æ–‡ä»¶è·¯å¾„ (.surf.gii æ ¼å¼)ï¼Œç”¨äºç»˜åˆ¶å·¦åŠè„‘è¡¨é¢</p> required <code>rh_surfgii_file</code> <code>str | Path</code> <p>å³åŠè„‘è¡¨é¢å‡ ä½•æ–‡ä»¶è·¯å¾„ (.surf.gii æ ¼å¼)ï¼Œç”¨äºç»˜åˆ¶å³åŠè„‘è¡¨é¢</p> required <code>niigz_file</code> <code>str | Path</code> <p>NIfTIæ ¼å¼çš„è„‘åŒºå›¾è°±æ–‡ä»¶è·¯å¾„ (.nii.gz æ ¼å¼)ï¼Œç”¨äºå®šä½è„‘åŒºèŠ‚ç‚¹çš„ä¸‰ç»´åæ ‡</p> required <code>output_file</code> <code>str | Path | None</code> <p>è¾“å‡ºHTMLæ–‡ä»¶è·¯å¾„ã€‚å¦‚æœæœªæŒ‡å®šï¼Œåˆ™ä½¿ç”¨å½“å‰æ—¶é—´æˆ³ç”Ÿæˆæ–‡ä»¶åã€‚é»˜è®¤ä¸ºNone</p> <code>None</code> <code>show_all_nodes</code> <code>bool</code> <p>æ˜¯å¦æ˜¾ç¤ºæ‰€æœ‰è„‘åŒºèŠ‚ç‚¹ã€‚å¦‚æœä¸ºFalseï¼Œåˆ™åªæ˜¾ç¤ºæœ‰è¿æ¥çš„èŠ‚ç‚¹ã€‚é»˜è®¤ä¸ºFalse</p> <code>False</code> <code>nodes_size</code> <code>Sequence[Num] | NDArray | None</code> <p>æ¯ä¸ªèŠ‚ç‚¹çš„å¤§å°ï¼Œé•¿åº¦åº”ä¸è„‘åŒºæ•°é‡ä¸€è‡´ã€‚é»˜è®¤ä¸ºNoneï¼Œå³æ‰€æœ‰èŠ‚ç‚¹å¤§å°ä¸º5</p> <code>None</code> <code>nodes_name</code> <code>list[str] | None</code> <p>æ¯ä¸ªèŠ‚ç‚¹çš„åç§°æ ‡ç­¾ï¼Œé•¿åº¦åº”ä¸è„‘åŒºæ•°é‡ä¸€è‡´ã€‚é»˜è®¤ä¸ºNoneï¼Œå³ä¸æ˜¾ç¤ºåç§°</p> <code>None</code> <code>nodes_color</code> <code>list[str] | None</code> <p>æ¯ä¸ªèŠ‚ç‚¹çš„é¢œè‰²ï¼Œé•¿åº¦åº”ä¸è„‘åŒºæ•°é‡ä¸€è‡´ã€‚é»˜è®¤ä¸ºNoneï¼Œå³æ‰€æœ‰èŠ‚ç‚¹ä¸ºç™½è‰²</p> <code>None</code> <code>scale_method</code> <code>Literal['', 'width', 'color', 'width_color', 'color_width']</code> <p>è¿æ¥çº¿çš„ç¼©æ”¾æ–¹æ³•: - \"\" : æ‰€æœ‰è¿æ¥çº¿å®½åº¦å’Œé¢œè‰²å›ºå®š - \"width\" : æ ¹æ®è¿æ¥å¼ºåº¦è°ƒæ•´çº¿å®½ï¼Œæ­£è¿æ¥ä¸ºçº¢è‰²ï¼Œè´Ÿè¿æ¥ä¸ºè“è‰² - \"color\" : æ ¹æ®è¿æ¥å¼ºåº¦è°ƒæ•´é¢œè‰²(ä½¿ç”¨è“ç™½çº¢é¢œè‰²æ˜ å°„)ï¼Œçº¿å®½å›ºå®š - \"width_color\" or \"color_width\" : åŒæ—¶æ ¹æ®è¿æ¥å¼ºåº¦è°ƒæ•´çº¿å®½å’Œé¢œè‰² é»˜è®¤ä¸º \"\"</p> <code>''</code> <code>line_width</code> <code>Num</code> <p>è¿æ¥çº¿çš„åŸºæœ¬å®½åº¦ã€‚å½“scale_methodåŒ…å«\"width\"æ—¶ï¼Œæ­¤å€¼ä½œä¸ºæœ€å¤§å®½åº¦å‚è€ƒã€‚é»˜è®¤ä¸º10</p> <code>10</code> <code>line_color</code> <code>str</code> <p>è¿æ¥çº¿çš„åŸºæœ¬é¢œè‰²ã€‚å½“scale_methodä¸åŒ…å«\"color\"æ—¶ç”Ÿæ•ˆã€‚é»˜è®¤ä¸º\"#ff0000\"(çº¢è‰²)</p> <code>'red'</code> <p>Returns:</p> Type Description <code>Figure</code> <p>go.Figure: Plotlyå›¾å½¢å¯¹è±¡ï¼ŒåŒ…å«ç»˜åˆ¶çš„å¤§è„‘è¿æ¥å›¾</p> Source code in <code>src/plotfig/brain_connection.py</code> <pre><code>def plot_brain_connection_figure(\n    connectome: npt.NDArray,\n    lh_surfgii_file: str | Path,\n    rh_surfgii_file: str | Path,\n    niigz_file: str | Path,\n    output_file: str | Path | None = None,\n    show_all_nodes: bool = False,\n    nodes_size: Sequence[Num] | npt.NDArray | None = None,\n    nodes_name: list[str] | None = None,\n    nodes_color: list[str] | None = None,\n    scale_method: Literal[\"\", \"width\", \"color\", \"width_color\", \"color_width\"] = \"\",\n    line_width: Num = 10,\n    line_color: str = \"red\",\n) -&gt; go.Figure:\n    \"\"\"ç»˜åˆ¶å¤§è„‘è¿æ¥å›¾ï¼Œä¿å­˜åœ¨æŒ‡å®šçš„htmlæ–‡ä»¶ä¸­ã€‚\n\n    Args:\n        connectome (npt.NDArray):\n            å¤§è„‘è¿æ¥çŸ©é˜µï¼Œå½¢çŠ¶ä¸º (n, n)ï¼Œå…¶ä¸­ n æ˜¯è„‘åŒºæ•°é‡ã€‚\n            çŸ©é˜µä¸­çš„å€¼è¡¨ç¤ºè„‘åŒºä¹‹é—´çš„è¿æ¥å¼ºåº¦ï¼Œæ­£å€¼è¡¨ç¤ºæ­£ç›¸å…³è¿æ¥ï¼Œè´Ÿå€¼è¡¨ç¤ºè´Ÿç›¸å…³è¿æ¥ï¼Œ0è¡¨ç¤ºæ— è¿æ¥ã€‚\n        lh_surfgii_file (str | Path):\n            å·¦åŠè„‘è¡¨é¢å‡ ä½•æ–‡ä»¶è·¯å¾„ (.surf.gii æ ¼å¼)ï¼Œç”¨äºç»˜åˆ¶å·¦åŠè„‘è¡¨é¢\n        rh_surfgii_file (str | Path):\n            å³åŠè„‘è¡¨é¢å‡ ä½•æ–‡ä»¶è·¯å¾„ (.surf.gii æ ¼å¼)ï¼Œç”¨äºç»˜åˆ¶å³åŠè„‘è¡¨é¢\n        niigz_file (str | Path):\n            NIfTIæ ¼å¼çš„è„‘åŒºå›¾è°±æ–‡ä»¶è·¯å¾„ (.nii.gz æ ¼å¼)ï¼Œç”¨äºå®šä½è„‘åŒºèŠ‚ç‚¹çš„ä¸‰ç»´åæ ‡\n        output_file (str | Path | None, optional):\n            è¾“å‡ºHTMLæ–‡ä»¶è·¯å¾„ã€‚å¦‚æœæœªæŒ‡å®šï¼Œåˆ™ä½¿ç”¨å½“å‰æ—¶é—´æˆ³ç”Ÿæˆæ–‡ä»¶åã€‚é»˜è®¤ä¸ºNone\n        show_all_nodes (bool, optional):\n            æ˜¯å¦æ˜¾ç¤ºæ‰€æœ‰è„‘åŒºèŠ‚ç‚¹ã€‚å¦‚æœä¸ºFalseï¼Œåˆ™åªæ˜¾ç¤ºæœ‰è¿æ¥çš„èŠ‚ç‚¹ã€‚é»˜è®¤ä¸ºFalse\n        nodes_size (Sequence[Num] | npt.NDArray | None, optional):\n            æ¯ä¸ªèŠ‚ç‚¹çš„å¤§å°ï¼Œé•¿åº¦åº”ä¸è„‘åŒºæ•°é‡ä¸€è‡´ã€‚é»˜è®¤ä¸ºNoneï¼Œå³æ‰€æœ‰èŠ‚ç‚¹å¤§å°ä¸º5\n        nodes_name (list[str] | None, optional):\n            æ¯ä¸ªèŠ‚ç‚¹çš„åç§°æ ‡ç­¾ï¼Œé•¿åº¦åº”ä¸è„‘åŒºæ•°é‡ä¸€è‡´ã€‚é»˜è®¤ä¸ºNoneï¼Œå³ä¸æ˜¾ç¤ºåç§°\n        nodes_color (list[str] | None, optional):\n            æ¯ä¸ªèŠ‚ç‚¹çš„é¢œè‰²ï¼Œé•¿åº¦åº”ä¸è„‘åŒºæ•°é‡ä¸€è‡´ã€‚é»˜è®¤ä¸ºNoneï¼Œå³æ‰€æœ‰èŠ‚ç‚¹ä¸ºç™½è‰²\n        scale_method (Literal[\"\", \"width\", \"color\", \"width_color\", \"color_width\"], optional):\n            è¿æ¥çº¿çš„ç¼©æ”¾æ–¹æ³•:\n            - \"\" : æ‰€æœ‰è¿æ¥çº¿å®½åº¦å’Œé¢œè‰²å›ºå®š\n            - \"width\" : æ ¹æ®è¿æ¥å¼ºåº¦è°ƒæ•´çº¿å®½ï¼Œæ­£è¿æ¥ä¸ºçº¢è‰²ï¼Œè´Ÿè¿æ¥ä¸ºè“è‰²\n            - \"color\" : æ ¹æ®è¿æ¥å¼ºåº¦è°ƒæ•´é¢œè‰²(ä½¿ç”¨è“ç™½çº¢é¢œè‰²æ˜ å°„)ï¼Œçº¿å®½å›ºå®š\n            - \"width_color\" or \"color_width\" : åŒæ—¶æ ¹æ®è¿æ¥å¼ºåº¦è°ƒæ•´çº¿å®½å’Œé¢œè‰²\n            é»˜è®¤ä¸º \"\"\n        line_width (Num, optional):\n            è¿æ¥çº¿çš„åŸºæœ¬å®½åº¦ã€‚å½“scale_methodåŒ…å«\"width\"æ—¶ï¼Œæ­¤å€¼ä½œä¸ºæœ€å¤§å®½åº¦å‚è€ƒã€‚é»˜è®¤ä¸º10\n        line_color (str, optional):\n            è¿æ¥çº¿çš„åŸºæœ¬é¢œè‰²ã€‚å½“scale_methodä¸åŒ…å«\"color\"æ—¶ç”Ÿæ•ˆã€‚é»˜è®¤ä¸º\"#ff0000\"(çº¢è‰²)\n\n    Returns:\n        go.Figure: Plotlyå›¾å½¢å¯¹è±¡ï¼ŒåŒ…å«ç»˜åˆ¶çš„å¤§è„‘è¿æ¥å›¾\n    \"\"\"\n    _validate_connectome(connectome)\n\n    if np.any(connectome &lt; 0):\n        logger.warning(\n            \"ç”±äº connectome å­˜åœ¨è´Ÿå€¼ï¼Œè¿çº¿é¢œè‰²æ— æ³•è‡ªå®šä¹‰ï¼Œåªèƒ½æ­£å€¼æ˜¾ç¤ºçº¢è‰²ï¼Œè´Ÿå€¼æ˜¾ç¤ºè“è‰²\"\n        )\n        line_color = \"#ff0000\"\n\n    nodes_num = connectome.shape[0]\n    nodes_name = nodes_name or [\"\"] * nodes_num\n    nodes_color = nodes_color or [\"white\"] * nodes_num\n    nodes_size = nodes_size or [5] * nodes_num\n\n    if output_file is None:\n        timestamp = datetime.datetime.now().strftime(\"%Y-%m-%d_%H-%M-%S\")\n        output_file = Path(f\"{timestamp}.html\")\n        logger.info(f\"æœªæŒ‡å®šä¿å­˜è·¯å¾„ï¼Œé»˜è®¤ä¿å­˜åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„{output_file}ä¸­ã€‚\")\n\n    node_indices = _get_node_indices(connectome, show_all_nodes)\n    vertices_L, faces_L = _load_surface(lh_surfgii_file)\n    vertices_R, faces_R = _load_surface(rh_surfgii_file)\n\n    mesh_L = _create_mesh(vertices_L, faces_L, \"Left Hemisphere\")\n    mesh_R = _create_mesh(vertices_R, faces_R, \"Right Hemisphere\")\n\n    fig = go.Figure(data=[mesh_L, mesh_R])\n\n    centroids_real = _get_centroids_real(niigz_file)\n    _add_nodes_to_fig(\n        fig, centroids_real, node_indices, nodes_name, nodes_size, nodes_color\n    )\n    _add_edges_to_fig(\n        fig,\n        connectome,\n        centroids_real,\n        nodes_name,\n        scale_method,\n        line_width,\n        line_color,\n    )\n    _finalize_figure(fig)\n\n    fig.write_html(output_file)\n    return fig\n</code></pre>","path":["API"],"tags":[]},{"location":"api/#plotfig.brain_connection.save_brain_connection_frames","level":3,"title":"save_brain_connection_frames","text":"<pre><code>save_brain_connection_frames(fig: Figure, output_dir: str | Path, n_frames: int = 36) -&gt; None\n</code></pre> <p>ç”Ÿæˆä¸åŒè§’åº¦çš„é™æ€å›¾ç‰‡å¸§ï¼Œå¯ç”¨äºåˆ¶ä½œæ—‹è½¬å¤§è„‘è¿æ¥å›¾çš„ GIFã€‚</p> <p>Parameters:</p> Name Type Description Default <code>fig</code> <code>Figure</code> <p>Plotly çš„ Figure å¯¹è±¡ï¼ŒåŒ…å«å¤§è„‘è¡¨é¢å’Œè¿æ¥å›¾ã€‚</p> required <code>output_dir</code> <code>str</code> <p>å›¾ç‰‡ä¿å­˜çš„æ–‡ä»¶å¤¹è·¯å¾„ï¼Œè‹¥æ–‡ä»¶å¤¹ä¸å­˜åœ¨åˆ™è‡ªåŠ¨åˆ›å»ºã€‚</p> required <code>n_frames</code> <code>int</code> <p>æ—‹è½¬å¸§çš„æ•°é‡ã€‚é»˜è®¤ 36ï¼Œå³æ¯ 10 åº¦ä¸€å¸§ã€‚</p> <code>36</code> Source code in <code>src/plotfig/brain_connection.py</code> <pre><code>def save_brain_connection_frames(\n    fig: go.Figure, output_dir: str | Path, n_frames: int = 36\n) -&gt; None:\n    \"\"\"\n    ç”Ÿæˆä¸åŒè§’åº¦çš„é™æ€å›¾ç‰‡å¸§ï¼Œå¯ç”¨äºåˆ¶ä½œæ—‹è½¬å¤§è„‘è¿æ¥å›¾çš„ GIFã€‚\n\n    Args:\n        fig (go.Figure): Plotly çš„ Figure å¯¹è±¡ï¼ŒåŒ…å«å¤§è„‘è¡¨é¢å’Œè¿æ¥å›¾ã€‚\n        output_dir (str): å›¾ç‰‡ä¿å­˜çš„æ–‡ä»¶å¤¹è·¯å¾„ï¼Œè‹¥æ–‡ä»¶å¤¹ä¸å­˜åœ¨åˆ™è‡ªåŠ¨åˆ›å»ºã€‚\n        n_frames (int, optional): æ—‹è½¬å¸§çš„æ•°é‡ã€‚é»˜è®¤ 36ï¼Œå³æ¯ 10 åº¦ä¸€å¸§ã€‚\n    \"\"\"\n    Path(output_dir).mkdir(parents=True, exist_ok=True)\n    angles = np.linspace(0, 360, n_frames, endpoint=False)\n    for i, angle in tqdm(enumerate(angles), total=len(angles)):\n        camera = dict(\n            eye=dict(\n                x=2 * np.cos(np.radians(angle)), y=2 * np.sin(np.radians(angle)), z=0.7\n            )\n        )\n        fig.update_layout(scene_camera=camera)\n        pio.write_image(fig, f\"{output_dir}/frame_{i:03d}.png\", width=800, height=800)\n    logger.info(f\"ä¿å­˜äº† {n_frames} å¼ å›¾ç‰‡åœ¨ {output_dir}\")\n</code></pre>","path":["API"],"tags":[]},{"location":"api/#plotfig.utils","level":2,"title":"utils","text":"<p>Modules:</p> Name Description <code>color</code> <code>matrix</code> <p>Functions:</p> Name Description <code>gen_cmap</code> <p>ç”Ÿæˆä¸€ä¸ªä»ç™½è‰²åˆ°æŒ‡å®šé¢œè‰²çš„çº¿æ€§æ¸å˜è‰²å›¾ã€‚</p> <code>gen_hex_colors</code> <p>ç”Ÿæˆ n ä¸ªéšæœºçš„åå…­è¿›åˆ¶é¢œè‰²å­—ç¬¦ä¸²ã€‚</p> <code>gen_symmetric_matrix</code> <p>ç”Ÿæˆä¸€ä¸ªå¯¹ç§°æ–¹é˜µï¼Œå¯ä»¥æŒ‡å®šå…ƒç´ èŒƒå›´å’Œç¨€ç–åº¦ã€‚</p> <code>is_symmetric_square</code> <p>åˆ¤æ–­ä¸€ä¸ªçŸ©é˜µæ˜¯å¦ä¸ºå¯¹ç§°æ–¹é˜µã€‚</p> <code>value_to_hex</code> <p>æ ¹æ®æ•°å€¼ã€è‰²å›¾å’Œå½’ä¸€åŒ–å¯¹è±¡ï¼Œå°†æ•°å€¼æ˜ å°„ä¸ºåå…­è¿›åˆ¶é¢œè‰²å­—ç¬¦ä¸²ã€‚</p>","path":["API"],"tags":[]},{"location":"api/#plotfig.utils.gen_cmap","level":3,"title":"gen_cmap","text":"<pre><code>gen_cmap(color: str = 'red') -&gt; Colormap\n</code></pre> <p>ç”Ÿæˆä¸€ä¸ªä»ç™½è‰²åˆ°æŒ‡å®šé¢œè‰²çš„çº¿æ€§æ¸å˜è‰²å›¾ã€‚</p> <p>Parameters:</p> Name Type Description Default <code>color</code> <code>str</code> <p>æ¸å˜çš„ç›®æ ‡é¢œè‰²ï¼Œé»˜è®¤ä¸º \"red\"ã€‚</p> <code>'red'</code> <p>Returns:</p> Name Type Description <code>Colormap</code> <code>Colormap</code> <p>çº¿æ€§æ¸å˜çš„è‰²å›¾å¯¹è±¡ã€‚</p> Source code in <code>src/plotfig/utils/color.py</code> <pre><code>def gen_cmap(color: str = \"red\") -&gt; Colormap:\n    \"\"\"\n    ç”Ÿæˆä¸€ä¸ªä»ç™½è‰²åˆ°æŒ‡å®šé¢œè‰²çš„çº¿æ€§æ¸å˜è‰²å›¾ã€‚\n\n    Args:\n        color (str, optional): æ¸å˜çš„ç›®æ ‡é¢œè‰²ï¼Œé»˜è®¤ä¸º \"red\"ã€‚\n\n    Returns:\n        Colormap: çº¿æ€§æ¸å˜çš„è‰²å›¾å¯¹è±¡ã€‚\n    \"\"\"\n\n    cmap = LinearSegmentedColormap.from_list(\"white_to_color\", [\"white\", color])\n    return cmap\n</code></pre>","path":["API"],"tags":[]},{"location":"api/#plotfig.utils.gen_hex_colors","level":3,"title":"gen_hex_colors","text":"<pre><code>gen_hex_colors(n: int, seed: int = 42) -&gt; list[str]\n</code></pre> <p>ç”Ÿæˆ n ä¸ªéšæœºçš„åå…­è¿›åˆ¶é¢œè‰²å­—ç¬¦ä¸²ã€‚</p> <p>Parameters:</p> Name Type Description Default <code>n</code> <code>int</code> <p>éœ€è¦ç”Ÿæˆçš„é¢œè‰²æ•°é‡ã€‚</p> required <code>seed</code> <code>int</code> <p>éšæœºç§å­ï¼Œé»˜è®¤ä¸º 42ã€‚</p> <code>42</code> <p>Returns:</p> Type Description <code>list[str]</code> <p>list[str]: åŒ…å« n ä¸ªåå…­è¿›åˆ¶é¢œè‰²å­—ç¬¦ä¸²çš„åˆ—è¡¨ã€‚</p> Source code in <code>src/plotfig/utils/color.py</code> <pre><code>def gen_hex_colors(n: int, seed: int = 42) -&gt; list[str]:\n    \"\"\"\n    ç”Ÿæˆ n ä¸ªéšæœºçš„åå…­è¿›åˆ¶é¢œè‰²å­—ç¬¦ä¸²ã€‚\n\n    Args:\n        n (int): éœ€è¦ç”Ÿæˆçš„é¢œè‰²æ•°é‡ã€‚\n        seed (int, optional): éšæœºç§å­ï¼Œé»˜è®¤ä¸º 42ã€‚\n\n    Returns:\n        list[str]: åŒ…å« n ä¸ªåå…­è¿›åˆ¶é¢œè‰²å­—ç¬¦ä¸²çš„åˆ—è¡¨ã€‚\n    \"\"\"\n\n    RNG = np.random.default_rng(seed=seed)\n    rgb = RNG.integers(0, 256, size=(n, 3))  # nÃ—3 çš„æ•´æ•°çŸ©é˜µ\n    colors = [f\"#{r:02x}{g:02x}{b:02x}\" for r, g, b in rgb]\n    return colors\n</code></pre>","path":["API"],"tags":[]},{"location":"api/#plotfig.utils.gen_symmetric_matrix","level":3,"title":"gen_symmetric_matrix","text":"<pre><code>gen_symmetric_matrix(n, mode='nonneg', sparsity: float = 1.0, seed: int = 42) -&gt; NDArray\n</code></pre> <p>ç”Ÿæˆä¸€ä¸ªå¯¹ç§°æ–¹é˜µï¼Œå¯ä»¥æŒ‡å®šå…ƒç´ èŒƒå›´å’Œç¨€ç–åº¦ã€‚</p> <p>Parameters:</p> Name Type Description Default <code>n</code> <code>int</code> <p>æ–¹é˜µçš„ç»´åº¦ã€‚</p> required <code>mode</code> <code>str</code> <p>å…ƒç´ ç±»å‹ï¼Œ\"nonneg\" è¡¨ç¤ºéè´Ÿï¼Œ\"all\" è¡¨ç¤ºå¯ä¸ºè´Ÿã€‚é»˜è®¤ä¸º \"nonneg\"ã€‚</p> <code>'nonneg'</code> <code>sparsity</code> <code>float</code> <p>ç¨€ç–åº¦ï¼Œå–å€¼èŒƒå›´ [0, 1]ï¼Œ1 è¡¨ç¤ºå…¨å¯†é›†ï¼Œ0 è¡¨ç¤ºå…¨é›¶ã€‚é»˜è®¤ä¸º 1.0ã€‚</p> <code>1.0</code> <code>seed</code> <code>int</code> <p>éšæœºç§å­ï¼Œé»˜è®¤ä¸º 42ã€‚</p> <code>42</code> <p>Raises:</p> Type Description <code>ValueError</code> <p>å¦‚æœ mode ä¸æ˜¯ \"nonneg\" æˆ– \"all\"ã€‚</p> <p>Returns:</p> Name Type Description <code>NDArray</code> <code>NDArray</code> <p>ç”Ÿæˆçš„å¯¹ç§°æ–¹é˜µã€‚</p> Source code in <code>src/plotfig/utils/matrix.py</code> <pre><code>def gen_symmetric_matrix(\n    n, mode=\"nonneg\", sparsity: float = 1.0, seed: int = 42\n) -&gt; NDArray:\n    \"\"\"\n    ç”Ÿæˆä¸€ä¸ªå¯¹ç§°æ–¹é˜µï¼Œå¯ä»¥æŒ‡å®šå…ƒç´ èŒƒå›´å’Œç¨€ç–åº¦ã€‚\n\n    Args:\n        n (int): æ–¹é˜µçš„ç»´åº¦ã€‚\n        mode (str, optional): å…ƒç´ ç±»å‹ï¼Œ\"nonneg\" è¡¨ç¤ºéè´Ÿï¼Œ\"all\" è¡¨ç¤ºå¯ä¸ºè´Ÿã€‚é»˜è®¤ä¸º \"nonneg\"ã€‚\n        sparsity (float, optional): ç¨€ç–åº¦ï¼Œå–å€¼èŒƒå›´ [0, 1]ï¼Œ1 è¡¨ç¤ºå…¨å¯†é›†ï¼Œ0 è¡¨ç¤ºå…¨é›¶ã€‚é»˜è®¤ä¸º 1.0ã€‚\n        seed (int, optional): éšæœºç§å­ï¼Œé»˜è®¤ä¸º 42ã€‚\n\n    Raises:\n        ValueError: å¦‚æœ mode ä¸æ˜¯ \"nonneg\" æˆ– \"all\"ã€‚\n\n    Returns:\n        NDArray: ç”Ÿæˆçš„å¯¹ç§°æ–¹é˜µã€‚\n    \"\"\"\n    # åˆ›å»ºéšæœºæ•°ç”Ÿæˆå™¨\n    RNG = np.random.default_rng(seed=seed)\n    # ç”Ÿæˆæƒé‡çŸ©é˜µä¸Šä¸‰è§’\n    if mode == \"nonneg\":\n        upper = np.triu(RNG.random((n, n)), k=1)\n    elif mode == \"all\":\n        upper = np.triu(RNG.uniform(-1, 1, size=(n, n)), k=1)\n    else:\n        raise ValueError(\"mode must be 'nonneg' or 'all'\")\n    # ç¨€ç–åŒ–ï¼šéšæœºç”Ÿæˆmask\n    if sparsity &lt; 1.0:\n        mask = RNG.random((n, n)) &lt; sparsity\n        mask = np.triu(mask, k=1)  # ä¸Šä¸‰è§’mask\n        upper *= mask\n    # æ„é€ å¯¹ç§°çŸ©é˜µ\n    mat = upper + upper.T\n    np.fill_diagonal(mat, 0.0)\n    return mat\n</code></pre>","path":["API"],"tags":[]},{"location":"api/#plotfig.utils.is_symmetric_square","level":3,"title":"is_symmetric_square","text":"<pre><code>is_symmetric_square(matrix: NDArray, tol: float = 1e-08) -&gt; bool\n</code></pre> <p>åˆ¤æ–­ä¸€ä¸ªçŸ©é˜µæ˜¯å¦ä¸ºå¯¹ç§°æ–¹é˜µã€‚</p> <p>Parameters:</p> Name Type Description Default <code>matrix</code> <code>NDArray</code> <p>å¾…åˆ¤æ–­çš„çŸ©é˜µã€‚</p> required <code>tol</code> <code>float</code> <p>åˆ¤æ–­å¯¹ç§°æ€§çš„å®¹å·®ï¼Œé»˜è®¤ä¸º 1e-8ã€‚</p> <code>1e-08</code> <p>Returns:</p> Name Type Description <code>bool</code> <code>bool</code> <p>å¦‚æœæ˜¯å¯¹ç§°æ–¹é˜µåˆ™è¿”å› Trueï¼Œå¦åˆ™è¿”å› Falseã€‚</p> Source code in <code>src/plotfig/utils/matrix.py</code> <pre><code>def is_symmetric_square(matrix: NDArray, tol: float = 1e-8) -&gt; bool:\n    \"\"\"\n    åˆ¤æ–­ä¸€ä¸ªçŸ©é˜µæ˜¯å¦ä¸ºå¯¹ç§°æ–¹é˜µã€‚\n\n    Args:\n        matrix (NDArray): å¾…åˆ¤æ–­çš„çŸ©é˜µã€‚\n        tol (float, optional): åˆ¤æ–­å¯¹ç§°æ€§çš„å®¹å·®ï¼Œé»˜è®¤ä¸º 1e-8ã€‚\n\n    Returns:\n        bool: å¦‚æœæ˜¯å¯¹ç§°æ–¹é˜µåˆ™è¿”å› Trueï¼Œå¦åˆ™è¿”å› Falseã€‚\n    \"\"\"\n    # 1. æ£€æŸ¥æ˜¯å¦ä¸ºæ–¹é˜µ\n    if matrix.ndim != 2 or matrix.shape[0] != matrix.shape[1]:\n        return False\n\n    # 2. æ£€æŸ¥æ˜¯å¦å¯¹ç§°\n    return np.allclose(matrix, matrix.T, atol=tol)\n</code></pre>","path":["API"],"tags":[]},{"location":"api/#plotfig.utils.value_to_hex","level":3,"title":"value_to_hex","text":"<pre><code>value_to_hex(value: float, cmap: Colormap, norm: Normalize) -&gt; str\n</code></pre> <p>æ ¹æ®æ•°å€¼ã€è‰²å›¾å’Œå½’ä¸€åŒ–å¯¹è±¡ï¼Œå°†æ•°å€¼æ˜ å°„ä¸ºåå…­è¿›åˆ¶é¢œè‰²å­—ç¬¦ä¸²ã€‚</p> <p>Parameters:</p> Name Type Description Default <code>value</code> <code>float</code> <p>éœ€è¦æ˜ å°„çš„æ•°å€¼ã€‚</p> required <code>cmap</code> <code>Colormap</code> <p>ç”¨äºæ˜ å°„çš„è‰²å›¾å¯¹è±¡ã€‚</p> required <code>norm</code> <code>Normalize</code> <p>ç”¨äºå½’ä¸€åŒ–çš„å¯¹è±¡ã€‚</p> required <p>Returns:</p> Name Type Description <code>str</code> <code>str</code> <p>æ˜ å°„å¾—åˆ°çš„åå…­è¿›åˆ¶é¢œè‰²å­—ç¬¦ä¸²ã€‚</p> Source code in <code>src/plotfig/utils/color.py</code> <pre><code>def value_to_hex(value: float, cmap: Colormap, norm: Normalize) -&gt; str:\n    \"\"\"\n    æ ¹æ®æ•°å€¼ã€è‰²å›¾å’Œå½’ä¸€åŒ–å¯¹è±¡ï¼Œå°†æ•°å€¼æ˜ å°„ä¸ºåå…­è¿›åˆ¶é¢œè‰²å­—ç¬¦ä¸²ã€‚\n\n    Args:\n        value (float): éœ€è¦æ˜ å°„çš„æ•°å€¼ã€‚\n        cmap (Colormap): ç”¨äºæ˜ å°„çš„è‰²å›¾å¯¹è±¡ã€‚\n        norm (Normalize): ç”¨äºå½’ä¸€åŒ–çš„å¯¹è±¡ã€‚\n\n    Returns:\n        str: æ˜ å°„å¾—åˆ°çš„åå…­è¿›åˆ¶é¢œè‰²å­—ç¬¦ä¸²ã€‚\n    \"\"\"\n\n    rgba = cmap(norm(value))  # å¾—åˆ° RGBA\n    return mcolors.to_hex(rgba)\n</code></pre>","path":["API"],"tags":[]},{"location":"usage/brain_connectivity/","level":1,"title":"è„‘è¿æ¥å›¾","text":"<p>é€æ˜çš„å¤§è„‘å›¾ï¼Œå¯ä»¥å±•ç¤ºè„‘åŒºé—´çš„è¿æ¥å…³ç³»ã€‚ éœ€è¦å‡†å¤‡å·¦å³åŠè„‘çš„surfaceæ–‡ä»¶ã€è„‘åŒºç›¸å…³çš„nii.gzæ–‡ä»¶ä»¥åŠè¿æ¥çŸ©é˜µã€‚</p>","path":["ä½¿ç”¨","è„‘è¿æ¥å›¾"],"tags":[]},{"location":"usage/brain_connectivity/#_2","level":2,"title":"å¿«é€Ÿå‡ºå›¾","text":"<p>å…¨éƒ¨å‚æ•°è§<code>plot_brain_connection_figure</code>çš„ API æ–‡æ¡£ã€‚</p> <pre><code>from plotfig import plot_brain_connection_figure, gen_symmetric_matrix\n\n\n# ç”Ÿæˆéšæœºçš„è¿æ¥çŸ©é˜µ\nconnectome = gen_symmetric_matrix(31, sparsity=0.1, seed=42)\n\n# å·¦å³è„‘surfaceæ–‡ä»¶ä»¥åŠç½‘ç»œèŠ‚ç‚¹æ–‡ä»¶éœ€è‡ªè¡Œæä¾›\nlh_surfgii_file = r\"example_data/103818.L.midthickness.32k_fs_LR.surf.gii\"\nrh_surfgii_file = r\"example_data/103818.R.midthickness.32k_fs_LR.surf.gii\"\nniigz_file = r\"example_data/network.nii.gz\"\n\n# htmlæ–‡ä»¶è¾“å‡ºä½ç½®\noutput_file = \"example_data/brain_connection.html\"\n\nfig = plot_brain_connection_figure(\n    connectome,\n    lh_surfgii_file=lh_surfgii_file,\n    rh_surfgii_file=rh_surfgii_file,\n    niigz_file=niigz_file,\n    output_file=output_file,\n    scale_method=\"width\",\n    line_width=10,\n    nodes_name=[f\"ROI_{i}\" for i in range(connectome.shape[0])],\n)\n</code></pre>","path":["ä½¿ç”¨","è„‘è¿æ¥å›¾"],"tags":[]},{"location":"usage/brain_connectivity/#_3","level":2,"title":"ç»“æœå±•ç¤º","text":"<p>htmlæ–‡ä»¶å¯ä»¥åœ¨æµè§ˆå™¨ä¸­äº¤äº’ã€‚å¯ä»¥æ‰‹åŠ¨æˆªå›¾ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æ‰¹é‡ç”Ÿæˆå¤šè§†è§’ç”Ÿæˆå›¾ç‰‡ã€‚</p> <pre><code>from pathlib import Path\nfrom plotfig import save_brain_connection_frames\n\n\n# æ–°å»ºæ–‡ä»¶å¤¹ä¿å­˜å¸§å›¾\nPath(f\"./example_data/brain_connection_figures\").mkdir(parents=True, exist_ok=True)\nsave_brain_connection_frames(\n    fig,\n    output_dir=rf\"./example_data/brain_connection_figures\",\n    n_frames=36\n)\n</code></pre> <pre><code>100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 36/36 [01:55&lt;00:00,  3.19s/it]\n2025-11-24 11:02:55.867 | INFO     | plotfig.brain_connection:save_brain_connection_frames:323 - ä¿å­˜äº† 36 å¼ å›¾ç‰‡åœ¨ ./example_data/brain_connection_figures\n</code></pre> <p>plotfig æä¾›äº†å°†å›¾ç‰‡åºåˆ—æ•´åˆç”Ÿæˆ GIF åŠ¨ç”»çš„å·¥å…·å‡½æ•°ã€‚</p> <pre><code>from pathlib import Path\nfrom plotfig import create_gif_from_images\n\ncreate_gif_from_images(\n    Path(\"example_data/brain_connection_figures\"),\n    output_name=\"output.gif\"\n)\n</code></pre> <pre><code>2025-11-24 11:07:46.885 | INFO     | plotfig.brain_connection:create_gif_from_images:417 - GIF å·²ä¿å­˜åˆ°: example_data\\brain_connection_figures\\outpug.gif\n</code></pre>","path":["ä½¿ç”¨","è„‘è¿æ¥å›¾"],"tags":[]},{"location":"usage/brain_surface/","level":1,"title":"è„‘åŒºå›¾","text":"<p>è„‘åŒºå›¾æ˜¯ä¸€ç§ç”¨äºåœ¨å¤§è„‘çš®å±‚è¡¨é¢å¯è§†åŒ–æ•°å€¼æ•°æ®çš„å›¾è¡¨ã€‚ å®ƒèƒ½å¤Ÿå°†ä¸åŒè„‘åŒºçš„æ•°å€¼æ˜ å°„åˆ°å¤§è„‘çš®å±‚çš„ç›¸åº”åŒºåŸŸï¼Œå¹¶ä»¥é¢œè‰²ç¼–ç çš„æ–¹å¼å±•ç¤ºè¿™äº›æ•°å€¼çš„åˆ†å¸ƒæƒ…å†µã€‚ è¿™ç§å›¾è¡¨å¸¸ç”¨äºå±•ç¤ºç¥ç»ç§‘å­¦ç ”ç©¶ä¸­çš„å„ç§è„‘åŒºæŒ‡æ ‡ï¼Œå¦‚BOLDä¿¡å·å¼ºåº¦ã€é«“é˜åŒ–ç¨‹åº¦ã€ä½“ç§¯æˆ–åšåº¦æˆ–å…¶ä»–æ•°å€¼åŒ–çš„å¤§è„‘ç‰¹å¾ã€‚</p> <p><code>plot_brain_surface_figure</code> å‡½æ•°åŸºäº <code>surfplot</code> åº“å¼€å‘ï¼Œæä¾›äº†ä¸€ä¸ªç»Ÿä¸€ä¸”ç®€åŒ–çš„æ¥å£æ¥ç»˜åˆ¶äººè„‘ã€çŒ•çŒ´è„‘å’Œé»‘çŒ©çŒ©è„‘çš„è„‘åŒºå›¾ã€‚ ç›®å‰æ”¯æŒå¤šç§è„‘å›¾è°±åŒ…æ‹¬ï¼š</p> <ol> <li>äºº Glasser (HCP-MMP) å›¾é›†<sup>1</sup>ã€‚å›¾é›† CSV æ–‡ä»¶ã€‚</li> <li>äºº BNA å›¾é›†<sup>2</sup>ã€‚å›¾é›† CSV æ–‡ä»¶ã€‚</li> <li>é»‘çŒ©çŒ© BNA å›¾é›†<sup>3</sup>ã€‚å›¾é›† CSV æ–‡ä»¶ã€‚</li> <li>çŒ•çŒ´ CHARM 5-level <sup>4</sup>ã€‚å›¾é›† CSV æ–‡ä»¶ã€‚</li> <li>çŒ•çŒ´ CHARM 6-level <sup>4</sup>ã€‚å›¾é›† CSV æ–‡ä»¶ã€‚</li> <li>çŒ•çŒ´ BNA å›¾é›†<sup>5</sup>ã€‚å›¾é›† CSV æ–‡ä»¶ã€‚</li> <li>çŒ•çŒ´ D99 å›¾é›†<sup>6</sup>ã€‚å›¾é›† CSV æ–‡ä»¶ã€‚</li> </ol>","path":["ä½¿ç”¨","è„‘åŒºå›¾"],"tags":[]},{"location":"usage/brain_surface/#_2","level":2,"title":"å¿«é€Ÿå‡ºå›¾","text":"<p>Info</p> <p>ç”»å›¾å‰è¯·ç¡®ä¿è„‘åŒºåå­—æ­£ç¡®ã€‚</p> <pre><code>from plotfig import plot_brain_surface_figure\n\ndata = {\"lh_V1\": 1, \"rh_MT\": 1.5}\n\nax = plot_brain_surface_figure(data, species=\"human\", atlas=\"glasser\")\n</code></pre> <p></p> <pre><code>from plotfig import plot_brain_surface_figure\nimport matplotlib.pyplot as plt\n\nmacaque_data = {\"lh_V1\": 1}\nchimpanzee_data = {\"lh_MVOcC.rv\": 1}\n\nfig, (ax1, ax2) = plt.subplots(1, 2, figsize=(10, 5))\n\nax1 = plot_brain_surface_figure(\n    chimpanzee_data, species=\"chimpanzee\", atlas=\"bna\", ax=ax1, title_name=\"Chimpanzee\"\n)\nax2 = plot_brain_surface_figure(\n    macaque_data, species=\"macaque\", atlas=\"charm5\", ax=ax2, title_name=\"Macaque\"\n)\n</code></pre> <p></p>","path":["ä½¿ç”¨","è„‘åŒºå›¾"],"tags":[]},{"location":"usage/brain_surface/#_3","level":2,"title":"ä¸åŒçš„è¡¨é¢æ–‡ä»¶","text":"<p>å¯¹äºäººï¼Œæä¾›äº†ä»¥ä¸‹è¡¨é¢æ–‡ä»¶ï¼š</p> <ol> <li><code>veryinflated</code></li> <li><code>inflated</code></li> <li><code>midthiickness</code></li> <li><code>sphere</code></li> <li><code>flat</code></li> </ol> <pre><code>from plotfig import plot_brain_surface_figure\nimport matplotlib.pyplot as plt\n\nfig, axes = plt.subplots(2, 3, figsize=(12, 6))\nfig.delaxes(axes[1, 2])\n\nplot_data = {\"lh_V1\": 1, \"rh_FST\": 2}\n\nax1 = plot_brain_surface_figure(plot_data, surf=\"veryinflated\", ax=axes[0,0], title_name=\"veryinflated\")\nax2 = plot_brain_surface_figure(plot_data, surf=\"inflated\", ax=axes[0,1], title_name=\"inflated\")\nax3 = plot_brain_surface_figure(plot_data, surf=\"midthickness\", ax=axes[0, 2], title_name=\"midthickness\")\nax4 = plot_brain_surface_figure(plot_data, surf=\"sphere\", ax=axes[1,0], title_name=\"sphere\")\nax5 = plot_brain_surface_figure(plot_data, surf=\"flat\", ax=axes[1,1], title_name=\"flat\")\n</code></pre> <p></p> <p>å¯¹äºé»‘çŒ©çŒ©ï¼Œæä¾›äº†ä»¥ä¸‹è¡¨é¢æ–‡ä»¶ï¼š</p> <ol> <li><code>veryinflated</code></li> <li><code>midthiickness</code></li> </ol> <pre><code>from plotfig import plot_brain_surface_figure\nimport matplotlib.pyplot as plt\n\nfig, axes = plt.subplots(1, 2)\n\nplot_data = {\"lh_MVOcC.rd\": 1, \"rh_STG.r\": 2}\n\nax1 = plot_brain_surface_figure(plot_data, species=\"chimpanzee\", atlas=\"bna\", surf=\"veryinflated\", ax=axes[0], title_name=\"veryinflated\")\nax3 = plot_brain_surface_figure(plot_data, species=\"chimpanzee\", atlas=\"bna\", surf=\"midthickness\", ax=axes[1], title_name=\"midthickness\")\n</code></pre> <p></p> <p>å¯¹äºçŒ•çŒ´ï¼Œæä¾›äº†ä»¥ä¸‹è¡¨é¢æ–‡ä»¶ï¼š</p> <ol> <li><code>veryinflated</code></li> <li><code>inflated</code></li> <li><code>pial</code></li> <li><code>midthiickness</code></li> <li><code>white</code></li> <li><code>flat</code></li> </ol> <pre><code>from plotfig import plot_brain_surface_figure\nimport matplotlib.pyplot as plt\n\nfig, axes = plt.subplots(2, 3, figsize=(12, 6))\n\nplot_data = {\"lh_V1\": 1, \"rh_FST\": 2}\n\nax1 = plot_brain_surface_figure(plot_data, species=\"macaque\", atlas=\"charm5\", surf=\"veryinflated\", ax=axes[0,0], title_name=\"veryinflated\")\nax2 = plot_brain_surface_figure(plot_data, species=\"macaque\", atlas=\"charm5\", surf=\"inflated\", ax=axes[0,1], title_name=\"inflated\")\nax3 = plot_brain_surface_figure(plot_data, species=\"macaque\", atlas=\"charm5\", surf=\"pial\", ax=axes[0, 2], title_name=\"pial\")\nax4 = plot_brain_surface_figure(plot_data, species=\"macaque\", atlas=\"charm5\", surf=\"midthickness\", ax=axes[1,0], title_name=\"midthickness\")\nax5 = plot_brain_surface_figure(plot_data, species=\"macaque\", atlas=\"charm5\", surf=\"white\", ax=axes[1,1], title_name=\"white\")\nax6 = plot_brain_surface_figure(plot_data, species=\"macaque\", atlas=\"charm5\", surf=\"flat\", ax=axes[1,2], title_name=\"flat\")\n</code></pre> <p></p>","path":["ä½¿ç”¨","è„‘åŒºå›¾"],"tags":[]},{"location":"usage/brain_surface/#_4","level":2,"title":"æ›´å¤šè®¾ç½®","text":"<p>å…¨éƒ¨å‚æ•°è§ <code>plot_brain_surface_figure</code> çš„ API æ–‡æ¡£ã€‚</p> <pre><code>from plotfig import plot_brain_surface_figure\n\ndata = {\"lh_V1\": 1, \"rh_MT\": 1.5, \"rh_V1\": -1}\n\nax = plot_brain_surface_figure(\n    data,\n    species=\"human\",\n    atlas=\"glasser\",\n    surf=\"inflated\",\n    cmap=\"bwr\",\n    vmin=-1,\n    vmax=1,\n    colorbar=True,\n    colorbar_label_name=\"AAA\"\n)\n</code></pre> <p></p> <ol> <li> <p>Glasser, M. F., Coalson, T. S., Robinson, E. C., Hacker, C. D., Harwell, J., Yacoub, E., Ugurbil, K., Andersson, J., Beckmann, C. F., Jenkinson, M., Smith, S. M., &amp; Van Essen, D. C. (2016). A multi-modal parcellation of human cerebral cortex. Nature, 536(7615), Article 7615. https://doi.org/10.1038/nature18933 â†©</p> </li> <li> <p>Fan, L., Li, H., Zhuo, J., Zhang, Y., Wang, J., Chen, L., Yang, Z., Chu, C., Xie, S., Laird, A. R., Fox, P. T., Eickhoff, S. B., Yu, C., &amp; Jiang, T. (2016). The Human Brainnetome Atlas: A New Brain Atlas Based on Connectional Architecture. Cerebral Cortex (New York, N.Y.: 1991), 26(8), 3508â€“3526. https://doi.org/10.1093/cercor/bhw157 â†©</p> </li> <li> <p>Wang, Y., Cheng, L., Li, D., Lu, Y., Wang, C., Wang, Y., Gao, C., Wang, H., Erichsen, C. T., Vanduffel, W., Hopkins, W. D., Sherwood, C. C., Jiang, T., Chu, C., &amp; Fan, L. (2025). The Chimpanzee Brainnetome Atlas reveals distinct connectivity and gene expression profiles relative to humans. The Innovation, 0(0). https://doi.org/10.1016/j.xinn.2024.100755 â†©</p> </li> <li> <p>Jung, B., Taylor, P. A., Seidlitz, J., Sponheim, C., Perkins, P., Ungerleider, L. G., Glen, D., &amp; Messinger, A. (2021). A comprehensive macaque fMRI pipeline and hierarchical atlas. NeuroImage, 235, 117997. https://doi.org/10.1016/j.neuroimage.2021.117997 â†©â†©</p> </li> <li> <p>Lu, Y., Cui, Y., Cao, L., Dong, Z., Cheng, L., Wu, W., Wang, C., Liu, X., Liu, Y., Zhang, B., Li, D., Zhao, B., Wang, H., Li, K., Ma, L., Shi, W., Li, W., Ma, Y., Du, Z., â€¦ Jiang, T. (2024). Macaque Brainnetome Atlas: A multifaceted brain map with parcellation, connection, and histology. Science Bulletin, 69(14), 2241â€“2259. https://doi.org/10.1016/j.scib.2024.03.031 â†©</p> </li> <li> <p>Reveley, C., Gruslys, A., Ye, F. Q., Glen, D., Samaha, J., E. Russ, B., Saad, Z., K. Seth, A., Leopold, D. A., &amp; Saleem, K. S. (2017). Three-Dimensional Digital Template Atlas of the Macaque Brain. Cerebral Cortex, 27(9), 4463â€“4477. https://doi.org/10.1093/cercor/bhw248 â†©</p> </li> </ol>","path":["ä½¿ç”¨","è„‘åŒºå›¾"],"tags":[]},{"location":"usage/circos/","level":1,"title":"å¼¦å›¾","text":"","path":["ä½¿ç”¨","å¼¦å›¾"],"tags":[]},{"location":"usage/circos/#_2","level":2,"title":"å¿«é€Ÿå‡ºå›¾","text":"<p>å¼¦å›¾æ˜¯ä¸€ç§ç”¨äºå±•ç¤ºå¤§è„‘ä¸åŒåŒºåŸŸä¹‹é—´è¿æ¥å…³ç³»çš„å¯è§†åŒ–å›¾è¡¨ã€‚ é€šè¿‡å¼§çº¿å°†è„‘åŒºç›¸è¿ï¼Œå¯ä»¥å¿«é€Ÿäº†è§£è„‘åŒºä¹‹é—´çš„è¿æ¥ã€‚</p> <pre><code>from plotfig import plot_circos_figure\nfrom plotfig.utils import gen_symmetric_matrix\n\n# éšæœºç”Ÿæˆå¯¹ç§°åŠ æƒçŸ©é˜µï¼ˆå¯¹è§’çº¿ä¸º0ï¼‰\nconnectome = gen_symmetric_matrix(30, mode=\"nonneg\", sparsity=0.1)\n\n# ç”»å›¾\nfig = plot_circos_figure(connectome)\n\n# ä¿å­˜å›¾ç‰‡\n# fig.savefig(\"./figures/circos1.png\")\n</code></pre> <p></p>","path":["ä½¿ç”¨","å¼¦å›¾"],"tags":[]},{"location":"usage/circos/#_3","level":2,"title":"å‚æ•°è®¾ç½®","text":"<p>å…¨éƒ¨å‚æ•°è§<code>plot_circos_figure</code>çš„ API æ–‡æ¡£ã€‚</p> <pre><code>from plotfig import plot_circos_figure\nfrom plotfig.utils import gen_symmetric_matrix\n\n# éšæœºç”Ÿæˆä¸€ä¸ª10x10çš„å¯¹ç§°åŠ æƒçŸ©é˜µï¼ˆå¯¹è§’çº¿ä¸º0ï¼‰\nconnectome = gen_symmetric_matrix(10, mode=\"nonneg\", sparsity=0.2)\nnode_names = [\"lh_A\", \"lh_B\", \"lh_C\", \"lh_D\", \"lh_E\", \"rh_A\", \"rh_B\", \"rh_C\", \"rh_D\", \"rh_E\"]\nnode_colors = [\"#ff0000\", \"blue\", \"green\", \"yellow\", \"orange\", \"red\", \"blue\", \"green\", \"yellow\", \"orange\"]\n\n# ç”»å›¾\nfig = plot_circos_figure(\n    connectome,\n    symmetric=True,\n    node_names=node_names,\n    node_colors=node_colors,\n    node_space=2,\n    node_label_fontsize=15,\n    vmin=0.1,\n    vmax=0.9,\n    edge_color=\"purple\",\n    edge_alpha=0.8,\n    colorbar=True,\n    colorbar_orientation=\"horizontal\",\n    colorbar_label=\"Conncetivity\",\n)\n\n# ä¿å­˜å›¾ç‰‡\n# fig.savefig(\"./figures/circos.png\")\n</code></pre> <p></p>","path":["ä½¿ç”¨","å¼¦å›¾"],"tags":[]},{"location":"usage/circos/#_4","level":3,"title":"ä¸å…¶ä»–å›¾ç»„åˆ","text":"<p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>plot_circos_figure</code> å‡½æ•°ä¼šè¿”å›ä¸€ä¸ª <code>fig</code>ï¼Œå¯ä»¥ç›´æ¥ç”¨äºä¿å­˜ï¼Œä¾‹å¦‚ <code>fig.savefig(\"./figures/circos.png\")</code>ã€‚</p> <p>åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è¿”å› <code>ax</code>ï¼Œä»¥ä¾¿å°†å…¶ä¸å…¶ä»–å›¾ç»„åˆä½¿ç”¨ã€‚</p> <pre><code>import matplotlib.pyplot as plt\nfrom plotfig import plot_circos_figure\nfrom plotfig.utils import gen_symmetric_matrix\n\nfig = plt.figure(figsize=(6, 3))\n\nax1 = fig.add_subplot(1, 2, 1)\nax1.plot([1, 2, 3, 4], [2, 1, 4, 3])\n\nax2 = fig.add_subplot(1, 2, 2, projection=\"polar\")\nconnectome = gen_symmetric_matrix(10, mode=\"nonneg\", sparsity=0.1)\nax2 = plot_circos_figure(connectome, ax=ax2)\n\n# ä¿å­˜å›¾ç‰‡\n# fig.savefig(\"./figures/circos.png\")\n</code></pre> <p></p>","path":["ä½¿ç”¨","å¼¦å›¾"],"tags":[]},{"location":"usage/circos/#_5","level":3,"title":"å¯¹ç§°ä¸éå¯¹ç§°å¼¦å›¾","text":"<p><code>plotfig</code> å¯ä»¥ç»˜åˆ¶å¯¹ç§°æˆ–ä¸å¯¹ç§°ä¸¤ç§æ ·å¼çš„å¼¦å›¾ã€‚åªéœ€é€šè¿‡ <code>symmetric</code> å‚æ•°è¿›è¡Œè®¾ç½®ã€‚</p> <pre><code>import matplotlib.pyplot as plt\nfrom plotfig import plot_circos_figure\nfrom plotfig.utils import gen_symmetric_matrix\n\nfig = plt.figure(figsize=(7, 3))\nax1 = fig.add_subplot(1, 2, 1, projection=\"polar\")\nax2 = fig.add_subplot(1, 2, 2, projection=\"polar\")\n\nconnectome = gen_symmetric_matrix(10, mode=\"nonneg\", sparsity=0.1)\n\nax1 = plot_circos_figure(connectome, symmetric=True, ax=ax1, colorbar=False)\nax2 = plot_circos_figure(connectome, symmetric=False, ax=ax2)\n\n# ä¿å­˜å›¾ç‰‡\n# fig.savefig(\"./figures/circos.png\")\n</code></pre> <p></p>","path":["ä½¿ç”¨","å¼¦å›¾"],"tags":[]},{"location":"usage/circos/#_6","level":3,"title":"è¾¹çš„é¢œè‰²","text":"<p><code>edge_color</code> å‚æ•°å¯ç”¨äºè®¾ç½®è¾¹çš„é¢œè‰²ï¼Œä½†æ— è®ºå¦‚ä½•ï¼Œè¾¹çš„æ·±æµ…ä»ä¼šæ ¹æ®è¿æ¥æƒé‡è‡ªåŠ¨è°ƒæ•´ã€‚</p> <pre><code>import matplotlib.pyplot as plt\nfrom plotfig import plot_circos_figure\nfrom plotfig.utils import gen_symmetric_matrix\n\nfig = plt.figure(figsize=(12, 3), layout=\"constrained\")\nax1 = fig.add_subplot(1, 3, 1, projection=\"polar\")\nax2 = fig.add_subplot(1, 3, 2, projection=\"polar\")\nax3 = fig.add_subplot(1, 3, 3, projection=\"polar\")\n\nconnectome = gen_symmetric_matrix(10, mode=\"nonneg\", sparsity=0.1)\n\nax1 = plot_circos_figure(connectome, ax=ax1, edge_color=\"red\")\nax2 = plot_circos_figure(connectome, ax=ax2, edge_color=\"green\")\nax3 = plot_circos_figure(connectome, ax=ax3, edge_color=\"blue\")\n\n# ä¿å­˜å›¾ç‰‡\n# fig.savefig(\"./figures/circos.png\")\n</code></pre> <p></p> <p>ä¹Ÿå¯ä»¥é€šè¿‡ <code>cmap</code> å‚æ•°åº”ç”¨ Matplotlib å†…ç½®çš„å¸¸ç”¨é¢œè‰²æ˜ å°„ï¼ˆColormapï¼‰ã€‚</p> <p>Warning</p> <p>å½“ä½¿ç”¨<code>cmap</code>æ—¶ï¼Œ<code>edge_color</code>å‚æ•°å°†ä¸å†ç”Ÿæ•ˆã€‚</p> <pre><code>import matplotlib.pyplot as plt\nfrom plotfig import plot_circos_figure\nfrom plotfig.utils import gen_symmetric_matrix\n\nfig = plt.figure(figsize=(12, 3), layout=\"constrained\")\nax1 = fig.add_subplot(1, 3, 1, projection=\"polar\")\nax2 = fig.add_subplot(1, 3, 2, projection=\"polar\")\nax3 = fig.add_subplot(1, 3, 3, projection=\"polar\")\n\nconnectome = gen_symmetric_matrix(10, mode=\"nonneg\", sparsity=0.1)\n\nax1 = plot_circos_figure(connectome, ax=ax1, cmap=\"Reds\")\nax2 = plot_circos_figure(connectome, ax=ax2, cmap=\"viridis\")\nax3 = plot_circos_figure(connectome, ax=ax3, cmap=\"bwr\")\n\n# ä¿å­˜å›¾ç‰‡\n# fig.savefig(\"./figures/circos.png\")\n</code></pre> <p></p> <p>å½“ connectome æ•°æ®ä¸­å­˜åœ¨è´Ÿå€¼æ—¶ï¼Œæ— æ³•è‡ªå®šä¹‰è¾¹çš„é¢œè‰²ï¼Œç³»ç»Ÿå°†é»˜è®¤ä½¿ç”¨ Matplotlib çš„ <code>bwr</code> é¢œè‰²æ˜ å°„ã€‚</p> <pre><code>from plotfig import plot_circos_figure\nfrom plotfig.utils import gen_symmetric_matrix\n\n# ç”Ÿæˆå¸¦è´Ÿå€¼çš„å¯¹ç§°çŸ©é˜µ\nconnectome = gen_symmetric_matrix(10, mode=\"all\", sparsity=0.1)\n\nfig = plot_circos_figure(connectome)\n\n# ä¿å­˜å›¾ç‰‡\n# fig.savefig(\"./figures/circos.png\")\n</code></pre> <pre><code>\u001b[32m2025-09-05 15:09:37.347\u001b[0m | \u001b[33m\u001b[1mWARNING \u001b[0m | \u001b[36mplotfig.circos\u001b[0m:\u001b[36mplot_circos_figure\u001b[0m:\u001b[36m116\u001b[0m - \u001b[33m\u001b[1mç”±äº connectome å­˜åœ¨è´Ÿå€¼ï¼Œè¿çº¿é¢œè‰²æ— æ³•è‡ªå®šä¹‰ï¼Œåªèƒ½æ­£å€¼æ˜¾ç¤ºçº¢è‰²ï¼Œè´Ÿå€¼æ˜¾ç¤ºè“è‰²\u001b[0m\n</code></pre> <p></p>","path":["ä½¿ç”¨","å¼¦å›¾"],"tags":[]},{"location":"usage/correlation/","level":1,"title":"ç›¸å…³å›¾","text":"<p>ç‚¹çº¿ç›¸å…³å›¾æ˜¯ä¸€ç±»ç”¨äºå±•ç¤ºä¸¤ä¸ªå˜é‡ä¹‹é—´ç›¸å…³å…³ç³»çš„å¯è§†åŒ–å›¾å½¢ï¼Œé€šå¸¸åœ¨å›¾ä¸­ç»˜åˆ¶æ¯ä¸ªæ ·æœ¬çš„ä¸€å¯¹å˜é‡å€¼ä½œä¸ºç‚¹ï¼Œå¹¶é€šè¿‡æ‹Ÿåˆçº¿ã€ç›¸å…³ç³»æ•°å’Œæ˜¾è‘—æ€§æ ‡æ³¨æ¥ä½“ç°å®ƒä»¬çš„ç›¸å…³ç¨‹åº¦ã€‚ å®ƒæ˜¯æ¢ç´¢å˜é‡ä¹‹é—´çº¿æ€§æˆ–éçº¿æ€§å…³ç³»çš„å¸¸ç”¨æ–¹æ³•ï¼Œå°¤å…¶åœ¨ç§‘å­¦ç ”ç©¶å’Œæ•°æ®åˆ†æä¸­éå¸¸å¸¸è§ã€‚</p> <p><code>plot_correlation_figure</code> æä¾›äº†ç®€æ´æ˜“ç”¨çš„ç‚¹çº¿ç›¸å…³å›¾åŠŸèƒ½ï¼Œèƒ½å¤Ÿè‡ªåŠ¨ç»˜åˆ¶å˜é‡æ•£ç‚¹ã€æ‹Ÿåˆçº¿ï¼Œå¯ä»¥è®¡ç®—å¹¶æ˜¾ç¤º Spearman æˆ– Pearson ä¸¤ç§ç›¸å…³ç³»æ•°ï¼ˆé»˜è®¤è®¡ç®— Spearman ç›¸å…³æ€§ï¼‰ã€‚ åŒæ—¶ï¼Œ<code>plot_correlation_figure</code> ä¼šæ ¹æ®æ˜¾è‘—æ€§æ°´å¹³è‡ªåŠ¨æ ‡æ³¨ <code>*</code>ã€<code>**</code> æˆ– <code>***</code>ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿåˆ¤æ–­ç›¸å…³æ€§æ˜¯å¦æ˜¾è‘—ï¼Œé€‚åˆç”¨äºç§‘ç ”å›¾è¡¨ã€æ¼”ç¤ºå¹»ç¯ç‰‡æˆ–è®ºæ–‡æ’å›¾ä¸­ã€‚</p>","path":["ä½¿ç”¨","ç›¸å…³å›¾"],"tags":[]},{"location":"usage/correlation/#_2","level":2,"title":"å¿«é€Ÿå‡ºå›¾","text":"<p>å‡å¦‚æˆ‘ä»¬æœ‰ä¸¤ç»„æ ·æœ¬æ•°é‡ä¸€è‡´çš„æ•°æ®ï¼ˆæ¯ç»„åŒ…å« 100 ä¸ªæ ·æœ¬ï¼‰ï¼Œæˆ‘ä»¬å¸Œæœ›é€šè¿‡ç»˜å›¾ç›´è§‚å±•ç¤ºå®ƒä»¬ä¹‹é—´æ˜¯å¦å­˜åœ¨ç›¸å…³æ€§ã€‚ è¿™é€šå¸¸å¯ä»¥é€šè¿‡ç‚¹çº¿ç›¸å…³å›¾æ¥å®ç°ï¼Œå°†æ¯å¯¹æ ·æœ¬å€¼ç»˜åˆ¶ä¸ºæ•£ç‚¹ï¼Œå¹¶ç»“åˆæ‹Ÿåˆçº¿å’Œç›¸å…³ç³»æ•°ï¼Œåˆ¤æ–­å˜é‡ä¹‹é—´çš„ç›¸å…³ç¨‹åº¦åŠæ˜¾è‘—æ€§ã€‚</p> <pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom plotfig import *\n\nnp.random.seed(42)\ndata1 = np.arange(100)\ndata2 = data1 + np.random.normal(1,50, 100)\n# data2æ˜¯åœ¨data1çš„åŸºç¡€ä¸ŠåŠ ä¸Šäº†å™ªå£°ã€‚\n# æ­£ç»äººéƒ½çŸ¥é“data1å’Œdata2ç›¸å…³ï¼Œé‚£ä¹ˆplotfigçŸ¥ä¸çŸ¥é“å‘¢ï¼Ÿ\n\nax = plot_correlation_figure(data1,data2)\n</code></pre> <p></p>","path":["ä½¿ç”¨","ç›¸å…³å›¾"],"tags":[]},{"location":"usage/correlation/#hexbin","level":2,"title":"hexbinå›¾","text":"<p>åˆ©ç”¨ <code>hexbin=True</code> ã€‚æˆ‘ä»¬å¯ä»¥å±•ç¤ºå¤§é‡æ•£ç‚¹åˆ†å¸ƒçš„å¯†åº¦ï¼Œè€Œä¸éœ€è¦ç»˜åˆ¶æ‰€æœ‰çš„æ•£ç‚¹ã€‚</p> <pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom plotfig import *\n\nnp.random.seed(42)\nn = 100_000\ndata1 = np.random.standard_normal(n)\ndata2 = 2.0 + 3.0 * data1 + 4.0 * np.random.standard_normal(n)\n\nfig, (ax1, ax2) = plt.subplots(1, 2, figsize=(7, 3), layout=\"constrained\")\nax1 = plot_correlation_figure(\n    data1,\n    data2,\n    ax=ax1\n)\n\nhb = plot_correlation_figure(\n    data1,\n    data2,\n    ax=ax2,\n    hexbin=True,\n    hexbin_cmap=\"Reds\",\n    hexbin_gridsize=30\n)\ncb = fig.colorbar(hb, ax=ax2, label='counts')\n</code></pre> <p></p>","path":["ä½¿ç”¨","ç›¸å…³å›¾"],"tags":[]},{"location":"usage/correlation/#_3","level":2,"title":"å‚æ•°è®¾ç½®","text":"<p>å…¨éƒ¨å‚æ•°è§<code>plot_correlation_figure</code>çš„ API æ–‡æ¡£ã€‚</p> <pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom plotfig import *\n\nnp.random.seed(42)\ndata1 = np.arange(100)\ndata2 = data1 + np.random.normal(1,50, 100)\n# data2æ˜¯åœ¨data1çš„åŸºç¡€ä¸ŠåŠ ä¸Šäº†å™ªå£°ã€‚\n# æ­£ç»äººéƒ½çŸ¥é“data1å’Œdata2ç›¸å…³ï¼Œé‚£ä¹ˆplotfigçŸ¥ä¸çŸ¥é“å‘¢ï¼Ÿ\n\nfig, ax = plt.subplots(figsize=(3, 3))\nax = plot_correlation_figure(\n    data1,\n    data2,\n    stats_method=\"spearman\",  # ä»…æœ‰â€œspearman, pearsonâ€ï¼Œé»˜è®¤æ˜¯spearman\n    ci=True,  # æ˜¾ç¤º95%ç½®ä¿¡åŒºé—´\n    dots_color=\"green\",\n    line_color=\"pink\",\n    title_name=\"Correlation between data1 and data2\",\n    title_fontsize=10,\n    title_pad=20,  # æ§åˆ¶é‡Šæ ‡é¢˜å’Œå›¾çš„è·ç¦»ï¼Œé»˜è®¤æ˜¯10\n    x_label_name=\"Data1\",\n    y_label_name=\"Data2\",\n    xlim=(0,100),\n    ylim=(-100,150),\n)\n</code></pre> <p></p>","path":["ä½¿ç”¨","ç›¸å…³å›¾"],"tags":[]},{"location":"usage/matrix/","level":1,"title":"çŸ©é˜µå›¾","text":"<p>çŸ©é˜µå›¾æ˜¯ä¸€ç§ç”¨äºå±•ç¤ºå¤šä¸ªå˜é‡ä¹‹é—´æˆå¯¹å…³ç³»çš„å¯è§†åŒ–æ–¹å¼ï¼Œå¸¸è§å½¢å¼ä¸ºä¸€ä¸ªå¯¹ç§°çš„äºŒç»´ç½‘æ ¼ï¼Œå…¶ä¸­æ¯ä¸ªå•å…ƒæ ¼è¡¨ç¤ºä¸€å¯¹å˜é‡ä¹‹é—´çš„ç»Ÿè®¡å…³ç³»ã€‚ å®ƒå¸¸ç”¨äºæ¢ç´¢æ•°æ®é›†ä¸­å¤šä¸ªå˜é‡ä¹‹é—´çš„ç›¸å…³ç»“æ„ï¼Œæ˜¯æ•°æ®åˆ†æå’Œç§‘ç ”ç»˜å›¾ä¸­çš„å¸¸ç”¨å·¥å…·ã€‚</p> <p><code>plot_matrix_figure</code> æ”¯æŒè‡ªåŠ¨ç”ŸæˆçŸ©é˜µå›¾ã€‚</p>","path":["ä½¿ç”¨","çŸ©é˜µå›¾"],"tags":[]},{"location":"usage/matrix/#_2","level":2,"title":"å¿«é€Ÿå‡ºå›¾","text":"<p>æˆ‘ä»¬å¯ä»¥ç”Ÿæˆä¸€ä¸ª 10 Ã— 19 çš„çŸ©é˜µå›¾ï¼Œç”¨äºå±•ç¤º 10 ä¸ªå…ƒç´ ä¸å¦ 19 ä¸ªå…ƒç´ ä¹‹é—´çš„æˆå¯¹å…³ç³»ã€‚</p> <pre><code>import numpy as np\nfrom plotfig import *\n\ndata = np.random.rand(10, 19)\n\nax = plot_matrix_figure(data)\n</code></pre> <p></p>","path":["ä½¿ç”¨","çŸ©é˜µå›¾"],"tags":[]},{"location":"usage/matrix/#_3","level":2,"title":"å‚æ•°è®¾ç½®","text":"<p>å…¨éƒ¨å‚æ•°è§<code>plot_matrix_figure</code>çš„ API æ–‡æ¡£ã€‚</p> <pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom plotfig import *\n\ndata = np.random.rand(4,4)\n\nfig, ax = plt.subplots(figsize=(3,3))\nax = plot_matrix_figure(\n    data,\n    row_labels_name=[\"A\", \"B\", \"C\", \"D\"],\n    col_labels_name=[\"E\", \"F\", \"G\", \"H\"],\n    cmap=\"viridis\",\n    title_name=\"Matrix Figure\",\n    title_fontsize=10,\n    colorbar=True,\n    colorbar_label_name=\"Colorbar\",\n)\n</code></pre> <p></p>","path":["ä½¿ç”¨","çŸ©é˜µå›¾"],"tags":[]},{"location":"usage/multi_groups/","level":1,"title":"å¤šç»„æŸ±çŠ¶å›¾","text":"","path":["ä½¿ç”¨","å¤šç»„æŸ±çŠ¶å›¾"],"tags":[]},{"location":"usage/multi_groups/#_2","level":2,"title":"å¿«é€Ÿå‡ºå›¾","text":"<p>æˆ‘ä»¬é‡‡ç”¨äº†å¤šç»„æŸ±çŠ¶å›¾ï¼ˆmulti-group bar chartï¼‰æ¥å±•ç¤ºæ•°æ®çš„æ•´ä½“åˆ†å¸ƒæƒ…å†µã€‚ è¯¥å›¾åŒ…å« ä¸¤ç»„æ•°æ®ï¼ˆå³ä¸¤ä¸ªä¸»ç±»åˆ«ï¼‰ï¼Œæ¯ç»„ä¸­åŒ…å« ä¸‰ä¸ªå­æŸ±ï¼ˆbarï¼‰ï¼Œåˆ†åˆ«ä»£è¡¨ä¸åŒçš„å­æ¡ä»¶æˆ–å˜é‡ã€‚ åœ¨æ¯ä¸ª bar å†…éƒ¨ï¼Œç»˜åˆ¶äº† 10 ä¸ªæ ·æœ¬ç‚¹ï¼Œåæ˜ ä¸ªä½“æ°´å¹³çš„å˜å¼‚æ€§æˆ–è§‚æµ‹å€¼ã€‚</p> <p>è¿™ç§å›¾å½¢ç»“æ„æœ‰åŠ©äºåŒæ—¶æ¯”è¾ƒï¼š</p> <ul> <li>æ¯ç»„å†…ä¸åŒæ¡ä»¶ä¹‹é—´çš„å¹³å‡å·®å¼‚ï¼›</li> <li>ä¸åŒç»„ä¹‹é—´çš„æ•´ä½“è¶‹åŠ¿ï¼›</li> <li>æ¯ä¸ªæ¡ä»¶ä¸‹æ ·æœ¬çš„ç¦»æ•£æƒ…å†µæˆ–åˆ†å¸ƒç‰¹å¾ã€‚</li> </ul> <p>ä¸ºäº†å¢å¼ºä¿¡æ¯è¡¨è¾¾ï¼ŒæŸ±çŠ¶å›¾ä¸Šè¿˜å åŠ äº†è¯¯å·®æ¡ï¼ˆå¦‚æ ‡å‡†å·®æˆ–å‡†è¯¯ï¼‰ï¼Œå¹¶ä½¿ç”¨æ•£ç‚¹å›¾å±•ç¤ºæ¯ä¸ª bar ä¸­çš„æ ·æœ¬åˆ†å¸ƒã€‚</p> <pre><code>import numpy as np\nfrom plotfig import *\n\nnp.random.seed(42)\ngroup1_bar1 = np.random.normal(3, 1, 10)\ngroup1_bar2 = np.random.normal(3, 1, 10)\ngroup1_bar3 = np.random.normal(3, 1, 10)\ngroup2_bar1 = np.random.normal(3, 1, 10)\ngroup2_bar2 = np.random.normal(3, 1, 10)\ngroup2_bar3 = np.random.normal(3, 1, 10)\n\nax = plot_multi_group_bar_figure([[group1_bar1, group1_bar2, group1_bar3], [group2_bar1, group2_bar2, group2_bar3]])\n</code></pre> <p></p>","path":["ä½¿ç”¨","å¤šç»„æŸ±çŠ¶å›¾"],"tags":[]},{"location":"usage/multi_groups/#_3","level":2,"title":"å›¾çš„ç¾åŒ–","text":"<p>ä¸å•ç»„æŸ±çŠ¶å›¾ç±»ä¼¼ï¼Œå¤šç»„æŸ±çŠ¶å›¾ä¹Ÿæä¾›äº†å¤§é‡å¯è°ƒèŠ‚çš„å‚æ•°ï¼Œç”¨äºçµæ´»æ§åˆ¶å›¾åƒçš„å¤–è§‚ã€‚ æœ¬èŠ‚ä»…å±•ç¤ºå…¶ä¸­çš„ä¸€éƒ¨åˆ†å‚æ•°ã€‚</p> <p>å®Œæ•´å‚æ•°åˆ—è¡¨è¯·å‚è§ <code>plot_multi_group_bar_figure</code> çš„ API æ–‡æ¡£ã€‚</p> <pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom plotfig import *\n\nnp.random.seed(42)\ngroup1_bar1 = np.random.normal(3, 1, 10)\ngroup1_bar2 = np.random.normal(3, 1, 10)\ngroup1_bar3 = np.random.normal(3, 1, 10)\ngroup2_bar1 = np.random.normal(3, 1, 10)\ngroup2_bar2 = np.random.normal(3, 1, 10)\ngroup2_bar3 = np.random.normal(3, 1, 10)\n\nfig, ax = plt.subplots(figsize=(6, 3))\nax = plot_multi_group_bar_figure(\n    [[group1_bar1, group1_bar2, group1_bar3], [group2_bar1, group2_bar2, group2_bar3]],\n    ax=ax,\n    group_labels=[\"A\", \"B\"],\n    bar_labels=[\"D\", \"E\", \"F\"],\n    bar_width=0.2,\n    bar_gap=0.05,\n    bar_color=[\"tab:blue\", \"tab:orange\", \"tab:green\"],\n    errorbar_type=\"sd\",\n    dots_color=\"pink\",\n    dots_size=15,\n    title_name=\"Title name\",\n    title_fontsize=15,\n    y_label_name=\"Y label name\",\n)\n</code></pre> <p></p>","path":["ä½¿ç”¨","å¤šç»„æŸ±çŠ¶å›¾"],"tags":[]},{"location":"usage/multi_groups/#_4","level":2,"title":"ç»Ÿè®¡","text":"<p>å¤šç»„æŸ±çŠ¶å›¾ç›®å‰ä»…æ”¯æŒé€šè¿‡å¤–éƒ¨ç»Ÿè®¡æ£€éªŒä¼ å…¥ p å€¼ï¼Œå¹¶åœ¨ç»„å†…ç›¸åº”ä½ç½®æ ‡æ³¨æ˜Ÿå·ã€‚</p> <p>å…³äºâ€œå¤–éƒ¨ç»Ÿè®¡æ£€éªŒâ€çš„è¯¦ç»†è¯´æ˜ï¼Œè¯·å‚è§ï¼šå•ç»„æŸ±çŠ¶å›¾ / ç»Ÿè®¡ã€‚</p> <pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom plotfig import *\n\nnp.random.seed(42)\ngroup1_bar1 = np.random.normal(3, 1, 10)\ngroup1_bar2 = np.random.normal(3, 1, 10)\ngroup1_bar3 = np.random.normal(3, 1, 10)\ngroup2_bar1 = np.random.normal(3, 1, 10)\ngroup2_bar2 = np.random.normal(3, 1, 10)\ngroup2_bar3 = np.random.normal(3, 1, 10)\n\nfig, ax = plt.subplots(figsize=(6, 3))\nax = plot_multi_group_bar_figure(\n    [[group1_bar1, group1_bar2, group1_bar3], [group2_bar1, group2_bar2, group2_bar3]],\n    ax=ax,\n    group_labels=[\"A\", \"B\"],\n    bar_labels=[\"D\", \"E\", \"F\"],\n    bar_width=0.2,\n    bar_gap=0.05,\n    bar_color=[\"tab:blue\", \"tab:orange\", \"tab:green\"],\n    errorbar_type=\"se\",\n    dots_color=\"pink\",\n    dots_size=15,\n    title_name=\"Title name\",\n    title_fontsize=15,\n    y_label_name=\"Y label name\",\n    statistic=True,\n    test_method=\"external\",\n    p_list=[[0.05, 0.01, 0.001], [0.001, 0.01, 0.05]]\n)\n</code></pre> <p></p>","path":["ä½¿ç”¨","å¤šç»„æŸ±çŠ¶å›¾"],"tags":[]},{"location":"usage/single_group/","level":1,"title":"å•ç»„æŸ±çŠ¶å›¾","text":"","path":["ä½¿ç”¨","å•ç»„æŸ±çŠ¶å›¾"],"tags":[]},{"location":"usage/single_group/#_2","level":2,"title":"å¿«é€Ÿå‡ºå›¾","text":"<p>æŸ±çŠ¶å›¾ï¼ˆbar chartï¼‰æ˜¯ä¸€ç§å¸¸ç”¨çš„å›¾å½¢å·¥å…·ï¼Œç”¨äºå±•ç¤ºä¸åŒç±»åˆ«ä¹‹é—´çš„æ•°å€¼å¯¹æ¯”ã€‚ å®ƒé€šè¿‡ä¸€ç»„å‚ç›´æˆ–æ°´å¹³çš„çŸ©å½¢æ¡æ¥è¡¨ç¤ºå„ç±»åˆ«çš„å€¼ï¼Œæ¡çš„é«˜åº¦ï¼ˆæˆ–é•¿åº¦ï¼‰å¯¹åº”æ•°æ®çš„å¤§å°ã€‚ æŸ±çŠ¶å›¾ç›´è§‚ã€æ¸…æ™°ï¼Œé€‚åˆç”¨äºæ¯”è¾ƒç»„é—´çš„å‡å€¼ï¼Œå°¤å…¶é€‚ç”¨äºç¦»æ•£ç±»åˆ«æ•°æ®çš„å¯è§†åŒ–ã€‚ åœ¨ç§‘ç ”å’Œæ•°æ®åˆ†æä¸­ï¼ŒæŸ±çŠ¶å›¾å¸¸ç”¨äºå‘ˆç°å®éªŒç»„ä¸å¯¹ç…§ç»„ä¹‹é—´çš„å·®å¼‚ã€‚ <code>plotfig</code> åŸºäºå¼ºå¤§çš„ <code>matplotlib</code> å¼€å‘ï¼Œç®€åŒ–äº†ç”»å›¾æµç¨‹ï¼Œä½¿å¾—å¤šç»„æ•°æ®çš„å¯¹æ¯”æ›´åŠ ç›´è§‚ã€‚</p> <p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬æœ‰3ç»„æ•°æ® ï¼ˆåˆ†åˆ«æœ‰9ä¸ªæ ·æœ¬ã€10ä¸ªæ ·æœ¬ã€11ä¸ªæ ·æœ¬ï¼‰é€šè¿‡æŸ±çŠ¶å›¾å±•ç¤ºå®ƒä»¬ä¹‹é—´çš„å·®å¼‚ã€‚</p> <pre><code>import numpy as np\nfrom plotfig import *\n\ndata1 = np.random.normal(1, 1, 9)\ndata2 = np.random.normal(2, 1, 10)\ndata3 = np.random.normal(3, 1, 11)\n\nax = plot_one_group_bar_figure([data1, data2, data3])\n</code></pre> <p></p>","path":["ä½¿ç”¨","å•ç»„æŸ±çŠ¶å›¾"],"tags":[]},{"location":"usage/single_group/#_3","level":2,"title":"å¤šå­å›¾","text":"<p>å€ŸåŠ© <code>matplotlib</code>ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¤–éƒ¨é¢„å…ˆåˆ›å»º <code>figure</code> å’Œ <code>axes</code>ï¼Œä»è€Œçµæ´»ç»˜åˆ¶å¤šä¸ªå­å›¾ï¼Œå®ç°æ›´å¤æ‚çš„å›¾å½¢å¸ƒå±€ã€‚ å…³äºæ›´é«˜çº§çš„å­å›¾æ’ç‰ˆæ–¹å¼ï¼Œè¯¦è§matplotlibä¸­çš„æ•™ç¨‹ã€‚</p> <pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom plotfig import *\n\nax1_bar1 = np.random.normal(0, 1, 7)\nax1_bar2 = np.random.normal(0, 1, 8)\nax2_bar1 = np.random.normal(0, 1, 9)\nax2_bar2 = np.random.normal(0, 1, 10)\n\nfig, axes = plt.subplots(1, 2, figsize=(6, 3))\nfig.subplots_adjust()\n\nax1 = plot_one_group_bar_figure([ax1_bar1, ax1_bar2], ax=axes.flatten()[0])\nax2 = plot_one_group_bar_figure([ax2_bar1, ax2_bar2], ax=axes.flatten()[1])\n</code></pre> <p></p> <p>æ›´å¤š <code>axes</code> ã€‚</p> <pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom plotfig import *\n\nax1_bar1 = np.random.normal(3, 1, 7)\nax1_bar2 = np.random.normal(3, 1, 8)\nax2_bar1 = np.random.normal(3, 1, 9)\nax2_bar2 = np.random.normal(3, 1, 10)\nax3_bar1 = np.random.normal(3, 1, 9)\nax3_bar2 = np.random.normal(3, 1, 10)\nax4_bar1 = np.random.normal(3, 1, 9)\nax4_bar2 = np.random.normal(3, 1, 10)\n\n\nfig, axes = plt.subplots(2, 2, figsize=(6, 6))\nfig.subplots_adjust(wspace=0.5, hspace=0.5)\nax1 = plot_one_group_bar_figure([ax1_bar1, ax1_bar2], ax=axes[0,0], labels_name=[\"A\", \"B\"])\nax2 = plot_one_group_bar_figure([ax2_bar1, ax2_bar2], ax=axes[0,1], labels_name=[\"C\", \"D\"])\nax3 = plot_one_group_bar_figure([ax3_bar1, ax3_bar2], ax=axes[1,0], labels_name=[\"E\", \"F\"])\nax4 = plot_one_group_bar_figure([ax4_bar1, ax4_bar2], ax=axes[1,1], labels_name=[\"G\", \"H\"])\n</code></pre> <p></p>","path":["ä½¿ç”¨","å•ç»„æŸ±çŠ¶å›¾"],"tags":[]},{"location":"usage/single_group/#_4","level":2,"title":"å›¾çš„ç¾åŒ–","text":"","path":["ä½¿ç”¨","å•ç»„æŸ±çŠ¶å›¾"],"tags":[]},{"location":"usage/single_group/#_5","level":3,"title":"å‚æ•°è®¾ç½®","text":"<p>æˆ‘ä»¬å¯ä»¥åœ¨å¤–éƒ¨åˆ›å»º <code>fig</code> å¯¹è±¡ï¼Œä»¥ä¾¿çµæ´»æ§åˆ¶å›¾åƒå¤§å°ã€‚ <code>plotfig</code> æä¾›äº†ä¸°å¯Œçš„é€‰é¡¹ç”¨äºè‡ªå®šä¹‰å›¾å½¢æ ·å¼ã€‚ ä¸‹é¢å±•ç¤ºçš„æ˜¯ <code>plot_one_group_bar_figure</code> å‡½æ•°ä¸­éƒ¨åˆ†å¸¸ç”¨å‚æ•°çš„ç¤ºä¾‹ç”¨æ³•ã€‚</p> <p>å®Œæ•´å‚æ•°è¯´æ˜è¯·å‚é˜… <code>plot_one_group_bar_figure</code> çš„ API æ–‡æ¡£ã€‚</p> <pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom plotfig import *\n\ndata1 = np.random.normal(7, 1, 10)\ndata2 = np.random.normal(8, 1, 9)\n\nfig, ax = plt.subplots(figsize=(3, 3))\nax = plot_one_group_bar_figure(\n    [data1, data2],\n    ax=ax,\n    labels_name=[\"A\", \"B\"],\n    x_label_name=\"x\",\n    y_label_name=\"y\",\n    title_name=\"Title name\",\n    title_fontsize=15,\n    width=0.5,\n    dots_size=15,\n    colors=[\"#4573a5\", \"orange\"],\n    color_alpha=0.7,\n    errorbar_type=\"sd\",\n    edgecolor=\"r\",\n)\n</code></pre> <p></p> <p><code>plot_one_group_bar_figure</code> æ”¯æŒå°†æŸ±çŠ¶å›¾ç»˜åˆ¶ä¸ºæ¸å˜è‰²æ ·å¼ï¼Œé€‚ç”¨äºå±•ç¤ºä¸åŒå¯¹è±¡ä¹‹é—´çš„å…³è”ç»“æœã€‚</p> <p>ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬è®¡ç®—äº†â€œäºº-é»‘çŒ©çŒ©ã€äºº-çŒ•çŒ´ã€é»‘çŒ©çŒ©-çŒ•çŒ´â€ä¹‹é—´çš„åŒæºè„‘åŒºï¼ˆå…± 20 ä¸ªï¼‰ç»“æ„è¿æ¥çš„ Spearman ç›¸å…³æ€§æ—¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨è¿™ç§æ–¹å¼è¿›è¡Œå¯è§†åŒ–å±•ç¤ºã€‚</p> <pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom plotfig import *\n\n\nhuman_color = \"#e38a48\"\nchimp_color = \"#919191\"\nmacaque_color = \"#4573a5\"\n\nnp.random.seed(42)\nhuman_chimp = np.random.normal(7, 1, 20)\nhuman_macaque = np.random.normal(7, 1, 20)\nchimp_macaque = np.random.normal(7, 1, 20)\n\nfig, ax = plt.subplots(figsize=(5,5))\nax = plot_one_group_bar_figure(\n    [human_chimp, human_macaque, chimp_macaque],\n    ax=ax,\n    labels_name=[\"Human-Chimp\", \"Human-Macaque\", \"Chimp-Macaque\"],\n    y_label_name=\"Spearman correlation\",\n    width=0.7,\n    errorbar_type=\"sd\",\n    gradient_color=True,\n    colors_start= [human_color, human_color, chimp_color],\n    colors_end= [chimp_color, macaque_color, macaque_color]\n)\n</code></pre> <p></p>","path":["ä½¿ç”¨","å•ç»„æŸ±çŠ¶å›¾"],"tags":[]},{"location":"usage/single_group/#x","level":3,"title":"å…³äºxè½´","text":"<p>å½“ x è½´æ ‡ç­¾è¾ƒé•¿æ—¶ï¼Œå¯ä»¥é€šè¿‡æ—‹è½¬è§’åº¦æ¥é¿å…é‡å ï¼Œæå‡å¯è¯»æ€§ã€‚</p> <pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom plotfig import *\n\n# è®¾ç½®ä¸­æ–‡å­—ä½“\nplt.rcParams['font.family'] = \"Microsoft YaHei\"  # å¾®è½¯é›…é»‘\nplt.rcParams['axes.unicode_minus'] = False  # æ­£ç¡®æ˜¾ç¤ºè´Ÿå·\n\ndata1 = np.random.normal(3, 1, 10)\ndata2 = np.random.normal(4, 1, 9)\n\nfig, axes = plt.subplots(1, 2, figsize=(6, 3))\nfig.subplots_adjust(wspace=0.5)\nax1 = plot_one_group_bar_figure(\n    [data1, data2],\n    ax=axes[0],\n    labels_name=[\"AAAAAAAAAAA\", \"BBBBBBBBBB\"],\n    y_label_name=\"y\",\n    title_name=\"åå­—è¿‡é•¿\",\n    title_fontsize=15,\n)\nax2 = plot_one_group_bar_figure(\n    [data1, data2],\n    ax=axes[1],\n    labels_name=[\"AAAAAAAAAAA\", \"BBBBBBBBBB\"],\n    y_label_name=\"y\",\n    title_name=\"é”šå®šä¸­é—´æ—‹è½¬\",\n    title_fontsize=15,\n    x_tick_rotation=10,\n    x_label_ha=\"center\",\n)\n</code></pre> <p></p>","path":["ä½¿ç”¨","å•ç»„æŸ±çŠ¶å›¾"],"tags":[]},{"location":"usage/single_group/#y","level":3,"title":"å…³äºyè½´","text":"<p><code>plot_one_group_bar_figure</code> é»˜è®¤ä¼šè‡ªåŠ¨è®¡ç®—æœ€é«˜ç‚¹ä¸æœ€ä½ç‚¹ä¹‹é—´çš„è·ç¦»ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸º y è½´é•¿åº¦çš„ 0.618ï¼ˆå³é»„é‡‘æ¯”ä¾‹ï¼‰ï¼Œä»¥ä¼˜åŒ–è§†è§‰æ•ˆæœã€‚ å¦‚æœå¸Œæœ›æ‰‹åŠ¨è®¾ç½® y è½´èŒƒå›´ï¼Œå¯ä»¥ä½¿ç”¨ <code>y_lim</code> å‚æ•°æ¥è‡ªå®šä¹‰ã€‚</p> <pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom plotfig import *\n\n# è®¾ç½®ä¸­æ–‡å­—ä½“\nplt.rcParams['font.family'] = \"Microsoft YaHei\"  # å¾®è½¯é›…é»‘\nplt.rcParams['axes.unicode_minus'] = False  # æ­£ç¡®æ˜¾ç¤ºè´Ÿå·\n\ndata1 = np.random.normal(3, 1, 10)\ndata2 = np.random.normal(4, 1, 9)\n\nfig, axes = plt.subplots(1, 2, figsize=(6, 3))\nfig.subplots_adjust(wspace=0.5)\nax1 = plot_one_group_bar_figure(\n    [data1, data2],\n    ax=axes[0],\n    labels_name=[\"A\", \"B\"],\n    y_label_name=\"y\",\n    title_name=\"é»„é‡‘æ¯”ä¾‹æ˜¾ç¤º\",\n    title_fontsize=15,\n)\nax2 = plot_one_group_bar_figure(\n    [data1, data2],\n    ax=axes[1],\n    labels_name=[\"A\", \"B\"],\n    y_label_name=\"y\",\n    title_name=\"æ‰‹åŠ¨è®¾ç½®yè½´\",\n    title_fontsize=15,\n    y_lim=(2, 6)  # è®¾ç½®yè½´èŒƒå›´\n)\n</code></pre> <p></p> <p>æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›å°† ax çš„åº•ç«¯å›ºå®šä¸º 0ï¼Œä½†ä¸ç¡®å®šæœ€å¤§åˆ»åº¦çš„å…·ä½“æ•°å€¼ï¼Œå¯ä»¥ä½¿ç”¨ <code>ax_bottom_is_0</code> æ¥è®¾ç½® ax åº•ç«¯å›ºå®šä¸º0ã€‚</p> <pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom plotfig import *\n\n# è®¾ç½®ä¸­æ–‡å­—ä½“\nplt.rcParams['font.family'] = \"Microsoft YaHei\"  # å¾®è½¯é›…é»‘\nplt.rcParams['axes.unicode_minus'] = False  # æ­£ç¡®æ˜¾ç¤ºè´Ÿå·\n\ndata1 = np.random.normal(1,  1, 10)\ndata2 = np.random.normal(2, 1, 9)\n\nfig, axes = plt.subplots(1, 2, figsize=(6, 3))\nfig.subplots_adjust(wspace=0.5)\nax1 = plot_one_group_bar_figure(\n    [data1, data2],\n    ax=axes[0],\n    labels_name=[\"A\", \"B\"],\n    y_label_name=\"y\",\n    title_name=\"é»„é‡‘æ¯”ä¾‹æ˜¾ç¤º\",\n    title_fontsize=15,\n)\nax2 = plot_one_group_bar_figure(\n    [data1, data2],\n    ax=axes[1],\n    labels_name=[\"A\", \"B\"],\n    y_label_name=\"y\",\n    title_name=\"ä¸æ˜¾ç¤ºè´Ÿå€¼\",\n    title_fontsize=15,\n    ax_bottom_is_0=True,  # ä¸æ˜¾ç¤ºè´Ÿå€¼\n)\n</code></pre> <p></p> <p>æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›å°† y è½´çš„åˆ»åº¦æœ€å¤§å€¼é™åˆ¶ä¸º 1ï¼Œä¾‹å¦‚å½“ y è½´è¡¨ç¤ºç»è¿‡ Fisher z è½¬æ¢çš„ç›¸å…³ç³»æ•°æ—¶ï¼Œå¯ä»¥è®¾ç½®<code>y_max_tick_to_one</code>æ¥å›ºå®š y è½´çš„åˆ»åº¦æœ€å¤§å€¼ä¸º1ã€‚</p> <pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom plotfig import *\n\n# è®¾ç½®ä¸­æ–‡å­—ä½“\nplt.rcParams['font.family'] = \"Microsoft YaHei\"  # å¾®è½¯é›…é»‘\nplt.rcParams['axes.unicode_minus'] = False  # æ­£ç¡®æ˜¾ç¤ºè´Ÿå·\n\ndata1 = np.random.normal(0.9,  0.1, 10)\ndata2 = np.random.normal(0.9, 0.1, 9)\n\nfig, axes = plt.subplots(1, 2, figsize=(6, 3))\nfig.subplots_adjust(wspace=0.5)\nax1 = plot_one_group_bar_figure(\n    [data1, data2],\n    ax=axes[0],\n    labels_name=[\"A\", \"B\"],\n    y_label_name=\"y\",\n    title_name=\"é»„é‡‘æ¯”ä¾‹æ˜¾ç¤º\",\n    title_fontsize=15,\n)\nax2 = plot_one_group_bar_figure(\n    [data1, data2],\n    ax=axes[1],\n    labels_name=[\"A\", \"B\"],\n    y_label_name=\"y\",\n    title_name=\"yè½´æœ€å¤§åˆ»åº¦å–1\",\n    title_fontsize=15,\n    y_max_tick_is_1=True,  # yè½´æœ€å¤§åˆ»åº¦å–1\n)\n</code></pre> <p></p> <p>æœ‰æ—¶æˆ‘ä»¬å¯èƒ½å¸Œæœ›æ›´æ”¹ y è½´çš„æ˜¾ç¤ºæ ¼å¼ï¼Œä¾‹å¦‚ä½¿ç”¨ç§‘å­¦è®¡æ•°æ³•æ¥å‘ˆç°æ•°å€¼ï¼Œå¯ä»¥ä½¿ç”¨ <code>math_text</code> å‚æ•°æ¥è®¾ç½®ã€‚</p> <pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom plotfig import *\n\n# è®¾ç½®ä¸­æ–‡å­—ä½“\nplt.rcParams['font.family'] = \"Microsoft YaHei\"  # å¾®è½¯é›…é»‘\nplt.rcParams['axes.unicode_minus'] = False  # æ­£ç¡®æ˜¾ç¤ºè´Ÿå·\n\ndata1 = np.random.normal(10000, 1000, 10)\ndata2 = np.random.normal(11000, 1000, 9)\ndata3 = np.random.normal(0.0001, 0.0001, 11)\ndata4 = np.random.normal(0.0001, 0.0001, 12)\n\nfig, axes = plt.subplots(2, 2, figsize=(6, 6))\nfig.subplots_adjust(wspace=0.5, hspace=0.5)\nax1 = plot_one_group_bar_figure(\n    [data1, data2],\n    ax=axes[0,0],\n    labels_name=[\"A\", \"B\"],\n    y_label_name=\"y\",\n    title_name=\"ç§‘å­¦è®¡æ•°æ³•\",\n    title_fontsize=15,\n)  # é»˜è®¤yè½´ä½¿ç”¨ç§‘å­¦è®¡æ•°æ³•\nax2 = plot_one_group_bar_figure(\n    [data1, data2],\n    ax=axes[0,1],\n    labels_name=[\"A\", \"B\"],\n    y_label_name=\"y\",\n    title_name=\"æ— ç§‘å­¦è®¡æ•°æ³•\",\n    title_fontsize=15,\n    math_text=False,  # æ‰‹åŠ¨å…³é—­ç§‘å­¦è®¡æ•°æ³•\n)\nax3 = plot_one_group_bar_figure(\n    [data3, data4],\n    ax=axes[1,0],\n    labels_name=[\"A\", \"B\"],\n    y_label_name=\"y\",\n    title_name=\"ç§‘å­¦è®¡æ•°æ³•\",\n    title_fontsize=15,\n)  # é»˜è®¤yè½´ä½¿ç”¨ç§‘å­¦è®¡æ•°æ³•\nax4 = plot_one_group_bar_figure(\n    [data3, data4],\n    ax=axes[1,1],\n    labels_name=[\"A\", \"B\"],\n    y_label_name=\"y\",\n    title_name=\"æ— ç§‘å­¦è®¡æ•°æ³•\",\n    title_fontsize=15,\n    math_text=False,  # æ‰‹åŠ¨å…³é—­ç§‘å­¦è®¡æ•°æ³•\n)\n</code></pre> <p></p> <p>æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›å°† Y è½´æ˜¾ç¤ºä¸ºç™¾åˆ†æ¯”æ ¼å¼ã€‚</p> <p>Warning</p> <p><code>percentage</code> æ ¼å¼ä¼šä¸ <code>math_text</code> å†²çªã€‚ è€Œ<code>math_text</code> é»˜è®¤æ‰“å¼€ï¼Œéœ€æ˜¾å¼å…³é—­ã€‚</p> <pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom plotfig import *\n\n# è®¾ç½®ä¸­æ–‡å­—ä½“\nplt.rcParams['font.family'] = \"Microsoft YaHei\"  # å¾®è½¯é›…é»‘\nplt.rcParams['axes.unicode_minus'] = False  # æ­£ç¡®æ˜¾ç¤ºè´Ÿå·\n\ndata1 = np.random.normal(0.5,  0.1, 10)\ndata2 = np.random.normal(0.5, 0.1, 9)\n\nfig, axes = plt.subplots(1, 2, figsize=(6, 3))\nfig.subplots_adjust(wspace=0.5)\nax1 = plot_one_group_bar_figure(\n    [data1, data2],\n    ax=axes[0],\n    labels_name=[\"A\", \"B\"],\n    y_label_name=\"y\",\n    title_name=\"å¸¸è§„æ˜¾ç¤º\",\n    title_fontsize=15,\n)\nax2 = plot_one_group_bar_figure(\n    [data1, data2],\n    ax=axes[1],\n    labels_name=[\"A\", \"B\"],\n    y_label_name=\"y\",\n    title_name=\"æ˜¾ç¤ºç™¾åˆ†æ¯”\",\n    title_fontsize=15,\n    math_text=False,\n    percentage=True,\n)\n</code></pre> <p></p>","path":["ä½¿ç”¨","å•ç»„æŸ±çŠ¶å›¾"],"tags":[]},{"location":"usage/single_group/#_6","level":3,"title":"å…³äºæ•£ç‚¹","text":"<p><code>plot_one_group_bar_figure</code> å…è®¸ä¸ºæ¯ä¸ªæ•£ç‚¹åˆ†é…é¢œè‰²ï¼Œå¸¸ç”¨äºåŒºåˆ†ä¸åŒæ¥æºçš„æ•°æ®ã€‚</p> <pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom plotfig import *\n\n# è®¾ç½®ä¸­æ–‡å­—ä½“\nplt.rcParams['font.family'] = \"Microsoft YaHei\"  # å¾®è½¯é›…é»‘\nplt.rcParams['axes.unicode_minus'] = False  # æ­£ç¡®æ˜¾ç¤ºè´Ÿå·\n\ndata1 = np.random.normal(0.5,  0.1, 10)\ndata2 = np.random.normal(0.5, 0.1, 9)\ndots_color1 = [[\"blue\"]*10, [\"red\"]*9]\ndots_color2 = [[\"green\"]*5+[\"pink\"]*5, [\"orange\"]*4+[\"purple\"]*5]\n\nfig, axes = plt.subplots(1, 2, figsize=(6, 3))\nfig.subplots_adjust(wspace=0.5)\nax1 = plot_one_group_bar_figure(\n    [data1, data2],\n    ax=axes[0],\n    labels_name=[\"A\", \"B\"],\n    y_label_name=\"y\",\n    title_name=\"æ•£ç‚¹ç»Ÿä¸€é¢œè‰²\",\n    title_fontsize=15,\n    dots_color=dots_color1,  # æ•£ç‚¹é¢œè‰²\n)\nax2 = plot_one_group_bar_figure(\n    [data1, data2],\n    ax=axes[1],\n    labels_name=[\"A\", \"B\"],\n    y_label_name=\"y\",\n    title_name=\"æ•£ç‚¹å„è‡ªåˆ†é…é¢œè‰²\",\n    title_fontsize=15,\n    dots_color=dots_color2,  # æ•£ç‚¹é¢œè‰²\n)\n</code></pre> <p></p>","path":["ä½¿ç”¨","å•ç»„æŸ±çŠ¶å›¾"],"tags":[]},{"location":"usage/single_group/#_7","level":2,"title":"ç»Ÿè®¡","text":"<p><code>plot_one_group_bar_figure</code> å¯å¿«é€Ÿå®ç°æŸ±é—´ç»Ÿè®¡æ¯”è¾ƒã€‚å½“å‰æ”¯æŒä»¥ä¸‹ç»Ÿè®¡æ–¹æ³•ï¼š</p> <ol> <li>ç‹¬ç«‹æ ·æœ¬ t æ£€éªŒï¼ˆ<code>ttest_ind</code>ï¼‰</li> <li>é…å¯¹æ ·æœ¬ t æ£€éªŒï¼ˆ<code>ttest_rel</code>ï¼‰</li> <li>å•æ ·æœ¬tæ£€éªŒï¼ˆ<code>ttest_1samp</code>ï¼‰</li> <li>Mann-Whitney U æ£€éªŒï¼ˆ<code>mannwhitneyu</code>ï¼‰</li> <li>å¤–éƒ¨ç»Ÿè®¡æ£€éªŒ ï¼ˆ<code>external</code>ï¼‰</li> </ol> <p>ä½¿ç”¨æ—¶éœ€å…ˆé€šè¿‡ <code>statistic</code> é€‰é¡¹å¯ç”¨ç»Ÿè®¡åŠŸèƒ½ï¼Œå¹¶åœ¨ <code>test_method</code> ä¸­æŒ‡å®šæ–¹æ³•åã€‚</p> <pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom plotfig import *\n\n# è®¾ç½®ä¸­æ–‡å­—ä½“\nplt.rcParams['font.family'] = \"Microsoft YaHei\"  # å¾®è½¯é›…é»‘\nplt.rcParams['axes.unicode_minus'] = False  # æ­£ç¡®æ˜¾ç¤ºè´Ÿå·\n\nnp.random.seed(42)\ndata1 = np.random.normal(3, 1, 30)\ndata2 = np.random.normal(4, 1, 31)\ndata3 = np.random.normal(5, 1, 31)\ndata4 = np.random.normal(2, 1, 9)\ndata5 = np.random.normal(4, 1, 10)\ndata6 = np.random.normal(0, 1, 20)\ndata7 = np.random.normal(1, 1, 20)\n\nfig, axes = plt.subplots(2, 2, figsize=(6, 6))\nfig.subplots_adjust(wspace=0.5, hspace=0.5)\nax1 = plot_one_group_bar_figure(\n    [data1, data2],\n    ax=axes[0,0],\n    labels_name=[\"A\", \"B\"],\n    y_label_name=\"y\",\n    title_name=\"ç‹¬ç«‹æ ·æœ¬tæ£€éªŒ\",\n    title_fontsize=15,\n    statistic=True, \n    test_method=[\"ttest_ind\"]\n)\nax2 = plot_one_group_bar_figure(\n    [data2, data3],\n    ax=axes[0,1],\n    labels_name=[\"A\", \"B\"],\n    y_label_name=\"y\",\n    title_name=\"é…å¯¹æ ·æœ¬tæ£€éªŒ\",\n    title_fontsize=15,\n    statistic=True, \n    test_method=[\"ttest_rel\"]\n)\nax3 = plot_one_group_bar_figure(\n    [data6, data7],\n    ax=axes[1,0],\n    labels_name=[\"A\", \"B\"],\n    y_label_name=\"y\",\n    title_name=\"å•æ ·æœ¬tæ£€éªŒ\",\n    title_fontsize=15,\n    statistic=True,\n    test_method=[\"ttest_1samp\"],\n    popmean=0,\n)\nax4 = plot_one_group_bar_figure(\n    [data4, data5],\n    ax=axes[1,1],\n    labels_name=[\"A\", \"B\"],\n    y_label_name=\"y\",\n    title_name=\"Mann-Whitney Uæ£€éªŒ\",\n    title_fontsize=15,\n    statistic=True, \n    test_method=[\"mannwhitneyu\"]\n)\n</code></pre> <p></p> <p>â€œå¤–éƒ¨ç»Ÿè®¡æ£€éªŒâ€ï¼ˆ<code>external</code>ï¼‰æŒ‡ç”¨æˆ·å¯ä½¿ç”¨å…¶ä»–ç»Ÿè®¡è½¯ä»¶å®Œæˆæ£€éªŒï¼Œåªéœ€å°†è®¡ç®—å¥½çš„ p å€¼ä¼ å…¥å‡½æ•°ã€‚ å¤–éƒ¨ç»Ÿè®¡æ£€éªŒéœ€é€šè¿‡ <code>p_list</code> é¢å¤–ä¼ å…¥å¯¹åº”çš„ p å€¼åˆ—è¡¨ã€‚</p> <p>Note</p> <p>å½“ä½¿ç”¨â€œå¤–éƒ¨ç»Ÿè®¡æ£€éªŒâ€ä¸”æœ‰å¤šä¸ªæŸ±å­éœ€è¦æ¯”è¾ƒæ—¶ï¼Œä¼ å…¥çš„ p å€¼åº”éµå¾ªä»¥ä¸‹é¡ºåºï¼š</p> <ul> <li>1 â†’ 2ã€1 â†’ 3ã€â€¦ã€1 â†’ n  </li> <li>2 â†’ 3ã€2 â†’ 4ã€â€¦ã€2 â†’ n  </li> <li>ä¾æ­¤ç±»æ¨</li> </ul> <pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom plotfig import *\n\n# è®¾ç½®ä¸­æ–‡å­—ä½“\nplt.rcParams['font.family'] = \"Microsoft YaHei\"  # å¾®è½¯é›…é»‘\nplt.rcParams['axes.unicode_minus'] = False  # æ­£ç¡®æ˜¾ç¤ºè´Ÿå·\n\nnp.random.seed(42)\ndata1 = np.random.normal(5,  1, 20)\ndata2 = np.random.normal(7, 1, 20)\ndata3 = np.random.normal(7, 1, 20)\ndata4 = np.random.normal(9, 1, 20)\n\np_list = [0.05, 0.01, 0.001, 1, 0.05, 0.01]\n\nfig, ax = plt.subplots(figsize=(6, 6))\nax = plot_one_group_bar_figure(\n    [data1, data2, data3, data4],\n    ax=ax,\n    y_label_name=\"y\",\n    title_name=\"å¤–éƒ¨æ£€éªŒ\",\n    title_fontsize=15,\n    statistic=True,\n    test_method=[\"external\"],\n    p_list=p_list,\n)\n</code></pre> <p></p>","path":["ä½¿ç”¨","å•ç»„æŸ±çŠ¶å›¾"],"tags":[]},{"location":"usage/single_group/#_8","level":1,"title":"å•ç»„å°æç´å›¾","text":"<p>å°æç´å›¾ï¼ˆviolin plotï¼‰æ˜¯ä¸€ç§ç»“åˆç®±çº¿å›¾ï¼ˆbox plotï¼‰å’Œæ ¸å¯†åº¦ä¼°è®¡å›¾ï¼ˆdensity plotï¼‰ç‰¹ç‚¹çš„å¯è§†åŒ–å·¥å…·ï¼Œç”¨äºå±•ç¤ºæ•°æ®çš„åˆ†å¸ƒæƒ…å†µã€‚ å®ƒä¸ä»…æ˜¾ç¤ºæ•°æ®çš„ä¸­ä½æ•°ã€å››åˆ†ä½æ•°ç­‰ç»Ÿè®¡ä¿¡æ¯ï¼Œè¿˜é€šè¿‡å¯¹ç§°çš„æ ¸å¯†åº¦æ›²çº¿ï¼Œç›´è§‚åæ˜ æ•°æ®åœ¨ä¸åŒå–å€¼åŒºé—´çš„åˆ†å¸ƒå½¢æ€ã€‚ ç›¸æ¯”ä¼ ç»Ÿç®±çº¿å›¾ï¼Œå°æç´å›¾èƒ½æ›´å…¨é¢æ­ç¤ºæ•°æ®çš„å¤šå³°æ€§ã€åæ€ç­‰ç‰¹å¾ï¼Œé€‚åˆæ¯”è¾ƒå¤šä¸ªç»„åˆ«çš„åˆ†å¸ƒå·®å¼‚ã€‚ å½“æ•°æ®åˆ†å¸ƒä¸å‡åŒ€ï¼Œä¸”é‡‡ç”¨éå‚æ•°ç»Ÿè®¡æ–¹æ³•æ—¶ï¼Œä½¿ç”¨å°ç´å›¾å±•ç¤ºå¾€å¾€æ›´ä¸ºåˆé€‚ã€‚</p> <p>åœ¨ plotfig ä¸­ï¼Œç»˜åˆ¶å°æç´å›¾çš„å‡½æ•°åä¸º <code>plot_one_group_violin_figure</code>ã€‚ å…¶å¤§éƒ¨åˆ†å‚æ•°ä¸ <code>plot_one_group_bar_figure</code> ç›¸ä¼¼ï¼Œä»¥ä¸‹æ˜¯éƒ¨åˆ†æ¼”ç¤ºã€‚</p> <p>å®Œæ•´å‚æ•°è¯´æ˜è¯·å‚é˜… <code>plot_one_group_violin_figure</code> çš„ API æ–‡æ¡£ã€‚</p> <pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom plotfig import *\n\n\nhuman_color = \"#e38a48\"\nchimp_color = \"#919191\"\nmacaque_color = \"#4573a5\"\n\nnp.random.seed(42)\nhuman_chimp = 1 + np.random.normal(0, 1, 100)\nhuman_macaque = 2 + np.random.normal(0, 1, 100)\nchimp_macaque = 3 + np.random.normal(0, 1, 100)\n\nfig, ax = plt.subplots(figsize=(5,5))\nax = plot_one_group_violin_figure(\n    [human_chimp, human_macaque, chimp_macaque],\n    ax=ax,\n    labels_name=[\"Human-Chimp\", \"Human-Macaque\", \"Chimp-Macaque\"],\n    y_label_name=\"Spearman correlation\",\n    width=0.7,\n    gradient_color=True,\n    colors_start= [human_color, human_color, chimp_color],\n    colors_end= [chimp_color, macaque_color, macaque_color],\n    show_dots=True,\n    dots_size=7,\n    statistic=True,\n    test_method=[\"mannwhitneyu\"]\n)\n</code></pre> <p></p>","path":["ä½¿ç”¨","å•ç»„æŸ±çŠ¶å›¾"],"tags":[]}]}